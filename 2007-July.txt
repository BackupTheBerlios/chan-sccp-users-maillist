From martin at linkdc.co.uk  Wed Jul  4 20:38:16 2007
From: martin at linkdc.co.uk (Martin Sutherland)
Date: Wed, 4 Jul 2007 19:38:16 +0100
Subject: [Chan-sccp-users] I've finally had to give up with chan_sccp
Message-ID: <21105065.1183574296512.JavaMail.root@mail.linkdc.co.uk>

Dear list members,
 
After a year of struggling for a year in an office with 24 Cisco 7940s/chan_sccp-20060408 + 2 patches/Asterisk 1.2.x, I've finally had to convert the phones to SIP. I really didn't want to do this but even with the latest Asterisk 1.2.x I was getting messages about deadlocks being avoided and the whole system ceasing to work until re-boot. The problems are always connected with transferring calls.
 
I was using P00307020400 firmware on the handsets, Asterisk 1.2.18, chan_sccp-20060408 + 2 patches. Perhaps I should have changed the protocolversion in sccp.conf, but there is a limit to how much messing around you can do in a live office environment.
 
Changing to SIP has had some real downsides. Instead of using Cisco 9714s, I now have to buy Polycom IP601 phones + sidecars, blind transfers seem to result in dead silence, sometimes phones don't seem to know when the other end has hung up etc.
 
Is there anyone out there still using Asterisk 1.2.x with chan_sccp in a typical environment where incoming calls are answered by one or two people and then transferred as needed?
 
Unless I am mistaken, all development of chan_sccp has been aimed at compatability with Asterisk 1.4.x and the forum is now in german which I find hard to understand.
 
Thank you for all your comments.
 
Martin
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070704/92407cbd/attachment.html>

From aspendora at gmail.com  Wed Jul  4 21:47:59 2007
From: aspendora at gmail.com (Lacy Moore - Aspendora)
Date: Wed, 4 Jul 2007 14:47:59 -0500
Subject: [Chan-sccp-users] I've finally had to give up with chan_sccp
In-Reply-To: <21105065.1183574296512.JavaMail.root@mail.linkdc.co.uk>
References: <21105065.1183574296512.JavaMail.root@mail.linkdc.co.uk>
Message-ID: <56a990d20707041247laab8781nc683fa2519b470e3@mail.gmail.com>

It's a shame.  The possibilities with Skinny was so much more than
what SIP has to offer.  How many professional PBX's cannot change the
caller ID information after a call has been transferred to show who
the user is actually now talking to?

Such will be the case for a long time with Asterisk using SIP.  This
could have been done using Skinny.

That's just one of the many things...

On 7/4/07, Martin Sutherland <martin at linkdc.co.uk> wrote:
>
> Dear list members,
>
> After a year of struggling for a year in an office with 24 Cisco
> 7940s/chan_sccp-20060408 + 2 patches/Asterisk 1.2.x, I've finally had to
> convert the phones to SIP. I really didn't want to do this but even with the
> latest Asterisk 1.2.x I was getting messages about deadlocks being avoided
> and the whole system ceasing to work until re-boot. The problems are always
> connected with transferring calls.
>
> I was using P00307020400 firmware on the handsets, Asterisk 1.2.18,
> chan_sccp-20060408 + 2 patches. Perhaps I should have changed the
> protocolversion in sccp.conf, but there is a limit to how much messing
> around you can do in a live office environment.
>
> Changing to SIP has had some real downsides. Instead of using Cisco 9714s, I
> now have to buy Polycom IP601 phones + sidecars, blind transfers seem to
> result in dead silence, sometimes phones don't seem to know when the other
> end has hung up etc.
>
> Is there anyone out there still using Asterisk 1.2.x with chan_sccp in a
> typical environment where incoming calls are answered by one or two people
> and then transferred as needed?
>
> Unless I am mistaken, all development of chan_sccp has been aimed at
> compatability with Asterisk 1.4.x and the forum is now in german which I
> find hard to understand.
>
> Thank you for all your comments.
>
> Martin
>
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>
>


-- 
Lacy Moore
Somewhere I wish I wasn't


From SteveW at bucks.net  Thu Jul  5 08:10:28 2007
From: SteveW at bucks.net (Steve J. Walker)
Date: Thu, 5 Jul 2007 07:10:28 +0100
Subject: [Chan-sccp-users] 7914 Hints and Night Day Mode
Message-ID: <792897337FC81944BA4097ABD7089771037EB97D@pdc.bnsnet.co.uk>

Hi All.

Question, just got the day/night module working in Freepbx which calls
*280 to toggle the day or night status mode. I have set this up as the
bottom button on the 7914s we use in reception, however we have been
asked if it is possible to hint the light to show one of the colours red
for night green for day etc.

[app-daynight]
include => app-daynight-custom
exten => 0,1,GotoIf($["${DB(DAYNIGHT/C${EXTEN}}" =
"NIGHT"]?ext-group,502,1:ext-group,500,1)

[app-daynight-toggle]
include => app-daynight-toggle-custom
exten => *280,1,Answer
exten => *280,n,Wait(1)
exten => *280,n,Set(INDEX=0)
exten => *280,n,Goto(app-daynight-toggle,s,1)
exten => s,1,Set(DAYNIGHTMODE=${DB(DAYNIGHT/C${INDEX}})
exten => s,n,GotoIf($["${DAYNIGHTMODE}" = "NIGHT"]?night:day)
exten => s,n(day),Set(DB(DAYNIGHT/C${INDEX})=NIGHT)
exten =>
s,n,Playback(beep&silence/1&day&reception&digits/${INDEX}&enabled)
exten => s,n,Hangup
exten => s,n(night),Set(DB(DAYNIGHT/C${INDEX})=DAY)
exten =>
s,n,Playback(beep&silence/1&beep&silence/1&day&reception&digits/${INDEX}
&disabled)
exten => s,n,Hangup

; end of [app-daynight-toggle]

That's the code in the conf which works a treat; I know you can hint a
channel or ext using the <ext>@from-internal etc in the conf for the
7914s which we have working ok. But an external app? Is it possible to
hint() from a function so the speed dial looks like a ext so its status
can be shown?

I am gussing a dummy ext 280 and setting it to busy? to hint() the light
red?

Regards,

Steve 

--

Our company accepts no liability for the content of this email, or for
the consequences of any actions taken on the basis of the information
provided, unless that information is subsequently confirmed in writing.
Any views or opinions presented in this email are solely those of the
author and do not necessarily represent those of the company. WARNING:
Computer viruses can be transmitted via email. The recipient should
check this email and any attachments for the presence of viruses. The
company accepts no liability for any damage caused by any virus
transmitted by this email.

Bucks.Net, 30 Edison Road, Aylesbury, BUCKS, HP19 8TE,
http://www.bucks.net






From lehn at planet-ic.de  Thu Jul  5 10:28:24 2007
From: lehn at planet-ic.de (Sebastian Lehn)
Date: Thu, 05 Jul 2007 10:28:24 +0200
Subject: [Chan-sccp-users] I've finally had to give up with chan_sccp
In-Reply-To: <21105065.1183574296512.JavaMail.root@mail.linkdc.co.uk>
References: <21105065.1183574296512.JavaMail.root@mail.linkdc.co.uk>
Message-ID: <468CABA8.90605@planet-ic.de>

Hi Martin,

we are using almost two years Asterisk 1.2.x and chan_sccp-20060408 + 2 patches
with 21 Cisco 7960 + one 7961 phones.

I have build our chan_sccp version with the following create_config.sh options:

- without PARK functions
- with    PICKUP

Transfer, gpickup, meetme and queues works to 99,8 percent fine. Rarely the asterisk
crashes. With an workaround-script to restart the asterisk is up again after 20 seconds
with all phones.

Which arch is your asterisk server? We supports different asterisks and have problems
on x86_64 Systems. On i686 it works fine.


Regards,

Sebastian


Martin Sutherland schrieb:
> Dear list members,
>  
> After a year of struggling for a year in an office with 24 Cisco
> 7940s/chan_sccp-20060408 + 2 patches/Asterisk 1.2.x, I've finally had to
> convert the phones to SIP. I really didn't want to do this but even with
> the latest Asterisk 1.2.x I was getting messages about deadlocks being
> avoided and the whole system ceasing to work until re-boot. The problems
> are always connected with transferring calls.
>  
> I was using P00307020400 firmware on the handsets, Asterisk 1.2.18,
> chan_sccp-20060408 + 2 patches. Perhaps I should have changed the
> protocolversion in sccp.conf, but there is a limit to how much messing
> around you can do in a live office environment.
>  
> Changing to SIP has had some real downsides. Instead of using Cisco
> 9714s, I now have to buy Polycom IP601 phones + sidecars, blind
> transfers seem to result in dead silence, sometimes phones don't seem to
> know when the other end has hung up etc.
>  
> Is there anyone out there still using Asterisk 1.2.x with chan_sccp in a
> typical environment where incoming calls are answered by one or two
> people and then transferred as needed?
>  
> Unless I am mistaken, all development of chan_sccp has been aimed at
> compatability with Asterisk 1.4.x and the forum is now in german which I
> find hard to understand.
>  
> Thank you for all your comments.
>  
> Martin
>  
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


-- 
//
// IT- & Software-Systemhaus, Internet Service und Web Agentur
//
// Sebastian Lehn, Netzwerkadministrator, LPIC-2, MCSA MESSAGING
// PLANET IC GmbH, Haus 4, Hagenower Strasse 73, 19061 Schwerin
// Registergericht Schwerin HRB 6762, Gesch?ftsf?hrer Andreas Scher
// Telefon 0385 30200 200, Telefax 0385 30200 190, Internet www.planet-ic.de
//


From m.robichon at llg.de  Thu Jul  5 12:25:32 2007
From: m.robichon at llg.de (Marcus Robichon)
Date: Thu, 5 Jul 2007 12:25:32 +0200 
Subject: [Chan-sccp-users] I've finally had to give up with chan_sccp
Message-ID: <F3F77C7BD63C8C488186EE2E5BC511064F322D@lhu01.llg.de>

Hi,

we have quite the same as Sebastian. We are using asterisk 1.4 including
patched chan_sccp driver. 30 x Cisco 7960, 5 x 7912 and 5 DECT Kirk phones.
We are using two LANCOM 1724 for bridging ISDN calls to SIP and separating
incoming Faxes. We have two sights where we have trunked the asterisk
servers. Also we are using an asterisk in our DMZ as SIP Proxy.

It is working quite well. Also PARK and PICKUP functions are included. The
only problem we have is the transfer via embedded Key functions. There is a
constalation when someone trys to transfer, but the other partner does not
pickup the phone. The whole asterisk is crashing. Therfore we are using the
asterisk transfer methods and disabled the key for transfer on the phones.

I fully agree, it is a pitty that no development on chan_sccp is done. Also
thet asterisk developers do not push skinny channel driver to the nivaue of
sccp. But .. as I said, it works quite well. 

We are using asterisk now for more then 7 month. We do approx. 3.000
external calls (incoming/outgoing) per month. I don?t count the internal
calls.

Every outgoing call (except Fax) is routed to a SIP provider. This saves
costs monthly approx. 300 ?, due to VOIP flatrates. Also the investment of a
new telephone central like Tenovis, Siemens could be bounded to "only"
18.000 ?. Which is for a standard telephone central for 5 year rental
approx. 50.000 ? in our case. So you save 30.000 ? in investment.

These are nice figures. In this case we are quite happy with this solution
and we haope that we can stay more then 5 years on the system.

Marcus Robichon
 
Lab Logistics Group GmbH

-----Urspr?ngliche Nachricht-----
Von: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] Im Auftrag von Sebastian
Lehn
Gesendet: Donnerstag, 5. Juli 2007 10:28
An: chan-sccp-users at lists.berlios.de
Betreff: Re: [Chan-sccp-users] I've finally had to give up with chan_sccp

Hi Martin,

we are using almost two years Asterisk 1.2.x and chan_sccp-20060408 + 2
patches
with 21 Cisco 7960 + one 7961 phones.

I have build our chan_sccp version with the following create_config.sh
options:

- without PARK functions
- with    PICKUP

Transfer, gpickup, meetme and queues works to 99,8 percent fine. Rarely the
asterisk
crashes. With an workaround-script to restart the asterisk is up again after
20 seconds
with all phones.

Which arch is your asterisk server? We supports different asterisks and have
problems
on x86_64 Systems. On i686 it works fine.


Regards,

Sebastian


Martin Sutherland schrieb:
> Dear list members,
>  
> After a year of struggling for a year in an office with 24 Cisco
> 7940s/chan_sccp-20060408 + 2 patches/Asterisk 1.2.x, I've finally had to
> convert the phones to SIP. I really didn't want to do this but even with
> the latest Asterisk 1.2.x I was getting messages about deadlocks being
> avoided and the whole system ceasing to work until re-boot. The problems
> are always connected with transferring calls.
>  
> I was using P00307020400 firmware on the handsets, Asterisk 1.2.18,
> chan_sccp-20060408 + 2 patches. Perhaps I should have changed the
> protocolversion in sccp.conf, but there is a limit to how much messing
> around you can do in a live office environment.
>  
> Changing to SIP has had some real downsides. Instead of using Cisco
> 9714s, I now have to buy Polycom IP601 phones + sidecars, blind
> transfers seem to result in dead silence, sometimes phones don't seem to
> know when the other end has hung up etc.
>  
> Is there anyone out there still using Asterisk 1.2.x with chan_sccp in a
> typical environment where incoming calls are answered by one or two
> people and then transferred as needed?
>  
> Unless I am mistaken, all development of chan_sccp has been aimed at
> compatability with Asterisk 1.4.x and the forum is now in german which I
> find hard to understand.
>  
> Thank you for all your comments.
>  
> Martin
>  
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


-- 
//
// IT- & Software-Systemhaus, Internet Service und Web Agentur
//
// Sebastian Lehn, Netzwerkadministrator, LPIC-2, MCSA MESSAGING
// PLANET IC GmbH, Haus 4, Hagenower Strasse 73, 19061 Schwerin
// Registergericht Schwerin HRB 6762, Gesch?ftsf?hrer Andreas Scher
// Telefon 0385 30200 200, Telefax 0385 30200 190, Internet www.planet-ic.de
//
_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070705/84a5a682/attachment.html>

From mobile at nhm.it  Thu Jul  5 19:43:02 2007
From: mobile at nhm.it (Federico Santulli)
Date: Thu, 5 Jul 2007 19:43:02 +0200
Subject: [Chan-sccp-users] Asterisk and Deadlocks: maybe a solution.
References: <F3F77C7BD63C8C488186EE2E5BC511064F322D@lhu01.llg.de>
Message-ID: <4745C8F102714B93B04C3E31D483AE6A@london>

AW: [Chan-sccp-users] I've finally had to give up with chan_sccpAll deadlocks issues are caused by sccp_pbx_hangup, sccp_pbx_startchannel routines, and are derived from wrong call transfer callbacks management (for both normal and blind ones).

Working on other channes source, i made a fix that i'm testing to forget all the hangings on the asterisk pbx. 

If anyone would test, i will appreciate.

Please contact me at
mobile at nhm.it

Federico Santulli
Italy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070705/5a3334fb/attachment.html>

From root at nizon.ca  Fri Jul  6 02:54:20 2007
From: root at nizon.ca (Paul)
Date: Thu, 5 Jul 2007 19:54:20 -0500
Subject: [Chan-sccp-users] Asterisk and Deadlocks: maybe a solution.
In-Reply-To: <4745C8F102714B93B04C3E31D483AE6A@london>
Message-ID: <20070706005950.41758F42CE@mail.berlios.de>

I have a 7970 and some 7960s I could test.

 

Let me know

 

-Paul

 

  _____  

From: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of Federico
Santulli
Sent: Thursday, July 05, 2007 12:43 PM
To: chan-sccp-users at lists.berlios.de
Subject: [Chan-sccp-users] Asterisk and Deadlocks: maybe a solution.

 

All deadlocks issues are caused by sccp_pbx_hangup, sccp_pbx_startchannel
routines, and are derived from wrong call transfer callbacks management (for
both normal and blind ones).

Working on other channes source, i made a fix that i'm testing to forget all
the hangings on the asterisk pbx. 

If anyone would test, i will appreciate.

 

Please contact me at

mobile at nhm.it

 

Federico Santulli

Italy

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070705/0f164f3c/attachment.html>

From m.robichon at llg.de  Fri Jul  6 06:57:44 2007
From: m.robichon at llg.de (Marcus Robichon)
Date: Fri, 6 Jul 2007 06:57:44 +0200 
Subject: [Chan-sccp-users] Asterisk and Deadlocks: maybe a solution.
Message-ID: <F3F77C7BD63C8C488186EE2E5BC511064F328E@lhu01.llg.de>

I would also appreciate to test.

 

Marcus Robichon

 

Lab Logistics Group GmbH

  _____  

Von: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] Im Auftrag von Paul
Gesendet: Freitag, 6. Juli 2007 02:54
An: chan-sccp-users at lists.berlios.de
Betreff: Re: [Chan-sccp-users] Asterisk and Deadlocks: maybe a solution.

 

I have a 7970 and some 7960s I could test.

 

Let me know

 

-Paul

 

  _____  

From: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of Federico
Santulli
Sent: Thursday, July 05, 2007 12:43 PM
To: chan-sccp-users at lists.berlios.de
Subject: [Chan-sccp-users] Asterisk and Deadlocks: maybe a solution.

 

All deadlocks issues are caused by sccp_pbx_hangup, sccp_pbx_startchannel
routines, and are derived from wrong call transfer callbacks management (for
both normal and blind ones).

Working on other channes source, i made a fix that i'm testing to forget all
the hangings on the asterisk pbx. 

If anyone would test, i will appreciate.

 

Please contact me at

mobile at nhm.it

 

Federico Santulli

Italy

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070706/ed1426be/attachment.html>

From martin at linkdc.co.uk  Fri Jul  6 10:31:51 2007
From: martin at linkdc.co.uk (Martin Sutherland)
Date: Fri, 6 Jul 2007 09:31:51 +0100
Subject: [Chan-sccp-users] Federico gives us hope
Message-ID: <6761041.1183710711647.JavaMail.root@mail.linkdc.co.uk>

Dear list members,

It is interesting to hear that another member has had problems running Asterisk/chan_sccp on 64 bit. I was using Suse 10.1 on IA64 with Asterisk 1.2.5 for a year and had to create a cron job that checked if the Asterisk process was still running and re-started it every minute. I also added another cron job to re-boot the server every night. Sometimes it would crash three times a day, but the users have managed to cope.

A couple of weeks ago, I setup a new system using CentOS Server 4.5 (i386) with the latest Asterisk 1.2.x and this time I started getting deadlock problems. Using a cron job to re-start didn't seem to work because the Asterisk process continued to be stuck in memory. The users had to re-boot the server manually!

I really wish that I had the skills to check the chan_sccp code, but luckily it looks like Federico has manged to do this. I will certainly test these fixes if he is kind enough to let me and will report back.


Regards,

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070706/782f156d/attachment.html>

From galium123 at hotmail.com  Sun Jul  8 13:16:00 2007
From: galium123 at hotmail.com (Andreas Anderson)
Date: Sun, 08 Jul 2007 11:16:00 +0000
Subject: [Chan-sccp-users] Codec error with current 1.4 branch
Message-ID: <BAY109-F119B9BC9641C9F014369DFE4070@phx.gbl>

Hiya,

with the current 1.4 branch i'm getting an error when dialing out from sccp 
to misdn, right at the moment when inband indication from the telco starts 
(i can hear indication for a splitsecond, then this error):

[Jul  8 13:06:38] WARNING[19053]: sccp_pbx.c:341 sccp_pbx_write: 
SEP000xxxxxxxxxx: Asked to transmit frame type 0, while native formats is 8 
(read/write = 8/8)
[Jul  8 13:06:38] WARNING[19053]: channel.c:2726 ast_prod: Prodding channel 
'SCCP/123-00000001' failed
[Jul  8 13:06:38] WARNING[19053]: app_dial.c:674 wait_for_answer: Unable to 
forward voice frame
[Jul  8 13:06:38] WARNING[19053]: app_dial.c:674 wait_for_answer: Unable to 
forward voice frame
[Jul  8 13:06:38] WARNING[19053]: app_dial.c:674 wait_for_answer: Unable to 
forward voice frame

if i comment out the return -1; at line 343 in scc_pbx.c, it works again, 
but i suspect this is a very bad hack, the codec check has to be there for 
some reason.

Anyone knows how to properly fix this?


Regards,

Andreas

_________________________________________________________________
Live Search delivers results the way you like it. Try live.com now! 
http://www.live.com



From jzuber at drs.ca  Thu Jul 12 20:21:31 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Thu, 12 Jul 2007 14:21:31 -0400
Subject: [Chan-sccp-users] chan_sccp for Asterisk 1.4.6
Message-ID: <03FDC7A639326744925F8EB885247BAF861E6F@THEBRAIN1.drs.ca>

Is there any support for the new Asterisk version?  Certain functions have
changed and require more or less arguments.  If there is no support, will
there be support in the future?



From Marcello.Ceschia at gmx.net  Thu Jul 12 22:14:52 2007
From: Marcello.Ceschia at gmx.net (Ceschia, Marcello)
Date: Thu, 12 Jul 2007 22:14:52 +0200
Subject: [Chan-sccp-users] chan_sccp for Asterisk 1.4.6
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E6F@THEBRAIN1.drs.ca>
References: <03FDC7A639326744925F8EB885247BAF861E6F@THEBRAIN1.drs.ca>
Message-ID: <200707122214.52376.Marcello.Ceschia@gmx.net>

I can have a look on it.
Do you know which functions where changed? So I dont have to search for ;)

 Marcello

Am Donnerstag, 12. Juli 2007 20:21 schrieb Zuber, Jonathan:
> Is there any support for the new Asterisk version?  Certain functions have
> changed and require more or less arguments.  If there is no support, will
> there be support in the future?
>
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From jzuber at drs.ca  Thu Jul 12 22:26:34 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Thu, 12 Jul 2007 16:26:34 -0400
Subject: [Chan-sccp-users] chan_sccp for Asterisk 1.4.6
Message-ID: <03FDC7A639326744925F8EB885247BAF861E70@THEBRAIN1.drs.ca>


There is this one:

in chan_sccp.c
ast_inet_ntoa(iabuf, sizeof(iabuf), GLOB(bindaddr.sin_addr))

which is the same as in older asterisk versions (at least in 1.2.X)

in new Asterisk version:
ast_inet_ntoa(peer->addr.sin_addr)

and others are similar in nature.

I believe there is a change between Asterisk 1.4.4 and 1.4.6, as many people
say the newest chan_sccp driver (20060804) works.



> -----Original Message-----
> From:	Ceschia, Marcello [SMTP:Marcello.Ceschia at gmx.net]
> Sent:	Thursday, July 12, 2007 4:15 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] chan_sccp for Asterisk 1.4.6
> 
> I can have a look on it.
> Do you know which functions where changed? So I dont have to search for ;)
> 
>  Marcello
> 
> Am Donnerstag, 12. Juli 2007 20:21 schrieb Zuber, Jonathan:
> > Is there any support for the new Asterisk version?  Certain functions
> have
> > changed and require more or less arguments.  If there is no support,
> will
> > there be support in the future?
> >
> > _______________________________________________
> > Chan-sccp-users mailing list
> > Chan-sccp-users at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From jzuber at drs.ca  Wed Jul 18 19:10:48 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Wed, 18 Jul 2007 13:10:48 -0400
Subject: [Chan-sccp-users] chan_sccp and 7970
Message-ID: <03FDC7A639326744925F8EB885247BAF861E75@THEBRAIN1.drs.ca>

Hello all,
	
	Not sure if this is a chan_sccp issue or an Asterisk issue, or maybe
just a cisco 7970 issue, but here it is:

	I have been working on this problem for a couple days now, and was
looking for a little help.  I am running a Cisco 7970 IP phone, using SCCP,
and a tftp server running Asterisk 1.4.6.  I have everything compiled, a new
chan_sccp (the patched one that works with Asterisk 1.4.4+), and my phones
connect properly to Asterisk, speedials pop up and everything.  The
speeddials even work! They will dial the extensions I programmed into them
no problem.  However, when I try to just do a regular dial, a "dial" screen
pops up, shows me the digits I dialed, then does nothing. This screen has 3
softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.  The cancel
and << work just fine, but the Dial softbutton does nothing.  I am
monitoring asterisk on full debug, and I see no indication that it is
receiving the digits from the phone.

	Any help is much appreciated, and thanks in advance.

Jonathan Zuber


From Marcello.Ceschia at gmx.net  Wed Jul 18 20:33:57 2007
From: Marcello.Ceschia at gmx.net (Ceschia, Marcello)
Date: Wed, 18 Jul 2007 20:33:57 +0200
Subject: [Chan-sccp-users] chan_sccp and 7970
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E75@THEBRAIN1.drs.ca>
References: <03FDC7A639326744925F8EB885247BAF861E75@THEBRAIN1.drs.ca>
Message-ID: <200707182033.59094.Marcello.Ceschia@gmx.net>

Hello Jonathan,

after reading your email, I tried to rebuild the problem.
I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for asterisk 
1.4.7. I have no problem using the dial-button.
Do you have some logs on console (set verbose 4)?

 Marcello

Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
> Hello all,
>
> 	Not sure if this is a chan_sccp issue or an Asterisk issue, or maybe
> just a cisco 7970 issue, but here it is:
>
> 	I have been working on this problem for a couple days now, and was
> looking for a little help.  I am running a Cisco 7970 IP phone, using SCCP,
> and a tftp server running Asterisk 1.4.6.  I have everything compiled, a
> new chan_sccp (the patched one that works with Asterisk 1.4.4+), and my
> phones connect properly to Asterisk, speedials pop up and everything.  The
> speeddials even work! They will dial the extensions I programmed into them
> no problem.  However, when I try to just do a regular dial, a "dial" screen
> pops up, shows me the digits I dialed, then does nothing. This screen has 3
> softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.  The
> cancel and << work just fine, but the Dial softbutton does nothing.  I am
> monitoring asterisk on full debug, and I see no indication that it is
> receiving the digits from the phone.
>
> 	Any help is much appreciated, and thanks in advance.
>
> Jonathan Zuber
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From hakan at nets.at  Wed Jul 18 20:35:26 2007
From: hakan at nets.at (Hakan Evirgen)
Date: Wed, 18 Jul 2007 20:35:26 +0200
Subject: [Chan-sccp-users] chan_sccp and 7970
In-Reply-To: <200707182033.59094.Marcello.Ceschia@gmx.net>
References: <03FDC7A639326744925F8EB885247BAF861E75@THEBRAIN1.drs.ca>
	<200707182033.59094.Marcello.Ceschia@gmx.net>
Message-ID: <02f801c7c96a$6a247900$3e6d6b00$@at>

Hi Jonathan,

maybe there is a malfunction in your phone. Did you make an update of its
firmware?

Regards,
Hakan

>-----Original Message-----
>From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-
>bounces at lists.berlios.de] On Behalf Of Ceschia, Marcello
>Sent: Wednesday, July 18, 2007 8:34 PM
>To: chan-sccp-users at lists.berlios.de
>Subject: Re: [Chan-sccp-users] chan_sccp and 7970
>
>Hello Jonathan,
>
>after reading your email, I tried to rebuild the problem.
>I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
>asterisk
>1.4.7. I have no problem using the dial-button.
>Do you have some logs on console (set verbose 4)?
>
> Marcello
>
>Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
>> Hello all,
>>
>> 	Not sure if this is a chan_sccp issue or an Asterisk issue, or maybe
>> just a cisco 7970 issue, but here it is:
>>
>> 	I have been working on this problem for a couple days now, and was
>> looking for a little help.  I am running a Cisco 7970 IP phone, using
>SCCP,
>> and a tftp server running Asterisk 1.4.6.  I have everything compiled,
>a
>> new chan_sccp (the patched one that works with Asterisk 1.4.4+), and my
>> phones connect properly to Asterisk, speedials pop up and everything.
>The
>> speeddials even work! They will dial the extensions I programmed into
>them
>> no problem.  However, when I try to just do a regular dial, a "dial"
>screen
>> pops up, shows me the digits I dialed, then does nothing. This screen
>has 3
>> softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.  The
>> cancel and << work just fine, but the Dial softbutton does nothing.  I
>am
>> monitoring asterisk on full debug, and I see no indication that it is
>> receiving the digits from the phone.
>>
>> 	Any help is much appreciated, and thanks in advance.
>>
>> Jonathan Zuber
>> _______________________________________________
>> Chan-sccp-users mailing list
>> Chan-sccp-users at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>_______________________________________________
>Chan-sccp-users mailing list
>Chan-sccp-users at lists.berlios.de
>https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From root at nizon.ca  Wed Jul 18 21:15:46 2007
From: root at nizon.ca (Paul)
Date: Wed, 18 Jul 2007 14:15:46 -0500
Subject: [Chan-sccp-users] chan_sccp and 7970
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E75@THEBRAIN1.drs.ca>
Message-ID: <20070718191432.2BB3BE1A45@mail.berlios.de>

Do you have the context for the line you're trying to dial out on set
properly?


-----Original Message-----
From: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of Zuber,
Jonathan
Sent: Wednesday, July 18, 2007 12:11 PM
To: 'chan-sccp-users at lists.berlios.de'
Subject: [Chan-sccp-users] chan_sccp and 7970

Hello all,
	
	Not sure if this is a chan_sccp issue or an Asterisk issue, or maybe
just a cisco 7970 issue, but here it is:

	I have been working on this problem for a couple days now, and was
looking for a little help.  I am running a Cisco 7970 IP phone, using SCCP,
and a tftp server running Asterisk 1.4.6.  I have everything compiled, a new
chan_sccp (the patched one that works with Asterisk 1.4.4+), and my phones
connect properly to Asterisk, speedials pop up and everything.  The
speeddials even work! They will dial the extensions I programmed into them
no problem.  However, when I try to just do a regular dial, a "dial" screen
pops up, shows me the digits I dialed, then does nothing. This screen has 3
softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.  The cancel
and << work just fine, but the Dial softbutton does nothing.  I am
monitoring asterisk on full debug, and I see no indication that it is
receiving the digits from the phone.

	Any help is much appreciated, and thanks in advance.

Jonathan Zuber
_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From jzuber at drs.ca  Wed Jul 18 21:19:53 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Wed, 18 Jul 2007 15:19:53 -0400
Subject: [Chan-sccp-users] chan_sccp and 7970
Message-ID: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>

I have it on full debug - asterisk is not seeing the digits I am pressing at
all, however it sees the speedial digits (if i wait for the dialtone timeout
and then press speeddial it sends those digits, and asterisk catches them).
I set debug level in my sccp.conf to 10 and I run asterisk using the
-vvvvvvvvvvgc command in console.

> -----Original Message-----
> From:	Ceschia, Marcello [SMTP:Marcello.Ceschia at gmx.net]
> Sent:	Wednesday, July 18, 2007 2:34 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
> 
> Hello Jonathan,
> 
> after reading your email, I tried to rebuild the problem.
> I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
> asterisk 
> 1.4.7. I have no problem using the dial-button.
> Do you have some logs on console (set verbose 4)?
> 
>  Marcello
> 
> Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
> > Hello all,
> >
> > 	Not sure if this is a chan_sccp issue or an Asterisk issue, or maybe
> > just a cisco 7970 issue, but here it is:
> >
> > 	I have been working on this problem for a couple days now, and was
> > looking for a little help.  I am running a Cisco 7970 IP phone, using
> SCCP,
> > and a tftp server running Asterisk 1.4.6.  I have everything compiled, a
> > new chan_sccp (the patched one that works with Asterisk 1.4.4+), and my
> > phones connect properly to Asterisk, speedials pop up and everything.
> The
> > speeddials even work! They will dial the extensions I programmed into
> them
> > no problem.  However, when I try to just do a regular dial, a "dial"
> screen
> > pops up, shows me the digits I dialed, then does nothing. This screen
> has 3
> > softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.  The
> > cancel and << work just fine, but the Dial softbutton does nothing.  I
> am
> > monitoring asterisk on full debug, and I see no indication that it is
> > receiving the digits from the phone.
> >
> > 	Any help is much appreciated, and thanks in advance.
> >
> > Jonathan Zuber
> > _______________________________________________
> > Chan-sccp-users mailing list
> > Chan-sccp-users at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From jzuber at drs.ca  Wed Jul 18 21:23:45 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Wed, 18 Jul 2007 15:23:45 -0400
Subject: [Chan-sccp-users] chan_sccp and 7970
Message-ID: <03FDC7A639326744925F8EB885247BAF861E77@THEBRAIN1.drs.ca>

unless you set the line context up in a way that I am unsure of..... for
sccp.conf I have my [General] and all my [line] contexts set to [default]
and in exteensions.conf I have a [default] which handles those lines.   I
believe that is the correct way to set it up.  I could be worn though!

> -----Original Message-----
> From:	Paul [SMTP:root at nizon.ca]
> Sent:	Wednesday, July 18, 2007 3:16 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
> 
> Do you have the context for the line you're trying to dial out on set
> properly?
> 
> 
> -----Original Message-----
> From: chan-sccp-users-bounces at lists.berlios.de
> [mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of Zuber,
> Jonathan
> Sent: Wednesday, July 18, 2007 12:11 PM
> To: 'chan-sccp-users at lists.berlios.de'
> Subject: [Chan-sccp-users] chan_sccp and 7970
> 
> Hello all,
> 	
> 	Not sure if this is a chan_sccp issue or an Asterisk issue, or maybe
> just a cisco 7970 issue, but here it is:
> 
> 	I have been working on this problem for a couple days now, and was
> looking for a little help.  I am running a Cisco 7970 IP phone, using
> SCCP,
> and a tftp server running Asterisk 1.4.6.  I have everything compiled, a
> new
> chan_sccp (the patched one that works with Asterisk 1.4.4+), and my phones
> connect properly to Asterisk, speedials pop up and everything.  The
> speeddials even work! They will dial the extensions I programmed into them
> no problem.  However, when I try to just do a regular dial, a "dial"
> screen
> pops up, shows me the digits I dialed, then does nothing. This screen has
> 3
> softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.  The
> cancel
> and << work just fine, but the Dial softbutton does nothing.  I am
> monitoring asterisk on full debug, and I see no indication that it is
> receiving the digits from the phone.
> 
> 	Any help is much appreciated, and thanks in advance.
> 
> Jonathan Zuber
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> 
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From mobile at nhm.it  Wed Jul 18 21:25:12 2007
From: mobile at nhm.it (Federico Santulli)
Date: Wed, 18 Jul 2007 21:25:12 +0200
Subject: [Chan-sccp-users] R:  chan_sccp and 7970
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
Message-ID: <001301c7c971$5d3f85c0$17be9140$@it>

Try to use the command "sccp debug" from asterisk console to see what is
happening on channel ;)

Let us know.




-----Messaggio originale-----
Da: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] Per conto di Zuber,
Jonathan
Inviato: mercoled? 18 luglio 2007 21.20
A: 'chan-sccp-users at lists.berlios.de'; 'Marcello.Ceschia at gmx.net'
Oggetto: Re: [Chan-sccp-users] chan_sccp and 7970

I have it on full debug - asterisk is not seeing the digits I am pressing at
all, however it sees the speedial digits (if i wait for the dialtone timeout
and then press speeddial it sends those digits, and asterisk catches them).
I set debug level in my sccp.conf to 10 and I run asterisk using the
-vvvvvvvvvvgc command in console.

> -----Original Message-----
> From:	Ceschia, Marcello [SMTP:Marcello.Ceschia at gmx.net]
> Sent:	Wednesday, July 18, 2007 2:34 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
> 
> Hello Jonathan,
> 
> after reading your email, I tried to rebuild the problem.
> I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
> asterisk 
> 1.4.7. I have no problem using the dial-button.
> Do you have some logs on console (set verbose 4)?
> 
>  Marcello
> 
> Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
> > Hello all,
> >
> > 	Not sure if this is a chan_sccp issue or an Asterisk issue, or maybe
> > just a cisco 7970 issue, but here it is:
> >
> > 	I have been working on this problem for a couple days now, and was
> > looking for a little help.  I am running a Cisco 7970 IP phone, using
> SCCP,
> > and a tftp server running Asterisk 1.4.6.  I have everything compiled, a
> > new chan_sccp (the patched one that works with Asterisk 1.4.4+), and my
> > phones connect properly to Asterisk, speedials pop up and everything.
> The
> > speeddials even work! They will dial the extensions I programmed into
> them
> > no problem.  However, when I try to just do a regular dial, a "dial"
> screen
> > pops up, shows me the digits I dialed, then does nothing. This screen
> has 3
> > softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.  The
> > cancel and << work just fine, but the Dial softbutton does nothing.  I
> am
> > monitoring asterisk on full debug, and I see no indication that it is
> > receiving the digits from the phone.
> >
> > 	Any help is much appreciated, and thanks in advance.
> >
> > Jonathan Zuber
> > _______________________________________________
> > Chan-sccp-users mailing list
> > Chan-sccp-users at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From mobile at nhm.it  Wed Jul 18 21:28:22 2007
From: mobile at nhm.it (Federico Santulli)
Date: Wed, 18 Jul 2007 21:28:22 +0200
Subject: [Chan-sccp-users] CHAN FIXES
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
Message-ID: <001601c7c971$ce91d660$6bb58320$@it>

I sent an email to this list last week but i think it was lost for some
reasons I can't understand.

I would like to catch fixes all of you made and make a public stable and new
release
of chan_sccp for 1.4.4+ and 1.2+ versions.

Would anyone help ?

I already made a lot of lockdown fixes so, I'm searching for other solutions
and test.



From jzuber at drs.ca  Wed Jul 18 21:47:11 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Wed, 18 Jul 2007 15:47:11 -0400
Subject: [Chan-sccp-users] chan_sccp and 7970
Message-ID: <03FDC7A639326744925F8EB885247BAF861E79@THEBRAIN1.drs.ca>

I did not make a firmware update -> currently on phone I have 
Load File -> TERM70.DEFAULT
App Load ID -> Jar70.2-9-1-45.sbn
JVM Load ID -> CVM70.2-0-1-45.sbn
OS Load ID -> cnu70.2-7-5-50.sbn
Boot Load ID 7970_020706.bin

In my tftpboot I have my separate SEP<mac>.cnf.xml files

> -----Original Message-----
> From:	Hakan Evirgen [SMTP:hakan at nets.at]
> Sent:	Wednesday, July 18, 2007 2:35 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
> 
> Hi Jonathan,
> 
> maybe there is a malfunction in your phone. Did you make an update of its
> firmware?
> 
> Regards,
> Hakan
> 
> >-----Original Message-----
> >From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-
> >bounces at lists.berlios.de] On Behalf Of Ceschia, Marcello
> >Sent: Wednesday, July 18, 2007 8:34 PM
> >To: chan-sccp-users at lists.berlios.de
> >Subject: Re: [Chan-sccp-users] chan_sccp and 7970
> >
> >Hello Jonathan,
> >
> >after reading your email, I tried to rebuild the problem.
> >I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
> >asterisk
> >1.4.7. I have no problem using the dial-button.
> >Do you have some logs on console (set verbose 4)?
> >
> > Marcello
> >
> >Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
> >> Hello all,
> >>
> >> 	Not sure if this is a chan_sccp issue or an Asterisk issue, or maybe
> >> just a cisco 7970 issue, but here it is:
> >>
> >> 	I have been working on this problem for a couple days now, and was
> >> looking for a little help.  I am running a Cisco 7970 IP phone, using
> >SCCP,
> >> and a tftp server running Asterisk 1.4.6.  I have everything compiled,
> >a
> >> new chan_sccp (the patched one that works with Asterisk 1.4.4+), and my
> >> phones connect properly to Asterisk, speedials pop up and everything.
> >The
> >> speeddials even work! They will dial the extensions I programmed into
> >them
> >> no problem.  However, when I try to just do a regular dial, a "dial"
> >screen
> >> pops up, shows me the digits I dialed, then does nothing. This screen
> >has 3
> >> softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.  The
> >> cancel and << work just fine, but the Dial softbutton does nothing.  I
> >am
> >> monitoring asterisk on full debug, and I see no indication that it is
> >> receiving the digits from the phone.
> >>
> >> 	Any help is much appreciated, and thanks in advance.
> >>
> >> Jonathan Zuber
> >> _______________________________________________
> >> Chan-sccp-users mailing list
> >> Chan-sccp-users at lists.berlios.de
> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> >_______________________________________________
> >Chan-sccp-users mailing list
> >Chan-sccp-users at lists.berlios.de
> >https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> 
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From Marcello.Ceschia at gmx.net  Wed Jul 18 23:43:38 2007
From: Marcello.Ceschia at gmx.net (Ceschia, Marcello)
Date: Wed, 18 Jul 2007 23:43:38 +0200
Subject: [Chan-sccp-users] CHAN FIXES
In-Reply-To: <001601c7c971$ce91d660$6bb58320$@it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
	<001601c7c971$ce91d660$6bb58320$@it>
Message-ID: <200707182343.38782.Marcello.Ceschia@gmx.net>

@all,

I did a version for asterisk 1.4.7+
http://sccp.smilekom.de/2007-07-12_chan_sccp-Version1.4.7.tar.gz 
Please report bug on mailinglist - I will try to fix it.

 Marcello

Am Mittwoch, 18. Juli 2007 21:28 schrieb Federico Santulli:
> I sent an email to this list last week but i think it was lost for some
> reasons I can't understand.
>
> I would like to catch fixes all of you made and make a public stable and
> new release
> of chan_sccp for 1.4.4+ and 1.2+ versions.
>
> Would anyone help ?
>
> I already made a lot of lockdown fixes so, I'm searching for other
> solutions and test.
>
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From mobile at nhm.it  Thu Jul 19 00:33:33 2007
From: mobile at nhm.it (Federico Santulli)
Date: Thu, 19 Jul 2007 00:33:33 +0200
Subject: [Chan-sccp-users] R:  CHAN FIXES
In-Reply-To: <200707182343.38782.Marcello.Ceschia@gmx.net>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
	<001601c7c971$ce91d660$6bb58320$@it>
	<200707182343.38782.Marcello.Ceschia@gmx.net>
Message-ID: <000001c7c98b$ace20840$06a618c0$@it>

Dear Marcello, 

can you specify all the fixes you applyied on that source ?

Thanks in advance

Federico

-----Messaggio originale-----
Da: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] Per conto di Ceschia,
Marcello
Inviato: mercoled? 18 luglio 2007 23.44
A: chan-sccp-users at lists.berlios.de
Oggetto: Re: [Chan-sccp-users] CHAN FIXES

@all,

I did a version for asterisk 1.4.7+
http://sccp.smilekom.de/2007-07-12_chan_sccp-Version1.4.7.tar.gz 
Please report bug on mailinglist - I will try to fix it.

 Marcello

Am Mittwoch, 18. Juli 2007 21:28 schrieb Federico Santulli:
> I sent an email to this list last week but i think it was lost for some
> reasons I can't understand.
>
> I would like to catch fixes all of you made and make a public stable and
> new release
> of chan_sccp for 1.4.4+ and 1.2+ versions.
>
> Would anyone help ?
>
> I already made a lot of lockdown fixes so, I'm searching for other
> solutions and test.
>
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From martin at linkdc.co.uk  Thu Jul 19 13:18:07 2007
From: martin at linkdc.co.uk (Martin Sutherland)
Date: Thu, 19 Jul 2007 12:18:07 +0100
Subject: [Chan-sccp-users] Getting it together with chan_sccp
Message-ID: <14739481.1184843887936.JavaMail.root@mail.linkdc.co.uk>

Dear list members,

I've been emailed a version of chan_sccp-20070620 from dmitry at makuha.kiev.ua which has changes in several files. I'm about to start testing with 32 handsets (18x7640, 12x7960,2x7961), 11 E1 lines, paging, parking etc with Asterisk 1.2.x.

Regards,

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070719/59b560b5/attachment.html>

From martin at linkdc.co.uk  Thu Jul 19 13:44:52 2007
From: martin at linkdc.co.uk (Martin Sutherland)
Date: Thu, 19 Jul 2007 12:44:52 +0100
Subject: [Chan-sccp-users] Improving the BLF function on 7914/7961
Message-ID: <7270994.1184845492292.JavaMail.root@mail.linkdc.co.uk>

Dear list members,

I would like to improve the BLF function in chan_sccp. At the moment, the use of the lights is very basic.

For example:

If a key is defined as a directory number, then

No light - phone not plugged in or has DND or agent not logged in
Green light - available to take a call, not on DND, agent logged in
Flashing green - ringing
Amber - in use but not private
Amber flashing - in use but call placed on hold
Red - in use but private
Red flashing - in use but call placed on hold

If a key is defined as a line then - not sure

What would also be nice is to allow the operator to send an incoming call direct to the recipients voicemail eg. I'm sorry xxxx is on the phone/holiday/ill, would you like to leave a message on his/hers voicemail? This no doubt requires some Asterisk handling too.


Regards,

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070719/07c9c800/attachment.html>

From Marcello.Ceschia at gmx.net  Thu Jul 19 14:44:42 2007
From: Marcello.Ceschia at gmx.net (Marcello Ceschia)
Date: Thu, 19 Jul 2007 14:44:42 +0200
Subject: [Chan-sccp-users] Improving the BLF function on 7914/7961
In-Reply-To: <7270994.1184845492292.JavaMail.root@mail.linkdc.co.uk>
References: <7270994.1184845492292.JavaMail.root@mail.linkdc.co.uk>
Message-ID: <001501c7ca02$9b1f65e0$d15e31a0$@Ceschia@gmx.net>

I started implementing a version which can tranfer calls without answering
the call.

Unfortunately the version have some bugs and within the last 2 month I had
no time to continuing the project.

 

Would be great if we can restart the chan_sccp-project.

 

 Marcello

 

Von: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] Im Auftrag von Martin
Sutherland
Gesendet: Donnerstag, 19. Juli 2007 13:45
An: chan-sccp-users at lists.berlios.de
Betreff: [Chan-sccp-users] Improving the BLF function on 7914/7961

 

Dear list members,

I would like to improve the BLF function in chan_sccp. At the moment, the
use of the lights is very basic.

For example:

If a key is defined as a directory number, then

No light - phone not plugged in or has DND or agent not logged in
Green light - available to take a call, not on DND, agent logged in
Flashing green - ringing
Amber - in use but not private
Amber flashing - in use but call placed on hold
Red - in use but private
Red flashing - in use but call placed on hold

If a key is defined as a line then - not sure

What would also be nice is to allow the operator to send an incoming call
direct to the recipients voicemail eg. I'm sorry xxxx is on the
phone/holiday/ill, would you like to leave a message on his/hers voicemail?
This no doubt requires some Asterisk handling too.


Regards,

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070719/bc9baffe/attachment.html>

From root at nizon.ca  Thu Jul 19 19:35:56 2007
From: root at nizon.ca (Paul)
Date: Thu, 19 Jul 2007 12:35:56 -0500
Subject: [Chan-sccp-users] Getting it together with chan_sccp
In-Reply-To: <14739481.1184843887936.JavaMail.root@mail.linkdc.co.uk>
Message-ID: <20070719173455.2AF1E68C48@mail.berlios.de>

If you don't mind posting it somewhere I'd like to give it a go as well.

I have 1x7970 and 3x7960s.

Thanks

  _____  

From: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of Martin
Sutherland
Sent: Thursday, July 19, 2007 6:18 AM
To: chan-sccp-users at lists.berlios.de
Subject: [Chan-sccp-users] Getting it together with chan_sccp

 

Dear list members,

I've been emailed a version of chan_sccp-20070620 from dmitry at makuha.kiev.ua
which has changes in several files. I'm about to start testing with 32
handsets (18x7640, 12x7960,2x7961), 11 E1 lines, paging, parking etc with
Asterisk 1.2.x.

Regards,

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070719/e0e95c83/attachment.html>

From jzuber at drs.ca  Thu Jul 19 20:34:15 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Thu, 19 Jul 2007 14:34:15 -0400
Subject: [Chan-sccp-users] R:  chan_sccp and 7970
Message-ID: <03FDC7A639326744925F8EB885247BAF861E7B@THEBRAIN1.drs.ca>

I get here, when I pick up the receiver, and I hear a  dial tone:

    -- SEP0019563DD448: >> Got message OffHookMessage
    -- SEP0019563DD448: Getting the active channel on device
    -- SEP0019563DD448: Taken Offhook
    -- SEP0019563DD448: The active line is 2002
    -- SEP0019563DD448: Using line 2002
    -- SEP0019563DD448: Getting the active channel on device
    -- SEP0019563DD448: New channel number: 4 on line 2002
    -- SEP0019563DD448: Set the active channel 4 on device
    -- SEP0019563DD448: Indicate SCCP state (OffHook) on call 2002-4
    -- SEP0019563DD448: Clear the display notify message
    -- SEP0019563DD448: Clear the status prompt on line 0 and callid 0
    -- SEP0019563DD448: Send speaker mode 1
    -- SEP0019563DD448: Send lamp mode LampOn(2) on line 1
    -- SEP0019563DD448: Send and Set the call state OffHook(1) on call 4
    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
    -- SEP0019563DD448: Send softkeyset to OffHook(4) on line 1  and call 4
    -- SEP0019563DD448: Send activate call plane on line 1
    -- SEP0019563DD448: Sending tone InsideDialTone (33)
    -- SEP0019563DD448: Finish to indicate state SCCP (OffHook), SKINNY
(OffHook) on call 2002-4
    -- SEP0019563DD448: Global Capabilities: 4
    -- SEP0019563DD448: format request: 268/4
    -- SEP0019563DD448: Channel SCCP/2002-00000004, capabilities: DEVICE
0x10c (ulaw|alaw|g729) NATIVE 0x10c (ulaw|alaw|g729) BEST 4 (ulaw)
    -- SEP0019563DD448: Allocated asterisk channel 2002-4
    -- SCCP: Looking for line 2002
    -- SEP0019563DD448: found line 2002
    -- SCCP: Asterisk asked for the state (2) of the line 2002
    -- SEP0019563DD448: Set asterisk state OffHook (2) for call 4
    -- GOT data SCCP/2002-00000004 (0x101aa5f0)
    -- GOT line 2002
    -- GOT device SEP0019563DD448
    -- SEP0019563DD448: New call on line 2002
    -- SEP0019563DD448: Set callingParty Name "7970 2002" on channel 4
    -- SEP0019563DD448: Set callingParty Number 2002 on channel 4
    -- SEP0019563DD448: Waiting for the number to dial on channel 2002-4

And then the phone cuts out (times out), even though I have typed my
extension to dial, and have tried pressing the "dial" button, or setting my
sccp.conf to force dial on # and pressing #, still no dice!  (note here, I
went into chan_sccp.c and found this just before a do loop, I put in an
output of the ("testing : %s", c->dialnumber) or something along those lines
and it printed to the screen many times, but the dialnumber is always
blank).

When the phone cuts out I get this:

- SEP0019563DD448: Indicate SCCP state (Dialing) on call 2002-4
    -- SEP0019563DD448: Stop tone on device
    -- SEP0019563DD448: Send softkeyset to DigitsFoll(6) on line 1  and call
4
    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
    -- SCCP: Looking for line 2002
    -- SEP0019563DD448: found line 2002
    -- SCCP: Asterisk asked for the state (2) of the line 2002
    -- SEP0019563DD448: Set asterisk state Dialing (3) for call 4
    -- SEP0019563DD448: Finish to indicate state SCCP (Dialing), SKINNY
(OffHook) on call 2002-4
    -- SEP0019563DD448: Send and Set the call state Proceed(12) on call 4
    -- SEP0019563DD448: Send callinfo for Outbound channel 4
    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
    -- SEP0019563DD448: Indicate SCCP state (InvalidNumber) on call 2002-4
    -- SEP0019563DD448: Sending tone ReorderTone (37)
    -- SEP0019563DD448: Send and Set the call state InvalidNumber(14) on
call 4
    -- SEP0019563DD448: Send callinfo for Outbound channel 4
    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
    -- SEP0019563DD448: Finish to indicate state SCCP (InvalidNumber),
SKINNY (InvalidNumber) on call 2002-4
    -- SEP0019563DD448: return from the startchannel on exit

Until I hang up.



> -----Original Message-----
> From:	Federico Santulli [SMTP:mobile at nhm.it]
> Sent:	Wednesday, July 18, 2007 3:25 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	[Chan-sccp-users] R:  chan_sccp and 7970
> 
> Try to use the command "sccp debug" from asterisk console to see what is
> happening on channel ;)
> 
> Let us know.
> 
> 
> 
> 
> -----Messaggio originale-----
> Da: chan-sccp-users-bounces at lists.berlios.de
> [mailto:chan-sccp-users-bounces at lists.berlios.de] Per conto di Zuber,
> Jonathan
> Inviato: mercoled? 18 luglio 2007 21.20
> A: 'chan-sccp-users at lists.berlios.de'; 'Marcello.Ceschia at gmx.net'
> Oggetto: Re: [Chan-sccp-users] chan_sccp and 7970
> 
> I have it on full debug - asterisk is not seeing the digits I am pressing
> at
> all, however it sees the speedial digits (if i wait for the dialtone
> timeout
> and then press speeddial it sends those digits, and asterisk catches
> them).
> I set debug level in my sccp.conf to 10 and I run asterisk using the
> -vvvvvvvvvvgc command in console.
> 
> > -----Original Message-----
> > From:	Ceschia, Marcello [SMTP:Marcello.Ceschia at gmx.net]
> > Sent:	Wednesday, July 18, 2007 2:34 PM
> > To:	chan-sccp-users at lists.berlios.de
> > Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
> > 
> > Hello Jonathan,
> > 
> > after reading your email, I tried to rebuild the problem.
> > I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
> > asterisk 
> > 1.4.7. I have no problem using the dial-button.
> > Do you have some logs on console (set verbose 4)?
> > 
> >  Marcello
> > 
> > Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
> > > Hello all,
> > >
> > > 	Not sure if this is a chan_sccp issue or an Asterisk issue, or maybe
> > > just a cisco 7970 issue, but here it is:
> > >
> > > 	I have been working on this problem for a couple days now, and was
> > > looking for a little help.  I am running a Cisco 7970 IP phone, using
> > SCCP,
> > > and a tftp server running Asterisk 1.4.6.  I have everything compiled,
> a
> > > new chan_sccp (the patched one that works with Asterisk 1.4.4+), and
> my
> > > phones connect properly to Asterisk, speedials pop up and everything.
> > The
> > > speeddials even work! They will dial the extensions I programmed into
> > them
> > > no problem.  However, when I try to just do a regular dial, a "dial"
> > screen
> > > pops up, shows me the digits I dialed, then does nothing. This screen
> > has 3
> > > softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.  The
> > > cancel and << work just fine, but the Dial softbutton does nothing.  I
> > am
> > > monitoring asterisk on full debug, and I see no indication that it is
> > > receiving the digits from the phone.
> > >
> > > 	Any help is much appreciated, and thanks in advance.
> > >
> > > Jonathan Zuber
> > > _______________________________________________
> > > Chan-sccp-users mailing list
> > > Chan-sccp-users at lists.berlios.de
> > > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > _______________________________________________
> > Chan-sccp-users mailing list
> > Chan-sccp-users at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> 
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From hakan at nets.at  Thu Jul 19 20:36:46 2007
From: hakan at nets.at (Hakan Evirgen)
Date: Thu, 19 Jul 2007 20:36:46 +0200
Subject: [Chan-sccp-users] chan_sccp and 7970
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E79@THEBRAIN1.drs.ca>
References: <03FDC7A639326744925F8EB885247BAF861E79@THEBRAIN1.drs.ca>
Message-ID: <014001c7ca33$c42a7c50$4c7f74f0$@at>

Get the newest firmware and make an update. My phone had strange behaviour,
which stopped after the update.


>-----Original Message-----
>From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-
>bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
>Sent: Wednesday, July 18, 2007 9:47 PM
>To: 'chan-sccp-users at lists.berlios.de'
>Subject: Re: [Chan-sccp-users] chan_sccp and 7970
>
>I did not make a firmware update -> currently on phone I have
>Load File -> TERM70.DEFAULT
>App Load ID -> Jar70.2-9-1-45.sbn
>JVM Load ID -> CVM70.2-0-1-45.sbn
>OS Load ID -> cnu70.2-7-5-50.sbn
>Boot Load ID 7970_020706.bin
>
>In my tftpboot I have my separate SEP<mac>.cnf.xml files
>
>> -----Original Message-----
>> From:	Hakan Evirgen [SMTP:hakan at nets.at]
>> Sent:	Wednesday, July 18, 2007 2:35 PM
>> To:	chan-sccp-users at lists.berlios.de
>> Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
>>
>> Hi Jonathan,
>>
>> maybe there is a malfunction in your phone. Did you make an update of
>its
>> firmware?
>>
>> Regards,
>> Hakan
>>
>> >-----Original Message-----
>> >From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-
>users-
>> >bounces at lists.berlios.de] On Behalf Of Ceschia, Marcello
>> >Sent: Wednesday, July 18, 2007 8:34 PM
>> >To: chan-sccp-users at lists.berlios.de
>> >Subject: Re: [Chan-sccp-users] chan_sccp and 7970
>> >
>> >Hello Jonathan,
>> >
>> >after reading your email, I tried to rebuild the problem.
>> >I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
>> >asterisk
>> >1.4.7. I have no problem using the dial-button.
>> >Do you have some logs on console (set verbose 4)?
>> >
>> > Marcello
>> >
>> >Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
>> >> Hello all,
>> >>
>> >> 	Not sure if this is a chan_sccp issue or an Asterisk issue, or maybe
>> >> just a cisco 7970 issue, but here it is:
>> >>
>> >> 	I have been working on this problem for a couple days now, and was
>> >> looking for a little help.  I am running a Cisco 7970 IP phone,
>using
>> >SCCP,
>> >> and a tftp server running Asterisk 1.4.6.  I have everything
>compiled,
>> >a
>> >> new chan_sccp (the patched one that works with Asterisk 1.4.4+), and
>my
>> >> phones connect properly to Asterisk, speedials pop up and
>everything.
>> >The
>> >> speeddials even work! They will dial the extensions I programmed
>into
>> >them
>> >> no problem.  However, when I try to just do a regular dial, a "dial"
>> >screen
>> >> pops up, shows me the digits I dialed, then does nothing. This
>screen
>> >has 3
>> >> softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.
>The
>> >> cancel and << work just fine, but the Dial softbutton does nothing.
>I
>> >am
>> >> monitoring asterisk on full debug, and I see no indication that it
>is
>> >> receiving the digits from the phone.
>> >>
>> >> 	Any help is much appreciated, and thanks in advance.
>> >>
>> >> Jonathan Zuber
>> >> _______________________________________________
>> >> Chan-sccp-users mailing list
>> >> Chan-sccp-users at lists.berlios.de
>> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>> >_______________________________________________
>> >Chan-sccp-users mailing list
>> >Chan-sccp-users at lists.berlios.de
>> >https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>>
>> _______________________________________________
>> Chan-sccp-users mailing list
>> Chan-sccp-users at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>_______________________________________________
>Chan-sccp-users mailing list
>Chan-sccp-users at lists.berlios.de
>https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From hakan at nets.at  Thu Jul 19 20:37:29 2007
From: hakan at nets.at (Hakan Evirgen)
Date: Thu, 19 Jul 2007 20:37:29 +0200
Subject: [Chan-sccp-users] R:  chan_sccp and 7970
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E7B@THEBRAIN1.drs.ca>
References: <03FDC7A639326744925F8EB885247BAF861E7B@THEBRAIN1.drs.ca>
Message-ID: <014801c7ca33$de065bd0$9a131370$@at>

Seems so that your phone is NOT sending any digit.

Do you have the possibility to test another phone?

Best regards,
Hakan Evirgen


>-----Original Message-----
>From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-
>bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
>Sent: Thursday, July 19, 2007 8:34 PM
>To: 'chan-sccp-users at lists.berlios.de'
>Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
>
>I get here, when I pick up the receiver, and I hear a  dial tone:
>
>    -- SEP0019563DD448: >> Got message OffHookMessage
>    -- SEP0019563DD448: Getting the active channel on device
>    -- SEP0019563DD448: Taken Offhook
>    -- SEP0019563DD448: The active line is 2002
>    -- SEP0019563DD448: Using line 2002
>    -- SEP0019563DD448: Getting the active channel on device
>    -- SEP0019563DD448: New channel number: 4 on line 2002
>    -- SEP0019563DD448: Set the active channel 4 on device
>    -- SEP0019563DD448: Indicate SCCP state (OffHook) on call 2002-4
>    -- SEP0019563DD448: Clear the display notify message
>    -- SEP0019563DD448: Clear the status prompt on line 0 and callid 0
>    -- SEP0019563DD448: Send speaker mode 1
>    -- SEP0019563DD448: Send lamp mode LampOn(2) on line 1
>    -- SEP0019563DD448: Send and Set the call state OffHook(1) on call 4
>    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
>    -- SEP0019563DD448: Send softkeyset to OffHook(4) on line 1  and call
>4
>    -- SEP0019563DD448: Send activate call plane on line 1
>    -- SEP0019563DD448: Sending tone InsideDialTone (33)
>    -- SEP0019563DD448: Finish to indicate state SCCP (OffHook), SKINNY
>(OffHook) on call 2002-4
>    -- SEP0019563DD448: Global Capabilities: 4
>    -- SEP0019563DD448: format request: 268/4
>    -- SEP0019563DD448: Channel SCCP/2002-00000004, capabilities: DEVICE
>0x10c (ulaw|alaw|g729) NATIVE 0x10c (ulaw|alaw|g729) BEST 4 (ulaw)
>    -- SEP0019563DD448: Allocated asterisk channel 2002-4
>    -- SCCP: Looking for line 2002
>    -- SEP0019563DD448: found line 2002
>    -- SCCP: Asterisk asked for the state (2) of the line 2002
>    -- SEP0019563DD448: Set asterisk state OffHook (2) for call 4
>    -- GOT data SCCP/2002-00000004 (0x101aa5f0)
>    -- GOT line 2002
>    -- GOT device SEP0019563DD448
>    -- SEP0019563DD448: New call on line 2002
>    -- SEP0019563DD448: Set callingParty Name "7970 2002" on channel 4
>    -- SEP0019563DD448: Set callingParty Number 2002 on channel 4
>    -- SEP0019563DD448: Waiting for the number to dial on channel 2002-4
>
>And then the phone cuts out (times out), even though I have typed my
>extension to dial, and have tried pressing the "dial" button, or setting
>my
>sccp.conf to force dial on # and pressing #, still no dice!  (note here,
>I
>went into chan_sccp.c and found this just before a do loop, I put in an
>output of the ("testing : %s", c->dialnumber) or something along those
>lines
>and it printed to the screen many times, but the dialnumber is always
>blank).
>
>When the phone cuts out I get this:
>
>- SEP0019563DD448: Indicate SCCP state (Dialing) on call 2002-4
>    -- SEP0019563DD448: Stop tone on device
>    -- SEP0019563DD448: Send softkeyset to DigitsFoll(6) on line 1  and
>call
>4
>    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
>    -- SCCP: Looking for line 2002
>    -- SEP0019563DD448: found line 2002
>    -- SCCP: Asterisk asked for the state (2) of the line 2002
>    -- SEP0019563DD448: Set asterisk state Dialing (3) for call 4
>    -- SEP0019563DD448: Finish to indicate state SCCP (Dialing), SKINNY
>(OffHook) on call 2002-4
>    -- SEP0019563DD448: Send and Set the call state Proceed(12) on call 4
>    -- SEP0019563DD448: Send callinfo for Outbound channel 4
>    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
>    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
>    -- SEP0019563DD448: Indicate SCCP state (InvalidNumber) on call 2002-
>4
>    -- SEP0019563DD448: Sending tone ReorderTone (37)
>    -- SEP0019563DD448: Send and Set the call state InvalidNumber(14) on
>call 4
>    -- SEP0019563DD448: Send callinfo for Outbound channel 4
>    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
>    -- SEP0019563DD448: Finish to indicate state SCCP (InvalidNumber),
>SKINNY (InvalidNumber) on call 2002-4
>    -- SEP0019563DD448: return from the startchannel on exit
>
>Until I hang up.
>
>
>
>> -----Original Message-----
>> From:	Federico Santulli [SMTP:mobile at nhm.it]
>> Sent:	Wednesday, July 18, 2007 3:25 PM
>> To:	chan-sccp-users at lists.berlios.de
>> Subject:	[Chan-sccp-users] R:  chan_sccp and 7970
>>
>> Try to use the command "sccp debug" from asterisk console to see what
>is
>> happening on channel ;)
>>
>> Let us know.
>>
>>
>>
>>
>> -----Messaggio originale-----
>> Da: chan-sccp-users-bounces at lists.berlios.de
>> [mailto:chan-sccp-users-bounces at lists.berlios.de] Per conto di Zuber,
>> Jonathan
>> Inviato: mercoled? 18 luglio 2007 21.20
>> A: 'chan-sccp-users at lists.berlios.de'; 'Marcello.Ceschia at gmx.net'
>> Oggetto: Re: [Chan-sccp-users] chan_sccp and 7970
>>
>> I have it on full debug - asterisk is not seeing the digits I am
>pressing
>> at
>> all, however it sees the speedial digits (if i wait for the dialtone
>> timeout
>> and then press speeddial it sends those digits, and asterisk catches
>> them).
>> I set debug level in my sccp.conf to 10 and I run asterisk using the
>> -vvvvvvvvvvgc command in console.
>>
>> > -----Original Message-----
>> > From:	Ceschia, Marcello [SMTP:Marcello.Ceschia at gmx.net]
>> > Sent:	Wednesday, July 18, 2007 2:34 PM
>> > To:	chan-sccp-users at lists.berlios.de
>> > Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
>> >
>> > Hello Jonathan,
>> >
>> > after reading your email, I tried to rebuild the problem.
>> > I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
>> > asterisk
>> > 1.4.7. I have no problem using the dial-button.
>> > Do you have some logs on console (set verbose 4)?
>> >
>> >  Marcello
>> >
>> > Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
>> > > Hello all,
>> > >
>> > > 	Not sure if this is a chan_sccp issue or an Asterisk issue, or
>maybe
>> > > just a cisco 7970 issue, but here it is:
>> > >
>> > > 	I have been working on this problem for a couple days now, and
>was
>> > > looking for a little help.  I am running a Cisco 7970 IP phone,
>using
>> > SCCP,
>> > > and a tftp server running Asterisk 1.4.6.  I have everything
>compiled,
>> a
>> > > new chan_sccp (the patched one that works with Asterisk 1.4.4+),
>and
>> my
>> > > phones connect properly to Asterisk, speedials pop up and
>everything.
>> > The
>> > > speeddials even work! They will dial the extensions I programmed
>into
>> > them
>> > > no problem.  However, when I try to just do a regular dial, a
>"dial"
>> > screen
>> > > pops up, shows me the digits I dialed, then does nothing. This
>screen
>> > has 3
>> > > softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.
>The
>> > > cancel and << work just fine, but the Dial softbutton does nothing.
>I
>> > am
>> > > monitoring asterisk on full debug, and I see no indication that it
>is
>> > > receiving the digits from the phone.
>> > >
>> > > 	Any help is much appreciated, and thanks in advance.
>> > >
>> > > Jonathan Zuber
>> > > _______________________________________________
>> > > Chan-sccp-users mailing list
>> > > Chan-sccp-users at lists.berlios.de
>> > > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>> > _______________________________________________
>> > Chan-sccp-users mailing list
>> > Chan-sccp-users at lists.berlios.de
>> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>> _______________________________________________
>> Chan-sccp-users mailing list
>> Chan-sccp-users at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>>
>> _______________________________________________
>> Chan-sccp-users mailing list
>> Chan-sccp-users at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>_______________________________________________
>Chan-sccp-users mailing list
>Chan-sccp-users at lists.berlios.de
>https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From jzuber at drs.ca  Thu Jul 19 20:52:44 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Thu, 19 Jul 2007 14:52:44 -0400
Subject: [Chan-sccp-users] R:  chan_sccp and 7970
Message-ID: <03FDC7A639326744925F8EB885247BAF861E7C@THEBRAIN1.drs.ca>

Yes, I hooked up and configured a 7960 - works fine!  

The main difference I see is that when you dial on the 7970, a "dialing"
menu pops up and shows the digits you are pressing. As i stated in my
original post, there are three softkeys for this menu, a cancel, a backspace
(<<) and a Dial softkey, and the Dial softkey does not seem to do anything.
The other two work as expected.

> -----Original Message-----
> From:	Hakan Evirgen [SMTP:hakan at nets.at]
> Sent:	Thursday, July 19, 2007 2:37 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] R:  chan_sccp and 7970
> 
> Seems so that your phone is NOT sending any digit.
> 
> Do you have the possibility to test another phone?
> 
> Best regards,
> Hakan Evirgen
> 
> 
> >-----Original Message-----
> >From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-
> >bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
> >Sent: Thursday, July 19, 2007 8:34 PM
> >To: 'chan-sccp-users at lists.berlios.de'
> >Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
> >
> >I get here, when I pick up the receiver, and I hear a  dial tone:
> >
> >    -- SEP0019563DD448: >> Got message OffHookMessage
> >    -- SEP0019563DD448: Getting the active channel on device
> >    -- SEP0019563DD448: Taken Offhook
> >    -- SEP0019563DD448: The active line is 2002
> >    -- SEP0019563DD448: Using line 2002
> >    -- SEP0019563DD448: Getting the active channel on device
> >    -- SEP0019563DD448: New channel number: 4 on line 2002
> >    -- SEP0019563DD448: Set the active channel 4 on device
> >    -- SEP0019563DD448: Indicate SCCP state (OffHook) on call 2002-4
> >    -- SEP0019563DD448: Clear the display notify message
> >    -- SEP0019563DD448: Clear the status prompt on line 0 and callid 0
> >    -- SEP0019563DD448: Send speaker mode 1
> >    -- SEP0019563DD448: Send lamp mode LampOn(2) on line 1
> >    -- SEP0019563DD448: Send and Set the call state OffHook(1) on call 4
> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
> >    -- SEP0019563DD448: Send softkeyset to OffHook(4) on line 1  and call
> >4
> >    -- SEP0019563DD448: Send activate call plane on line 1
> >    -- SEP0019563DD448: Sending tone InsideDialTone (33)
> >    -- SEP0019563DD448: Finish to indicate state SCCP (OffHook), SKINNY
> >(OffHook) on call 2002-4
> >    -- SEP0019563DD448: Global Capabilities: 4
> >    -- SEP0019563DD448: format request: 268/4
> >    -- SEP0019563DD448: Channel SCCP/2002-00000004, capabilities: DEVICE
> >0x10c (ulaw|alaw|g729) NATIVE 0x10c (ulaw|alaw|g729) BEST 4 (ulaw)
> >    -- SEP0019563DD448: Allocated asterisk channel 2002-4
> >    -- SCCP: Looking for line 2002
> >    -- SEP0019563DD448: found line 2002
> >    -- SCCP: Asterisk asked for the state (2) of the line 2002
> >    -- SEP0019563DD448: Set asterisk state OffHook (2) for call 4
> >    -- GOT data SCCP/2002-00000004 (0x101aa5f0)
> >    -- GOT line 2002
> >    -- GOT device SEP0019563DD448
> >    -- SEP0019563DD448: New call on line 2002
> >    -- SEP0019563DD448: Set callingParty Name "7970 2002" on channel 4
> >    -- SEP0019563DD448: Set callingParty Number 2002 on channel 4
> >    -- SEP0019563DD448: Waiting for the number to dial on channel 2002-4
> >
> >And then the phone cuts out (times out), even though I have typed my
> >extension to dial, and have tried pressing the "dial" button, or setting
> >my
> >sccp.conf to force dial on # and pressing #, still no dice!  (note here,
> >I
> >went into chan_sccp.c and found this just before a do loop, I put in an
> >output of the ("testing : %s", c->dialnumber) or something along those
> >lines
> >and it printed to the screen many times, but the dialnumber is always
> >blank).
> >
> >When the phone cuts out I get this:
> >
> >- SEP0019563DD448: Indicate SCCP state (Dialing) on call 2002-4
> >    -- SEP0019563DD448: Stop tone on device
> >    -- SEP0019563DD448: Send softkeyset to DigitsFoll(6) on line 1  and
> >call
> >4
> >    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
> >    -- SCCP: Looking for line 2002
> >    -- SEP0019563DD448: found line 2002
> >    -- SCCP: Asterisk asked for the state (2) of the line 2002
> >    -- SEP0019563DD448: Set asterisk state Dialing (3) for call 4
> >    -- SEP0019563DD448: Finish to indicate state SCCP (Dialing), SKINNY
> >(OffHook) on call 2002-4
> >    -- SEP0019563DD448: Send and Set the call state Proceed(12) on call 4
> >    -- SEP0019563DD448: Send callinfo for Outbound channel 4
> >    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
> >    -- SEP0019563DD448: Indicate SCCP state (InvalidNumber) on call 2002-
> >4
> >    -- SEP0019563DD448: Sending tone ReorderTone (37)
> >    -- SEP0019563DD448: Send and Set the call state InvalidNumber(14) on
> >call 4
> >    -- SEP0019563DD448: Send callinfo for Outbound channel 4
> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
> >    -- SEP0019563DD448: Finish to indicate state SCCP (InvalidNumber),
> >SKINNY (InvalidNumber) on call 2002-4
> >    -- SEP0019563DD448: return from the startchannel on exit
> >
> >Until I hang up.
> >
> >
> >
> >> -----Original Message-----
> >> From:	Federico Santulli [SMTP:mobile at nhm.it]
> >> Sent:	Wednesday, July 18, 2007 3:25 PM
> >> To:	chan-sccp-users at lists.berlios.de
> >> Subject:	[Chan-sccp-users] R:  chan_sccp and 7970
> >>
> >> Try to use the command "sccp debug" from asterisk console to see what
> >is
> >> happening on channel ;)
> >>
> >> Let us know.
> >>
> >>
> >>
> >>
> >> -----Messaggio originale-----
> >> Da: chan-sccp-users-bounces at lists.berlios.de
> >> [mailto:chan-sccp-users-bounces at lists.berlios.de] Per conto di Zuber,
> >> Jonathan
> >> Inviato: mercoled? 18 luglio 2007 21.20
> >> A: 'chan-sccp-users at lists.berlios.de'; 'Marcello.Ceschia at gmx.net'
> >> Oggetto: Re: [Chan-sccp-users] chan_sccp and 7970
> >>
> >> I have it on full debug - asterisk is not seeing the digits I am
> >pressing
> >> at
> >> all, however it sees the speedial digits (if i wait for the dialtone
> >> timeout
> >> and then press speeddial it sends those digits, and asterisk catches
> >> them).
> >> I set debug level in my sccp.conf to 10 and I run asterisk using the
> >> -vvvvvvvvvvgc command in console.
> >>
> >> > -----Original Message-----
> >> > From:	Ceschia, Marcello [SMTP:Marcello.Ceschia at gmx.net]
> >> > Sent:	Wednesday, July 18, 2007 2:34 PM
> >> > To:	chan-sccp-users at lists.berlios.de
> >> > Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
> >> >
> >> > Hello Jonathan,
> >> >
> >> > after reading your email, I tried to rebuild the problem.
> >> > I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
> >> > asterisk
> >> > 1.4.7. I have no problem using the dial-button.
> >> > Do you have some logs on console (set verbose 4)?
> >> >
> >> >  Marcello
> >> >
> >> > Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
> >> > > Hello all,
> >> > >
> >> > > 	Not sure if this is a chan_sccp issue or an Asterisk issue,
> or
> >maybe
> >> > > just a cisco 7970 issue, but here it is:
> >> > >
> >> > > 	I have been working on this problem for a couple days now,
> and
> >was
> >> > > looking for a little help.  I am running a Cisco 7970 IP phone,
> >using
> >> > SCCP,
> >> > > and a tftp server running Asterisk 1.4.6.  I have everything
> >compiled,
> >> a
> >> > > new chan_sccp (the patched one that works with Asterisk 1.4.4+),
> >and
> >> my
> >> > > phones connect properly to Asterisk, speedials pop up and
> >everything.
> >> > The
> >> > > speeddials even work! They will dial the extensions I programmed
> >into
> >> > them
> >> > > no problem.  However, when I try to just do a regular dial, a
> >"dial"
> >> > screen
> >> > > pops up, shows me the digits I dialed, then does nothing. This
> >screen
> >> > has 3
> >> > > softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.
> >The
> >> > > cancel and << work just fine, but the Dial softbutton does nothing.
> >I
> >> > am
> >> > > monitoring asterisk on full debug, and I see no indication that it
> >is
> >> > > receiving the digits from the phone.
> >> > >
> >> > > 	Any help is much appreciated, and thanks in advance.
> >> > >
> >> > > Jonathan Zuber
> >> > > _______________________________________________
> >> > > Chan-sccp-users mailing list
> >> > > Chan-sccp-users at lists.berlios.de
> >> > > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> >> > _______________________________________________
> >> > Chan-sccp-users mailing list
> >> > Chan-sccp-users at lists.berlios.de
> >> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> >> _______________________________________________
> >> Chan-sccp-users mailing list
> >> Chan-sccp-users at lists.berlios.de
> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> >>
> >> _______________________________________________
> >> Chan-sccp-users mailing list
> >> Chan-sccp-users at lists.berlios.de
> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> >_______________________________________________
> >Chan-sccp-users mailing list
> >Chan-sccp-users at lists.berlios.de
> >https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> 
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From darrell at collisionstudios.com  Fri Jul 20 03:10:48 2007
From: darrell at collisionstudios.com (Darrell Benvenuto)
Date: Thu, 19 Jul 2007 18:10:48 -0700
Subject: [Chan-sccp-users] Handset/Offhook issue while configuring chan_sccp
	with Cisco 7910 phones
Message-ID: <001501c7ca6a$d12670d0$73735270$@com>

Hi, Everyone.

I am encountering serious difficulties in setting up approximately 20 Cisco
7910G+SW phones using Asterisk, FreePBX and chan_sccp.  

All of the phones are using Firmware version P00405000600.

Setup and configuration of the phones, Asterisk and chan_sccp is complete.

All of the phones work perfectly using the Speaker button, producing a dial
tone, and even dialing out.

However, only 4 out of 20 go "off hook" when their handsets are picked up.

Can this unusual behavior be corrected through a software setting under
sccp.conf?

Or is this a hardware issue on the phones?  It seems unlikely so many phones
would behave the same way, especially as they are all in excellent physical
condition.

Hitting each of the phones' internal web servers show no difference in their
internal configuration.  Each of them had their Configuration reset, and
have the Asterisk box set as their TFTP server.

Any advice would be greatly appreciated.

-- Darrell


From hakan at nets.at  Fri Jul 20 09:29:51 2007
From: hakan at nets.at (Hakan Evirgen)
Date: Fri, 20 Jul 2007 09:29:51 +0200
Subject: [Chan-sccp-users] R:  chan_sccp and 7970
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E7C@THEBRAIN1.drs.ca>
References: <03FDC7A639326744925F8EB885247BAF861E7C@THEBRAIN1.drs.ca>
Message-ID: <020701c7ca9f$c3d5ad80$4b810880$@at>

As the 7960 works fine, you can assume, that the configuration on the
Asterisk is ok.

You should really try to update the firmware on the 7970. I have also a 7970
and since the update it works really fine.

>-----Original Message-----
>From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-
>bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
>Sent: Thursday, July 19, 2007 8:53 PM
>To: 'chan-sccp-users at lists.berlios.de'
>Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
>
>Yes, I hooked up and configured a 7960 - works fine!
>
>The main difference I see is that when you dial on the 7970, a "dialing"
>menu pops up and shows the digits you are pressing. As i stated in my
>original post, there are three softkeys for this menu, a cancel, a
>backspace
>(<<) and a Dial softkey, and the Dial softkey does not seem to do
>anything.
>The other two work as expected.
>
>> -----Original Message-----
>> From:	Hakan Evirgen [SMTP:hakan at nets.at]
>> Sent:	Thursday, July 19, 2007 2:37 PM
>> To:	chan-sccp-users at lists.berlios.de
>> Subject:	Re: [Chan-sccp-users] R:  chan_sccp and 7970
>>
>> Seems so that your phone is NOT sending any digit.
>>
>> Do you have the possibility to test another phone?
>>
>> Best regards,
>> Hakan Evirgen
>>
>>
>> >-----Original Message-----
>> >From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-
>users-
>> >bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
>> >Sent: Thursday, July 19, 2007 8:34 PM
>> >To: 'chan-sccp-users at lists.berlios.de'
>> >Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
>> >
>> >I get here, when I pick up the receiver, and I hear a  dial tone:
>> >
>> >    -- SEP0019563DD448: >> Got message OffHookMessage
>> >    -- SEP0019563DD448: Getting the active channel on device
>> >    -- SEP0019563DD448: Taken Offhook
>> >    -- SEP0019563DD448: The active line is 2002
>> >    -- SEP0019563DD448: Using line 2002
>> >    -- SEP0019563DD448: Getting the active channel on device
>> >    -- SEP0019563DD448: New channel number: 4 on line 2002
>> >    -- SEP0019563DD448: Set the active channel 4 on device
>> >    -- SEP0019563DD448: Indicate SCCP state (OffHook) on call 2002-4
>> >    -- SEP0019563DD448: Clear the display notify message
>> >    -- SEP0019563DD448: Clear the status prompt on line 0 and callid 0
>> >    -- SEP0019563DD448: Send speaker mode 1
>> >    -- SEP0019563DD448: Send lamp mode LampOn(2) on line 1
>> >    -- SEP0019563DD448: Send and Set the call state OffHook(1) on call
>4
>> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
>> >    -- SEP0019563DD448: Send softkeyset to OffHook(4) on line 1  and
>call
>> >4
>> >    -- SEP0019563DD448: Send activate call plane on line 1
>> >    -- SEP0019563DD448: Sending tone InsideDialTone (33)
>> >    -- SEP0019563DD448: Finish to indicate state SCCP (OffHook),
>SKINNY
>> >(OffHook) on call 2002-4
>> >    -- SEP0019563DD448: Global Capabilities: 4
>> >    -- SEP0019563DD448: format request: 268/4
>> >    -- SEP0019563DD448: Channel SCCP/2002-00000004, capabilities:
>DEVICE
>> >0x10c (ulaw|alaw|g729) NATIVE 0x10c (ulaw|alaw|g729) BEST 4 (ulaw)
>> >    -- SEP0019563DD448: Allocated asterisk channel 2002-4
>> >    -- SCCP: Looking for line 2002
>> >    -- SEP0019563DD448: found line 2002
>> >    -- SCCP: Asterisk asked for the state (2) of the line 2002
>> >    -- SEP0019563DD448: Set asterisk state OffHook (2) for call 4
>> >    -- GOT data SCCP/2002-00000004 (0x101aa5f0)
>> >    -- GOT line 2002
>> >    -- GOT device SEP0019563DD448
>> >    -- SEP0019563DD448: New call on line 2002
>> >    -- SEP0019563DD448: Set callingParty Name "7970 2002" on channel 4
>> >    -- SEP0019563DD448: Set callingParty Number 2002 on channel 4
>> >    -- SEP0019563DD448: Waiting for the number to dial on channel
>2002-4
>> >
>> >And then the phone cuts out (times out), even though I have typed my
>> >extension to dial, and have tried pressing the "dial" button, or
>setting
>> >my
>> >sccp.conf to force dial on # and pressing #, still no dice!  (note
>here,
>> >I
>> >went into chan_sccp.c and found this just before a do loop, I put in
>an
>> >output of the ("testing : %s", c->dialnumber) or something along those
>> >lines
>> >and it printed to the screen many times, but the dialnumber is always
>> >blank).
>> >
>> >When the phone cuts out I get this:
>> >
>> >- SEP0019563DD448: Indicate SCCP state (Dialing) on call 2002-4
>> >    -- SEP0019563DD448: Stop tone on device
>> >    -- SEP0019563DD448: Send softkeyset to DigitsFoll(6) on line 1
>and
>> >call
>> >4
>> >    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
>> >    -- SCCP: Looking for line 2002
>> >    -- SEP0019563DD448: found line 2002
>> >    -- SCCP: Asterisk asked for the state (2) of the line 2002
>> >    -- SEP0019563DD448: Set asterisk state Dialing (3) for call 4
>> >    -- SEP0019563DD448: Finish to indicate state SCCP (Dialing),
>SKINNY
>> >(OffHook) on call 2002-4
>> >    -- SEP0019563DD448: Send and Set the call state Proceed(12) on
>call 4
>> >    -- SEP0019563DD448: Send callinfo for Outbound channel 4
>> >    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
>> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
>> >    -- SEP0019563DD448: Indicate SCCP state (InvalidNumber) on call
>2002-
>> >4
>> >    -- SEP0019563DD448: Sending tone ReorderTone (37)
>> >    -- SEP0019563DD448: Send and Set the call state InvalidNumber(14)
>on
>> >call 4
>> >    -- SEP0019563DD448: Send callinfo for Outbound channel 4
>> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
>> >    -- SEP0019563DD448: Finish to indicate state SCCP (InvalidNumber),
>> >SKINNY (InvalidNumber) on call 2002-4
>> >    -- SEP0019563DD448: return from the startchannel on exit
>> >
>> >Until I hang up.
>> >
>> >
>> >
>> >> -----Original Message-----
>> >> From:	Federico Santulli [SMTP:mobile at nhm.it]
>> >> Sent:	Wednesday, July 18, 2007 3:25 PM
>> >> To:	chan-sccp-users at lists.berlios.de
>> >> Subject:	[Chan-sccp-users] R:  chan_sccp and 7970
>> >>
>> >> Try to use the command "sccp debug" from asterisk console to see
>what
>> >is
>> >> happening on channel ;)
>> >>
>> >> Let us know.
>> >>
>> >>
>> >>
>> >>
>> >> -----Messaggio originale-----
>> >> Da: chan-sccp-users-bounces at lists.berlios.de
>> >> [mailto:chan-sccp-users-bounces at lists.berlios.de] Per conto di
>Zuber,
>> >> Jonathan
>> >> Inviato: mercoled? 18 luglio 2007 21.20
>> >> A: 'chan-sccp-users at lists.berlios.de'; 'Marcello.Ceschia at gmx.net'
>> >> Oggetto: Re: [Chan-sccp-users] chan_sccp and 7970
>> >>
>> >> I have it on full debug - asterisk is not seeing the digits I am
>> >pressing
>> >> at
>> >> all, however it sees the speedial digits (if i wait for the dialtone
>> >> timeout
>> >> and then press speeddial it sends those digits, and asterisk catches
>> >> them).
>> >> I set debug level in my sccp.conf to 10 and I run asterisk using the
>> >> -vvvvvvvvvvgc command in console.
>> >>
>> >> > -----Original Message-----
>> >> > From:	Ceschia, Marcello [SMTP:Marcello.Ceschia at gmx.net]
>> >> > Sent:	Wednesday, July 18, 2007 2:34 PM
>> >> > To:	chan-sccp-users at lists.berlios.de
>> >> > Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
>> >> >
>> >> > Hello Jonathan,
>> >> >
>> >> > after reading your email, I tried to rebuild the problem.
>> >> > I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
>> >> > asterisk
>> >> > 1.4.7. I have no problem using the dial-button.
>> >> > Do you have some logs on console (set verbose 4)?
>> >> >
>> >> >  Marcello
>> >> >
>> >> > Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
>> >> > > Hello all,
>> >> > >
>> >> > > 	Not sure if this is a chan_sccp issue or an Asterisk issue,
>> or
>> >maybe
>> >> > > just a cisco 7970 issue, but here it is:
>> >> > >
>> >> > > 	I have been working on this problem for a couple days now,
>> and
>> >was
>> >> > > looking for a little help.  I am running a Cisco 7970 IP phone,
>> >using
>> >> > SCCP,
>> >> > > and a tftp server running Asterisk 1.4.6.  I have everything
>> >compiled,
>> >> a
>> >> > > new chan_sccp (the patched one that works with Asterisk 1.4.4+),
>> >and
>> >> my
>> >> > > phones connect properly to Asterisk, speedials pop up and
>> >everything.
>> >> > The
>> >> > > speeddials even work! They will dial the extensions I programmed
>> >into
>> >> > them
>> >> > > no problem.  However, when I try to just do a regular dial, a
>> >"dial"
>> >> > screen
>> >> > > pops up, shows me the digits I dialed, then does nothing. This
>> >screen
>> >> > has 3
>> >> > > softbuttons, a cancel, a << (backspace) and a "Dial" softbutton.
>> >The
>> >> > > cancel and << work just fine, but the Dial softbutton does
>nothing.
>> >I
>> >> > am
>> >> > > monitoring asterisk on full debug, and I see no indication that
>it
>> >is
>> >> > > receiving the digits from the phone.
>> >> > >
>> >> > > 	Any help is much appreciated, and thanks in advance.
>> >> > >
>> >> > > Jonathan Zuber
>> >> > > _______________________________________________
>> >> > > Chan-sccp-users mailing list
>> >> > > Chan-sccp-users at lists.berlios.de
>> >> > > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>> >> > _______________________________________________
>> >> > Chan-sccp-users mailing list
>> >> > Chan-sccp-users at lists.berlios.de
>> >> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>> >> _______________________________________________
>> >> Chan-sccp-users mailing list
>> >> Chan-sccp-users at lists.berlios.de
>> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>> >>
>> >> _______________________________________________
>> >> Chan-sccp-users mailing list
>> >> Chan-sccp-users at lists.berlios.de
>> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>> >_______________________________________________
>> >Chan-sccp-users mailing list
>> >Chan-sccp-users at lists.berlios.de
>> >https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>>
>> _______________________________________________
>> Chan-sccp-users mailing list
>> Chan-sccp-users at lists.berlios.de
>> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>_______________________________________________
>Chan-sccp-users mailing list
>Chan-sccp-users at lists.berlios.de
>https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From SteveW at bucks.net  Fri Jul 20 11:52:24 2007
From: SteveW at bucks.net (Steve J. Walker)
Date: Fri, 20 Jul 2007 10:52:24 +0100
Subject: [Chan-sccp-users] R:  chan_sccp and 7970
References: <03FDC7A639326744925F8EB885247BAF861E7C@THEBRAIN1.drs.ca>
	<020701c7ca9f$c3d5ad80$4b810880$@at>
Message-ID: <792897337FC81944BA4097ABD7089771039C753E@pdc.bnsnet.co.uk>

Hi,

We had problems with a  7970 and ended up using this load:

cnu70.2-7-6-26.sbn
CVM70.2-0-2-26.sbn
Jar70.2-9-2-26.sbn
TERM70.7-0-3-0S.loads
term70.default.loads
term71.default.loads

Asterisk 1.2.18 and the last SCCP with a few tweaks to support hanging up a call to transfer - which echos our old PBK!

Never had a problem with it since.

Regards,

Steve 

> -----Original Message-----
> From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-
> bounces at lists.berlios.de] On Behalf Of Hakan Evirgen
> Sent: 20 July 2007 8:30
> To: chan-sccp-users at lists.berlios.de
> Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
> 
> As the 7960 works fine, you can assume, that the configuration on the
> Asterisk is ok.
> 
> You should really try to update the firmware on the 7970. I have also a
> 7970
> and since the update it works really fine.
> 
> >-----Original Message-----
> >From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-
> users-
> >bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
> >Sent: Thursday, July 19, 2007 8:53 PM
> >To: 'chan-sccp-users at lists.berlios.de'
> >Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
> >
> >Yes, I hooked up and configured a 7960 - works fine!
> >
> >The main difference I see is that when you dial on the 7970, a
> "dialing"
> >menu pops up and shows the digits you are pressing. As i stated in my
> >original post, there are three softkeys for this menu, a cancel, a
> >backspace
> >(<<) and a Dial softkey, and the Dial softkey does not seem to do
> >anything.
> >The other two work as expected.
> >
> >> -----Original Message-----
> >> From:	Hakan Evirgen [SMTP:hakan at nets.at]
> >> Sent:	Thursday, July 19, 2007 2:37 PM
> >> To:	chan-sccp-users at lists.berlios.de
> >> Subject:	Re: [Chan-sccp-users] R:  chan_sccp and 7970
> >>
> >> Seems so that your phone is NOT sending any digit.
> >>
> >> Do you have the possibility to test another phone?
> >>
> >> Best regards,
> >> Hakan Evirgen
> >>
> >>
> >> >-----Original Message-----
> >> >From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-
> >users-
> >> >bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
> >> >Sent: Thursday, July 19, 2007 8:34 PM
> >> >To: 'chan-sccp-users at lists.berlios.de'
> >> >Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
> >> >
> >> >I get here, when I pick up the receiver, and I hear a  dial tone:
> >> >
> >> >    -- SEP0019563DD448: >> Got message OffHookMessage
> >> >    -- SEP0019563DD448: Getting the active channel on device
> >> >    -- SEP0019563DD448: Taken Offhook
> >> >    -- SEP0019563DD448: The active line is 2002
> >> >    -- SEP0019563DD448: Using line 2002
> >> >    -- SEP0019563DD448: Getting the active channel on device
> >> >    -- SEP0019563DD448: New channel number: 4 on line 2002
> >> >    -- SEP0019563DD448: Set the active channel 4 on device
> >> >    -- SEP0019563DD448: Indicate SCCP state (OffHook) on call 2002-
> 4
> >> >    -- SEP0019563DD448: Clear the display notify message
> >> >    -- SEP0019563DD448: Clear the status prompt on line 0 and
> callid 0
> >> >    -- SEP0019563DD448: Send speaker mode 1
> >> >    -- SEP0019563DD448: Send lamp mode LampOn(2) on line 1
> >> >    -- SEP0019563DD448: Send and Set the call state OffHook(1) on
> call
> >4
> >> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout
> 0
> >> >    -- SEP0019563DD448: Send softkeyset to OffHook(4) on line 1
> and
> >call
> >> >4
> >> >    -- SEP0019563DD448: Send activate call plane on line 1
> >> >    -- SEP0019563DD448: Sending tone InsideDialTone (33)
> >> >    -- SEP0019563DD448: Finish to indicate state SCCP (OffHook),
> >SKINNY
> >> >(OffHook) on call 2002-4
> >> >    -- SEP0019563DD448: Global Capabilities: 4
> >> >    -- SEP0019563DD448: format request: 268/4
> >> >    -- SEP0019563DD448: Channel SCCP/2002-00000004, capabilities:
> >DEVICE
> >> >0x10c (ulaw|alaw|g729) NATIVE 0x10c (ulaw|alaw|g729) BEST 4 (ulaw)
> >> >    -- SEP0019563DD448: Allocated asterisk channel 2002-4
> >> >    -- SCCP: Looking for line 2002
> >> >    -- SEP0019563DD448: found line 2002
> >> >    -- SCCP: Asterisk asked for the state (2) of the line 2002
> >> >    -- SEP0019563DD448: Set asterisk state OffHook (2) for call 4
> >> >    -- GOT data SCCP/2002-00000004 (0x101aa5f0)
> >> >    -- GOT line 2002
> >> >    -- GOT device SEP0019563DD448
> >> >    -- SEP0019563DD448: New call on line 2002
> >> >    -- SEP0019563DD448: Set callingParty Name "7970 2002" on
> channel 4
> >> >    -- SEP0019563DD448: Set callingParty Number 2002 on channel 4
> >> >    -- SEP0019563DD448: Waiting for the number to dial on channel
> >2002-4
> >> >
> >> >And then the phone cuts out (times out), even though I have typed
> my
> >> >extension to dial, and have tried pressing the "dial" button, or
> >setting
> >> >my
> >> >sccp.conf to force dial on # and pressing #, still no dice!  (note
> >here,
> >> >I
> >> >went into chan_sccp.c and found this just before a do loop, I put
> in
> >an
> >> >output of the ("testing : %s", c->dialnumber) or something along
> those
> >> >lines
> >> >and it printed to the screen many times, but the dialnumber is
> always
> >> >blank).
> >> >
> >> >When the phone cuts out I get this:
> >> >
> >> >- SEP0019563DD448: Indicate SCCP state (Dialing) on call 2002-4
> >> >    -- SEP0019563DD448: Stop tone on device
> >> >    -- SEP0019563DD448: Send softkeyset to DigitsFoll(6) on line 1
> >and
> >> >call
> >> >4
> >> >    -- SEP0019563DD448: Clear the status prompt on line 1 and
> callid 4
> >> >    -- SCCP: Looking for line 2002
> >> >    -- SEP0019563DD448: found line 2002
> >> >    -- SCCP: Asterisk asked for the state (2) of the line 2002
> >> >    -- SEP0019563DD448: Set asterisk state Dialing (3) for call 4
> >> >    -- SEP0019563DD448: Finish to indicate state SCCP (Dialing),
> >SKINNY
> >> >(OffHook) on call 2002-4
> >> >    -- SEP0019563DD448: Send and Set the call state Proceed(12) on
> >call 4
> >> >    -- SEP0019563DD448: Send callinfo for Outbound channel 4
> >> >    -- SEP0019563DD448: Clear the status prompt on line 1 and
> callid 4
> >> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout
> 0
> >> >    -- SEP0019563DD448: Indicate SCCP state (InvalidNumber) on call
> >2002-
> >> >4
> >> >    -- SEP0019563DD448: Sending tone ReorderTone (37)
> >> >    -- SEP0019563DD448: Send and Set the call state
> InvalidNumber(14)
> >on
> >> >call 4
> >> >    -- SEP0019563DD448: Send callinfo for Outbound channel 4
> >> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout
> 0
> >> >    -- SEP0019563DD448: Finish to indicate state SCCP
> (InvalidNumber),
> >> >SKINNY (InvalidNumber) on call 2002-4
> >> >    -- SEP0019563DD448: return from the startchannel on exit
> >> >
> >> >Until I hang up.
> >> >
> >> >
> >> >
> >> >> -----Original Message-----
> >> >> From:	Federico Santulli [SMTP:mobile at nhm.it]
> >> >> Sent:	Wednesday, July 18, 2007 3:25 PM
> >> >> To:	chan-sccp-users at lists.berlios.de
> >> >> Subject:	[Chan-sccp-users] R:  chan_sccp and 7970
> >> >>
> >> >> Try to use the command "sccp debug" from asterisk console to see
> >what
> >> >is
> >> >> happening on channel ;)
> >> >>
> >> >> Let us know.
> >> >>
> >> >>
> >> >>
> >> >>
> >> >> -----Messaggio originale-----
> >> >> Da: chan-sccp-users-bounces at lists.berlios.de
> >> >> [mailto:chan-sccp-users-bounces at lists.berlios.de] Per conto di
> >Zuber,
> >> >> Jonathan
> >> >> Inviato: mercoled? 18 luglio 2007 21.20
> >> >> A: 'chan-sccp-users at lists.berlios.de'; 'Marcello.Ceschia at gmx.net'
> >> >> Oggetto: Re: [Chan-sccp-users] chan_sccp and 7970
> >> >>
> >> >> I have it on full debug - asterisk is not seeing the digits I am
> >> >pressing
> >> >> at
> >> >> all, however it sees the speedial digits (if i wait for the
> dialtone
> >> >> timeout
> >> >> and then press speeddial it sends those digits, and asterisk
> catches
> >> >> them).
> >> >> I set debug level in my sccp.conf to 10 and I run asterisk using
> the
> >> >> -vvvvvvvvvvgc command in console.
> >> >>
> >> >> > -----Original Message-----
> >> >> > From:	Ceschia, Marcello [SMTP:Marcello.Ceschia at gmx.net]
> >> >> > Sent:	Wednesday, July 18, 2007 2:34 PM
> >> >> > To:	chan-sccp-users at lists.berlios.de
> >> >> > Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
> >> >> >
> >> >> > Hello Jonathan,
> >> >> >
> >> >> > after reading your email, I tried to rebuild the problem.
> >> >> > I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version
> for
> >> >> > asterisk
> >> >> > 1.4.7. I have no problem using the dial-button.
> >> >> > Do you have some logs on console (set verbose 4)?
> >> >> >
> >> >> >  Marcello
> >> >> >
> >> >> > Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
> >> >> > > Hello all,
> >> >> > >
> >> >> > > 	Not sure if this is a chan_sccp issue or an Asterisk issue,
> >> or
> >> >maybe
> >> >> > > just a cisco 7970 issue, but here it is:
> >> >> > >
> >> >> > > 	I have been working on this problem for a couple days now,
> >> and
> >> >was
> >> >> > > looking for a little help.  I am running a Cisco 7970 IP
> phone,
> >> >using
> >> >> > SCCP,
> >> >> > > and a tftp server running Asterisk 1.4.6.  I have everything
> >> >compiled,
> >> >> a
> >> >> > > new chan_sccp (the patched one that works with Asterisk
> 1.4.4+),
> >> >and
> >> >> my
> >> >> > > phones connect properly to Asterisk, speedials pop up and
> >> >everything.
> >> >> > The
> >> >> > > speeddials even work! They will dial the extensions I
> programmed
> >> >into
> >> >> > them
> >> >> > > no problem.  However, when I try to just do a regular dial, a
> >> >"dial"
> >> >> > screen
> >> >> > > pops up, shows me the digits I dialed, then does nothing.
> This
> >> >screen
> >> >> > has 3
> >> >> > > softbuttons, a cancel, a << (backspace) and a "Dial"
> softbutton.
> >> >The
> >> >> > > cancel and << work just fine, but the Dial softbutton does
> >nothing.
> >> >I
> >> >> > am
> >> >> > > monitoring asterisk on full debug, and I see no indication
> that
> >it
> >> >is
> >> >> > > receiving the digits from the phone.
> >> >> > >
> >> >> > > 	Any help is much appreciated, and thanks in advance.
> >> >> > >
> >> >> > > Jonathan Zuber
> >> >> > > _______________________________________________
> >> >> > > Chan-sccp-users mailing list
> >> >> > > Chan-sccp-users at lists.berlios.de
> >> >> > > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> >> >> > _______________________________________________
> >> >> > Chan-sccp-users mailing list
> >> >> > Chan-sccp-users at lists.berlios.de
> >> >> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> >> >> _______________________________________________
> >> >> Chan-sccp-users mailing list
> >> >> Chan-sccp-users at lists.berlios.de
> >> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> >> >>
> >> >> _______________________________________________
> >> >> Chan-sccp-users mailing list
> >> >> Chan-sccp-users at lists.berlios.de
> >> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> >> >_______________________________________________
> >> >Chan-sccp-users mailing list
> >> >Chan-sccp-users at lists.berlios.de
> >> >https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> >>
> >> _______________________________________________
> >> Chan-sccp-users mailing list
> >> Chan-sccp-users at lists.berlios.de
> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> >_______________________________________________
> >Chan-sccp-users mailing list
> >Chan-sccp-users at lists.berlios.de
> >https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> 
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From DSmith at gibsondunn.com  Sat Jul 21 02:27:10 2007
From: DSmith at gibsondunn.com (Smith, Douglas D.)
Date: Fri, 20 Jul 2007 17:27:10 -0700
Subject: [Chan-sccp-users] Good News on 7935 Conference Station
Message-ID: <9F0B86FBE62A2A4C865F31B36F7F6748072D8533@SFMAIL1.Gibsondunn.net>

For a long time there has been a problem with the 7935 conference phone.
After you hung up, you had to reset the phone before you could make a
new call. Not at all satisfactory, especially for those of us that
misdial as often as we dial correctly!

I just upgraded my phone with firmware release 3.2(17) and the problem
is gone. 

 


==============================================================================

This message may contain confidential and privileged information.  If it has been sent to you in error, please reply to advise the sender of the error and then immediately delete this message.
==============================================================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070720/dc2b24f0/attachment.html>

From SteveW at bucks.net  Sat Jul 21 09:52:50 2007
From: SteveW at bucks.net (Steve J. Walker)
Date: Sat, 21 Jul 2007 08:52:50 +0100
Subject: [Chan-sccp-users] Ring Indications
Message-ID: <792897337FC81944BA4097ABD7089771039C757A@pdc.bnsnet.co.uk>

Morning all,

Anyone here know or had any luck changing the ring and busy and dial
indications for 79x0s series phones with SCCP at all?

I know they load a US tones XML file - and I know CCME has during setup;
choose a country for ring indications which I guess sends the correct
file? or information to the phone(s)? 

Is there a way to do this outside of CCM/E? I like the 'US' sounds but
we have people here who would like it to sound British! 

I assume that the network locale in the conf file must match the locale
you want to use as by default they all seem to be United_States which I
guess should be United_Kingdom????!

Thanks

Steve 

--
------------------------------------------------------------------------
-------
Steve Walker           | Bucks Net Services Limited     |
http://www.bucks.net
Technical Support      | 27 & 30 Edison Road            |
support at bucks.net
                       | Aylesbury, Bucks, HP19 8TE     | Admin - 0871
408 3801
                       | Switchboard - 01296 432486     | Sales - 0871
408 3802
------------------------------------------------------------------------
-------

Our company accepts no liability for the content of this email, or for
the consequences of any actions taken on the basis of the information
provided, unless that information is subsequently confirmed in writing.
Any views or opinions presented in this email are solely those of the
author and do not necessarily represent those of the company. WARNING:
Computer viruses can be transmitted via email. The recipient should
check this email and any attachments for the presence of viruses. The
company accepts no liability for any damage caused by any virus
transmitted by this email.






From mobile at nhm.it  Sat Jul 21 11:15:32 2007
From: mobile at nhm.it (Federico Santulli)
Date: Sat, 21 Jul 2007 11:15:32 +0200
Subject: [Chan-sccp-users] Difference betwen chan_skinny and chan_sccp
In-Reply-To: <9F0B86FBE62A2A4C865F31B36F7F6748072D8533@SFMAIL1.Gibsondunn.net>
References: <9F0B86FBE62A2A4C865F31B36F7F6748072D8533@SFMAIL1.Gibsondunn.net>
Message-ID: <004f01c7cb77$b13202e0$139608a0$@it>

What  kind of features in chan_sccp are missing on asterisk chan_skinny ?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070721/26c1384f/attachment.html>

From davidded at davidded.de  Sat Jul 21 15:07:35 2007
From: davidded at davidded.de (David Dederscheck)
Date: Sat, 21 Jul 2007 15:07:35 +0200
Subject: [Chan-sccp-users] Handset/Offhook issue while configuring
	chan_sccp with Cisco 7910 phones
In-Reply-To: <001501c7ca6a$d12670d0$73735270$@com>
References: <001501c7ca6a$d12670d0$73735270$@com>
Message-ID: <96DDA244-D0AC-4231-9003-021C1E921403@davidded.de>

Hi Darrell,

a common problem with the first version of all 7900 series Cisco IP  
Phones is in fact a malfunctioning hook. These first version phones  
are easily identified by the two vertical arrows on the volume switch  
as opposed to a long horizontal wedge.

If the phones are used at all, i.e. not almost new, it is very likely  
that this is your problem. You won't be able to tell from the outer  
look of the phone.

You might try taking the receiver off-hook first, then depressing the  
hook manually to let it pop out quickly afterwards. This sometimes  
helps trigger the off-hook switch in case of the version 1 phones.

A workaround for using these phones would be to disassemble them and  
to clean the contacts of the off-hook switch. I have been  
successfully repairing a number of such phones.


Kind Regards,
-David


On 20.07.2007, at 03:10, Darrell Benvenuto wrote:

> Hi, Everyone.
>
> I am encountering serious difficulties in setting up approximately  
> 20 Cisco
> 7910G+SW phones using Asterisk, FreePBX and chan_sccp.
>
> All of the phones are using Firmware version P00405000600.
>
> Setup and configuration of the phones, Asterisk and chan_sccp is  
> complete.
>
> All of the phones work perfectly using the Speaker button,  
> producing a dial
> tone, and even dialing out.
>
> However, only 4 out of 20 go "off hook" when their handsets are  
> picked up.
>
> Can this unusual behavior be corrected through a software setting  
> under
> sccp.conf?
>
> Or is this a hardware issue on the phones?  It seems unlikely so  
> many phones
> would behave the same way, especially as they are all in excellent  
> physical
> condition.
>
> Hitting each of the phones' internal web servers show no difference  
> in their
> internal configuration.  Each of them had their Configuration  
> reset, and
> have the Asterisk box set as their TFTP server.
>
> Any advice would be greatly appreciated.
>
> -- Darrell
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From hakan at nets.at  Sun Jul 22 13:15:20 2007
From: hakan at nets.at (Hakan Evirgen)
Date: Sun, 22 Jul 2007 13:15:20 +0200
Subject: [Chan-sccp-users] Ring Indications
In-Reply-To: <792897337FC81944BA4097ABD7089771039C757A@pdc.bnsnet.co.uk>
References: <792897337FC81944BA4097ABD7089771039C757A@pdc.bnsnet.co.uk>
Message-ID: <006901c7cc51$988f3d90$c9adb8b0$@at>

Hi!

>-----Original Message-----
>From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-
>bounces at lists.berlios.de] On Behalf Of Steve J. Walker
>Sent: Saturday, July 21, 2007 9:53 AM
>To: chan-sccp-users at lists.berlios.de
>Subject: [Chan-sccp-users] Ring Indications
>
>Morning all,
>
>Anyone here know or had any luck changing the ring and busy and dial
>indications for 79x0s series phones with SCCP at all?

Yes.

>I know they load a US tones XML file - and I know CCME has during setup;
>choose a country for ring indications which I guess sends the correct
>file? or information to the phone(s)?

You can download from Cisco appropriate language files, which includes
language definition for the phone itself as well as sounds.

>Is there a way to do this outside of CCM/E? I like the 'US' sounds but
>we have people here who would like it to sound British!

The language file is a package, which you must define in the XML.

>I assume that the network locale in the conf file must match the locale
>you want to use as by default they all seem to be United_States which I
>guess should be United_Kingdom????!

The phone loads the language file as stated in the XML.

Cheers,
Hakan



From darrell at collisionstudios.com  Mon Jul 23 08:41:00 2007
From: darrell at collisionstudios.com (Darrell Benvenuto)
Date: Sun, 22 Jul 2007 23:41 -0700
Subject: [Chan-sccp-users] Cisco 7910 Phone Off-Hook/Handset Problem
In-Reply-To: <mailman.51.1185098461.8057.chan-sccp-users@lists.berlios.de>
References: Message-ID:
Message-ID: <583-SnapperMsg4B489B01C2C9FE1B@68.244.132.54>

The problem indeed lay with the contacts on each phone's off-hook switch. 
Retensioning the spring and cleaning the contacts fixed every single one of 
them.

-- Darrell


From chan-sccp at vaag.nu  Mon Jul 23 10:55:06 2007
From: chan-sccp at vaag.nu (Remco Barendse)
Date: Mon, 23 Jul 2007 10:55:06 +0200 (CEST)
Subject: [Chan-sccp-users] CHAN FIXES
Message-ID: <Pine.LNX.4.64.0707231054520.2496@raveon.vaag.nu>


On Wed, 18 Jul 2007, Federico Santulli wrote:

>  I sent an email to this list last week but i think it was lost for some
>  reasons I can't understand.
>
>  I would like to catch fixes all of you made and make a public stable and new
>  release
>  of chan_sccp for 1.4.4+ and 1.2+ versions.
>
>  Would anyone help ?
>
>  I already made a lot of lockdown fixes so, I'm searching for other solutions
>  and test.


Great, thanks for doing that!!

I thought there would be a fork of chan-sccp but guess the fork died as well?

Hope it will bring chan_sccp to a more stable level

Thanks again


From Marcello.Ceschia at gmx.net  Wed Jul 18 23:36:44 2007
From: Marcello.Ceschia at gmx.net (Ceschia, Marcello)
Date: Wed, 18 Jul 2007 23:36:44 +0200
Subject: [Chan-sccp-users] CHAN FIXES
In-Reply-To: <001601c7c971$ce91d660$6bb58320$@it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
	<001601c7c971$ce91d660$6bb58320$@it>
Message-ID: <200707182336.45097.Marcello.Ceschia@gmx.net>

@all,

I did a version for asterisk 1.4.7+
see attachment. Please report bug on mailinglist - I will try to fix it.

 Marcello

Am Mittwoch, 18. Juli 2007 21:28 schrieb Federico Santulli:
> I sent an email to this list last week but i think it was lost for some
> reasons I can't understand.
>
> I would like to catch fixes all of you made and make a public stable and
> new release
> of chan_sccp for 1.4.4+ and 1.2+ versions.
>
> Would anyone help ?
>
> I already made a lot of lockdown fixes so, I'm searching for other
> solutions and test.
>
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2007-07-12_chan_sccp-Version1.4.7.tar.gz
Type: application/x-tgz
Size: 91212 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070718/fc7d15d9/attachment.bin>

From Marcello.Ceschia at gmx.net  Wed Jul 18 23:42:22 2007
From: Marcello.Ceschia at gmx.net (Ceschia, Marcello)
Date: Wed, 18 Jul 2007 23:42:22 +0200
Subject: [Chan-sccp-users] CHAN FIXES
In-Reply-To: <001601c7c971$ce91d660$6bb58320$@it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
	<001601c7c971$ce91d660$6bb58320$@it>
Message-ID: <200707182342.22631.Marcello.Ceschia@gmx.net>

@all,

I did a version for asterisk 1.4.7+
http://sccp.smilekom.de/2007-07-12_chan_sccp-Version1.4.7.tar.gz 
Please report bug on mailinglist - I will try to fix it.

 Marcello

Am Mittwoch, 18. Juli 2007 21:28 schrieb Federico Santulli:
> I sent an email to this list last week but i think it was lost for some
> reasons I can't understand.
>
> I would like to catch fixes all of you made and make a public stable and
> new release
> of chan_sccp for 1.4.4+ and 1.2+ versions.
>
> Would anyone help ?
>
> I already made a lot of lockdown fixes so, I'm searching for other
> solutions and test.
>
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2007-07-12_chan_sccp-Version1.4.7.tar.gz
Type: application/x-tgz
Size: 91212 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070718/c615f4d4/attachment.bin>

From mlists at c-net.it  Mon Jul 23 20:20:11 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Mon, 23 Jul 2007 20:20:11 +0200
Subject: [Chan-sccp-users] CHAN FIXES
In-Reply-To: <001601c7c971$ce91d660$6bb58320$@it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
	<001601c7c971$ce91d660$6bb58320$@it>
Message-ID: <46A4F15B.6090503@c-net.it>

Federico Santulli ha scritto:
> I already made a lot of lockdown fixes so, I'm searching for other solutions
> and test.
>   

post your fixes as a diff file from the latest tarball please

Sergio Chersovani


From mlists at c-net.it  Mon Jul 23 20:23:30 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Mon, 23 Jul 2007 20:23:30 +0200
Subject: [Chan-sccp-users] Improving the BLF function on 7914/7961
In-Reply-To: <7270994.1184845492292.JavaMail.root@mail.linkdc.co.uk>
References: <7270994.1184845492292.JavaMail.root@mail.linkdc.co.uk>
Message-ID: <46A4F222.6030400@c-net.it>

Martin Sutherland ha scritto:
> Dear list members,
>
> I would like to improve the BLF function in chan_sccp. At the moment, 
> the use of the lights is very basic.
There are no ways to extend the BLF functions unless someone can reverse 
engineering the Cisco Skinny protocol

or maybe you can ask Cisco System to give us the protocol documentation :-)

Sergio Chersovani


From mlists at c-net.it  Mon Jul 23 20:33:33 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Mon, 23 Jul 2007 20:33:33 +0200
Subject: [Chan-sccp-users] I've finally had to give up with chan_sccp
In-Reply-To: <56a990d20707041247laab8781nc683fa2519b470e3@mail.gmail.com>
References: <21105065.1183574296512.JavaMail.root@mail.linkdc.co.uk>
	<56a990d20707041247laab8781nc683fa2519b470e3@mail.gmail.com>
Message-ID: <46A4F47D.2050206@c-net.it>

Lacy Moore - Aspendora ha scritto:
> That's just one of the many things...
>   

you have to keep in mind that there's no documentation about the Skinny 
protocol, so we can reach stability working on code, but it's really 
hard to add new new features

Sergio Chersovani


From mlists at c-net.it  Mon Jul 23 20:43:53 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Mon, 23 Jul 2007 20:43:53 +0200
Subject: [Chan-sccp-users] CHAN FIXES
In-Reply-To: <001601c7c971$ce91d660$6bb58320$@it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
	<001601c7c971$ce91d660$6bb58320$@it>
Message-ID: <46A4F6E9.1000405@c-net.it>


I was taking a look to the federico's patch about the 8.0.5 firmware issue
http://www.nhm.it/sccp_indicate_patch_load_805.patch

the sccp_channel_set_callstate function and relative skinny command is 
important for the phone 'cause it changes its state

anyway the only problem of the 8.0.5 firmware is a different length of 
the callstate packet on the new protocol version provided with the new 
firmware. This is the real reason for the firmware issues

so you just need to find the exact packet length that we need to send to 
the phone

how?

find a callmanager software plug a hub in the middle and start capping 
the network traffic

Sergio



From ramos at finetooth.com  Mon Jul 23 21:58:07 2007
From: ramos at finetooth.com (Ryan Amos)
Date: Mon, 23 Jul 2007 14:58:07 -0500
Subject: [Chan-sccp-users] Cisco 7910 Phone Off-Hook/Handset Problem
In-Reply-To: <583-SnapperMsg4B489B01C2C9FE1B@68.244.132.54>
References: Message-ID: <583-SnapperMsg4B489B01C2C9FE1B@68.244.132.54>
Message-ID: <40D61B17A5E5434E82EBFA1100796152F4E1AD@exchange.finetooth.com>

Were the phones purchased off eBay? You'd be surprised at how
disreputable a lot of eBay sellers are; I've gotten a set of 7912s that
had been smoke damaged and the seller just wiped them down and put them
on eBay 'as is' (they reeked of smoke, though they worked.) You could
have run into a similar situation (which would explain why so many were
not working.)

-----Original Message-----
From: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of Darrell
Benvenuto
Sent: Monday, July 23, 2007 1:41 AM
To: chan-sccp-users at lists.berlios.de
Subject: [Chan-sccp-users] Cisco 7910 Phone Off-Hook/Handset Problem

The problem indeed lay with the contacts on each phone's off-hook
switch. 
Retensioning the spring and cleaning the contacts fixed every single one
of them.

-- Darrell
_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From s.lam at keenserver.nl  Tue Jul 24 12:29:55 2007
From: s.lam at keenserver.nl (Steven Lam, KeenServer)
Date: Tue, 24 Jul 2007 12:29:55 +0200
Subject: [Chan-sccp-users] CHAN FIXES
Message-ID: <E0EC7D6DD04A614BB52E24FB6735F22414FAF6@goofy.bison.keenserver.nl>

>find a callmanager software plug a hub in the middle and start capping
the network traffic

I can do that, what exact are you looking for?

Steven.


From tron at acm.org  Tue Jul 24 12:05:42 2007
From: tron at acm.org (Carlos G Mendioroz)
Date: Tue, 24 Jul 2007 07:05:42 -0300
Subject: [Chan-sccp-users] Improving the BLF function on 7914/7961
In-Reply-To: <46A4F222.6030400@c-net.it>
References: <7270994.1184845492292.JavaMail.root@mail.linkdc.co.uk>
	<46A4F222.6030400@c-net.it>
Message-ID: <46A5CEF6.2080008@acm.org>

That holds true for the whole thing, doesn't it ?

Sergio Chersovani @ 23/07/2007 15:23 -0300 dixit:
> Martin Sutherland ha scritto:
>> Dear list members,
>>
>> I would like to improve the BLF function in chan_sccp. At the moment, 
>> the use of the lights is very basic.
> There are no ways to extend the BLF functions unless someone can reverse 
> engineering the Cisco Skinny protocol
> 
> or maybe you can ask Cisco System to give us the protocol documentation :-)
> 
> Sergio Chersovani
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> 

-- 
Carlos G Mendioroz  <tron at acm.org>


From mlists at c-net.it  Tue Jul 24 13:09:43 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Tue, 24 Jul 2007 13:09:43 +0200
Subject: [Chan-sccp-users] CHAN FIXES
In-Reply-To: <E0EC7D6DD04A614BB52E24FB6735F22414FAF6@goofy.bison.keenserver.nl>
References: <E0EC7D6DD04A614BB52E24FB6735F22414FAF6@goofy.bison.keenserver.nl>
Message-ID: <46A5DDF7.4010706@c-net.it>

Steven Lam, KeenServer ha scritto:
>> find a callmanager software plug a hub in the middle and start capping
>>     
> the network traffic
>
> I can do that, what exact are you looking for?
>
> Steven.
>   
I need to know the CCM version
and then ethereal cap or tcpdump cap about
1) phone registration
2) anything you can do
3) place a call, hold, transfer, etc.

sergio


From mlists at c-net.it  Tue Jul 24 10:56:45 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Tue, 24 Jul 2007 10:56:45 +0200
Subject: [Chan-sccp-users] CHAN FIXES
In-Reply-To: <001601c7c971$ce91d660$6bb58320$@it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
	<001601c7c971$ce91d660$6bb58320$@it>
Message-ID: <46A5BECD.8020007@c-net.it>

Federico Santulli ha scritto:
> I already made a lot of lockdown fixes so, I'm searching for other solutions
> and test.
>   

post your fixes as a diff file from the latest tarball please

Sergio Chersovani




From mlists at c-net.it  Tue Jul 24 10:56:53 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Tue, 24 Jul 2007 10:56:53 +0200
Subject: [Chan-sccp-users] I've finally had to give up with chan_sccp
In-Reply-To: <56a990d20707041247laab8781nc683fa2519b470e3@mail.gmail.com>
References: <21105065.1183574296512.JavaMail.root@mail.linkdc.co.uk>
	<56a990d20707041247laab8781nc683fa2519b470e3@mail.gmail.com>
Message-ID: <46A5BED5.9020403@c-net.it>

Lacy Moore - Aspendora ha scritto:

> That's just one of the many things...
>   

you have to keep in mind that there's no documentation about the Skinny
protocol, so we can reach stability working on code, but it's really
hard to add new new features

Sergio Chersovani




From mlists at c-net.it  Tue Jul 24 10:56:49 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Tue, 24 Jul 2007 10:56:49 +0200
Subject: [Chan-sccp-users] Improving the BLF function on 7914/7961
In-Reply-To: <7270994.1184845492292.JavaMail.root@mail.linkdc.co.uk>
References: <7270994.1184845492292.JavaMail.root@mail.linkdc.co.uk>
Message-ID: <46A5BED1.9020603@c-net.it>

Martin Sutherland ha scritto:
> Dear list members,
>
> I would like to improve the BLF function in chan_sccp. At the moment, 
> the use of the lights is very basic.

There are no ways to extend the BLF functions unless someone can reverse
engineering the Cisco Skinny protocol

or maybe you can ask Cisco System to give us the protocol documentation :-)

Sergio Chersovani




From darrell at collisionstudios.com  Tue Jul 24 19:55:16 2007
From: darrell at collisionstudios.com (Darrell Benvenuto)
Date: Tue, 24 Jul 2007 10:55:16 -0700
Subject: [Chan-sccp-users] Cisco 7910 Phone Off-Hook/Handset Problem
In-Reply-To: <mailman.55.1185271259.9370.chan-sccp-users@lists.berlios.de>
References: <mailman.55.1185271259.9370.chan-sccp-users@lists.berlios.de>
Message-ID: <006c01c7ce1b$cbb341f0$6319c5d0$@com>

> Were the phones purchased off eBay? 

Yes. However, at an excellent price -- a mere $9.99 apiece. Despite the
annoyance at the handset issue, now that I have solved the problem, getting
20 phones in good cosmetic condition at this price was a real bargain.
Perhaps they thought to pass off broken phones, but in fixing them all in
this fashion I really did turn the tables and come out ahead.


From mlists at c-net.it  Tue Jul 24 10:57:02 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Tue, 24 Jul 2007 10:57:02 +0200
Subject: [Chan-sccp-users] CHAN FIXES
In-Reply-To: <001601c7c971$ce91d660$6bb58320$@it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
	<001601c7c971$ce91d660$6bb58320$@it>
Message-ID: <46A5BEDE.9000001@c-net.it>


I was taking a look to the federico's patch about the 8.0.5 firmware issue
http://www.nhm.it/sccp_indicate_patch_load_805.patch

the sccp_channel_set_callstate function and relative skinny command is
important for the phone 'cause it changes its state

anyway the only problem of the 8.0.5 firmware is a different length of
the callstate packet on the new protocol version provided with the new
firmware. This is the real reason for the firmware issues

so you just need to find the exact packet length that we need to send to
the phone

how?

find a callmanager software plug a hub in the middle and start capping
the network traffic

Sergio





From Marcello.Ceschia at gmx.net  Tue Jul 24 22:37:15 2007
From: Marcello.Ceschia at gmx.net (Ceschia, Marcello)
Date: Tue, 24 Jul 2007 22:37:15 +0200
Subject: [Chan-sccp-users] a tiny feature
In-Reply-To: <006c01c7ce1b$cbb341f0$6319c5d0$@com>
References: <mailman.55.1185271259.9370.chan-sccp-users@lists.berlios.de>
	<006c01c7ce1b$cbb341f0$6319c5d0$@com>
Message-ID: <200707242237.15682.Marcello.Ceschia@gmx.net>

Hi,

from the ip-phone-forum.de I was asked if it is posible to use the private 
button to hide CID.
So I did a small patch to get a variable within the extensions.conf


Marcello

-------------- next part --------------
A non-text attachment was scrubbed...
Name: setPrivateVar_20060408.patch.txt
Type: text/x-diff
Size: 1122 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070724/7c411564/attachment.diff>

From davidded at davidded.de  Wed Jul 25 01:10:07 2007
From: davidded at davidded.de (David Dederscheck)
Date: Wed, 25 Jul 2007 01:10:07 +0200
Subject: [Chan-sccp-users] Improving the BLF function on 7914/7961
In-Reply-To: <001501c7ca02$9b1f65e0$d15e31a0$@Ceschia@gmx.net>
References: <7270994.1184845492292.JavaMail.root@mail.linkdc.co.uk>
	<001501c7ca02$9b1f65e0$d15e31a0$@Ceschia@gmx.net>
Message-ID: <179C4E92-B4AC-4BB3-85ED-72D6D38429FF@davidded.de>

Hi Marcello,

I'm very keen to have a look at this patch. Actually I'm also very  
interested about improving the BLF function, and I believe the key is  
in using shared lines. But that's another story.

Actually, Anthony and I already restarted the project. But in spite  
of the promises we made, neither of us seemed to have enough time to  
work on it again. This is mainly for three reasons:

1. We didn't make it to create a new release, containing all known  
good patches yet. That has to be done to start on a solid basis. We  
wanted to have this ready to ease the transition to a 1.4 fork. In  
spite of this course, we mainly examined some patches which already  
made it to 1.4. Without many results at the beginning, there is  
little motivation to proceed.  We should push this work to make it  
more tempting to improve.

2. Not enough people on this list are aware of the new project on  
sourceforge. There's another list that we should make more use of:

http://sourceforge.net/projects/chan-sccp-b/

3. Anthony and I hadn't probably haven't had enough time (Sounds like  
the usual excuse).

Chan_sccp is a great and very usable piece of work by Sergio, which  
is far too usable and promising to let it wither of old age. Only the  
compatibility to new firmware versions and devices (like the 7936  
conference station, for instance), can retain its usability, however.

What do you think?


Kind regards,
-David


On 19.07.2007, at 14:44, Marcello Ceschia wrote:

> I started implementing a version which can tranfer calls without  
> answering the call.
>
> Unfortunately the version have some bugs and within the last 2  
> month I had no time to continuing the project.
>
>
>
> Would be great if we can restart the chan_sccp-project.
>
>
>
>  Marcello
>
>
>
> Von: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp- 
> users-bounces at lists.berlios.de] Im Auftrag von Martin Sutherland
> Gesendet: Donnerstag, 19. Juli 2007 13:45
> An: chan-sccp-users at lists.berlios.de
> Betreff: [Chan-sccp-users] Improving the BLF function on 7914/7961
>
>
>
> Dear list members,
>
> I would like to improve the BLF function in chan_sccp. At the  
> moment, the use of the lights is very basic.
>
> For example:
>
> If a key is defined as a directory number, then
>
> No light - phone not plugged in or has DND or agent not logged in
> Green light - available to take a call, not on DND, agent logged in
> Flashing green - ringing
> Amber - in use but not private
> Amber flashing - in use but call placed on hold
> Red - in use but private
> Red flashing - in use but call placed on hold
>
> If a key is defined as a line then - not sure
>
> What would also be nice is to allow the operator to send an  
> incoming call direct to the recipients voicemail eg. I'm sorry xxxx  
> is on the phone/holiday/ill, would you like to leave a message on  
> his/hers voicemail? This no doubt requires some Asterisk handling too.
>
>
> Regards,
>
> Martin
>
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From davidded at davidded.de  Wed Jul 25 01:18:36 2007
From: davidded at davidded.de (David Dederscheck)
Date: Wed, 25 Jul 2007 01:18:36 +0200
Subject: [Chan-sccp-users] No Received Calls Records
	7940/60/70chan_sccp/asterisk 1.2.16 / trixbox 2
In-Reply-To: <F7B2AB32C2D1574B98FB144C5E76A3F005DB701B@svrlae2k3.nationsholdinggroup.com>
References: <F7B2AB32C2D1574B98FB144C5E76A3F005DB701B@svrlae2k3.nationsholdinggroup.com>
Message-ID: <861E9A04-D900-478C-A785-FEBBA0B9604C@davidded.de>

Hi,

concerning that invalid extension bug I have found some clues as I  
had to deal with it.

What has to be done is uncommenting the call which issues the  
callstate notification, which is btw not neccessary even for older  
firmware versions:

/* 7936 does not like the skinny ivalid message callstate */
                 if (d->skinny_type != SKINNY_DEVICETYPE_CISCO7936)
                 	sccp_channel_set_callstate(c,  
SKINNY_CALLSTATE_INVALIDNUMBER);

It suffices looking for the above snipped and yanking out just that.


However, what I haven't solved yet is the empty received calls list.  
I'd really like to get this working for my 7961.

Any clues from any of you so far?


Regards,
-David


On 20.03.2007, at 17:50, Hughes, Sam wrote:

> No, to see if you are affected by that bug dial an invalid  
> extension or
> just # (digittimeoutchar).  On newer firmwares the phone will lock  
> up if
> you don't have an i extensions defined in extensions.conf.
>
> I've had the best luck with 8.0.1.  It plays nicer with the Open 79XX
> XML directory than earlier versions and doesn't have the bugs of the
> later versions.  I haven't seen any added benefit to the newer  
> firmwares
> so you're not really giving anything up that I'm aware of.
>
> -----Original Message-----
> From: chan-sccp-users-bounces at lists.berlios.de
> [mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of  
> Steve J.
> Walker
> Sent: Tuesday, March 20, 2007 9:38 AM
> To: chan-sccp-users at lists.berlios.de
> Subject: Re: [Chan-sccp-users] No Received Calls Records
> 7940/60/70chan_sccp/asterisk 1.2.16 / trixbox 2
>
> Hi Sam,
>
> We are running SCCP FW version P00308000500. So from what you are  
> saying
> this is pretty much busted in that regard then.
>
> Bummer. Time to visit CCO and grab 8.0.1, is that the most stable for
> these phones with *, I have noticed people keep on about 7.2? is that
> recommended or just what people have found works well?
>
> I must say we don't "have" any issues with that FW above other than  
> what
> I noticed. Unless it explains the crash when you leave it off the  
> hook?
>
> Regards,
>
> Steve
>
>> -----Original Message-----
>> From: chan-sccp-users-bounces at lists.berlios.de
> [mailto:chan-sccp-users-
>> bounces at lists.berlios.de] On Behalf Of Hughes, Sam
>> Sent: 20 March 2007 16:22
>> To: chan-sccp-users at lists.berlios.de
>> Subject: Re: [Chan-sccp-users] No Received Calls Records
>> 7940/60/70chan_sccp /asterisk 1.2.16 / trixbox 2
>>
>> I have seen this in every 7960 firmware version after 8.0.1.  I keep
> my
>> 7960s at this version to avoid this bug and the invalid extension
>> crash.
>>
>> -----Original Message-----
>
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From davidded at davidded.de  Wed Jul 25 01:27:09 2007
From: davidded at davidded.de (David Dederscheck)
Date: Wed, 25 Jul 2007 01:27:09 +0200
Subject: [Chan-sccp-users] Getting it together with chan_sccp
In-Reply-To: <20070719173455.2AF1E68C48@mail.berlios.de>
References: <20070719173455.2AF1E68C48@mail.berlios.de>
Message-ID: <D5B34F25-2673-428B-82FD-7DD9B94B00AF@davidded.de>

Hi,

I'd like to test that as well, especially as I'm also working on some  
patches that shall be incorporated in Anthony's and mine project on  
sourceforge, continuing the chan_sccp project. I would be very happy  
to gain dmitry and his work for this project as well.

I have about 10x7960/7940, 2x7920, 1x7961, 1x7910 and 1x7936. For  
further testing I could also add a 7905 and 7912 as well as an  
ancient SP12.

-David


On 19.07.2007, at 19:35, Paul wrote:

> If you don?t mind posting it somewhere I?d like to give it a go as  
> well.
>
> I have 1x7970 and 3x7960s.
>
> Thanks
>
> From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp- 
> users-bounces at lists.berlios.de] On Behalf Of Martin Sutherland
> Sent: Thursday, July 19, 2007 6:18 AM
> To: chan-sccp-users at lists.berlios.de
> Subject: [Chan-sccp-users] Getting it together with chan_sccp
>
>
>
> Dear list members,
>
> I've been emailed a version of chan_sccp-20070620 from  
> dmitry at makuha.kiev.ua which has changes in several files. I'm about  
> to start testing with 32 handsets (18x7640, 12x7960,2x7961), 11 E1  
> lines, paging, parking etc with Asterisk 1.2.x.
>
> Regards,
>
> Martin
>
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From galium123 at hotmail.com  Wed Jul 25 08:44:19 2007
From: galium123 at hotmail.com (Andreas Anderson)
Date: Wed, 25 Jul 2007 06:44:19 +0000
Subject: [Chan-sccp-users] CHAN FIXES
Message-ID: <BAY109-F29F4437941FA485E073D68E4F10@phx.gbl>

Hello Sergio,
Hello Everyone,

Great to see you back :-)

Here's a patch against chan_sccp-20060408. I've applyed various patches that 
where posted somewhere and done some fixes, mainly to keep it working with 
the current asterisk 1.4 branch from svn. It works for me, but don't blame 
me if it set's your cat on fire ;-)

it also includes the use-private-button-to-restrict-number-patch Marcello 
added, thank you very much for that ;-)


Regards,


Andreas

_________________________________________________________________
Live Search delivers results the way you like it. Try live.com now! 
http://www.live.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: chan_sccp-20060408-20070725.diff
Type: application/octet-stream
Size: 31991 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070725/d2234306/attachment.obj>

From mobile at nhm.it  Thu Jul 26 09:19:25 2007
From: mobile at nhm.it (Federico Santulli)
Date: Thu, 26 Jul 2007 09:19:25 +0200
Subject: [Chan-sccp-users] R:  CHAN FIXES
In-Reply-To: <46A5BEDE.9000001@c-net.it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
	<001601c7c971$ce91d660$6bb58320$@it> <46A5BEDE.9000001@c-net.it>
Message-ID: <002701c7cf55$4ceb3040$e6c190c0$@it>

I made that patch to get it working, btw, there should be a packet to see
which protocol to use, as we should know before sending packets.

For this issue (protocol packets length) there was a patch for chan_skinny
so, take a look on

http://bugs.digium.com/view.php?id=9887

about send_callinfo and set_callstate them should be called with that order
and not reversed 
as specified somewhere in the code.

Cisco 79x1 phones uses to keep record of call there was a patch somewhere
but now I can't find it.

It uses SET_CALLSTATE to CONNECTED somewhere to record the call info.

Please let me know if this message was usefull.

BTW, we should find and fix all deadlocks before adding new features. 

-----Messaggio originale-----
Da: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] Per conto di Sergio
Chersovani
Inviato: marted? 24 luglio 2007 10.57
A: chan-sccp-users at lists.berlios.de
Oggetto: Re: [Chan-sccp-users] CHAN FIXES


I was taking a look to the federico's patch about the 8.0.5 firmware issue
http://www.nhm.it/sccp_indicate_patch_load_805.patch

the sccp_channel_set_callstate function and relative skinny command is
important for the phone 'cause it changes its state

anyway the only problem of the 8.0.5 firmware is a different length of
the callstate packet on the new protocol version provided with the new
firmware. This is the real reason for the firmware issues

so you just need to find the exact packet length that we need to send to
the phone

how?

find a callmanager software plug a hub in the middle and start capping
the network traffic

Sergio



_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From mobile at nhm.it  Thu Jul 26 11:44:08 2007
From: mobile at nhm.it (Federico Santulli)
Date: Thu, 26 Jul 2007 11:44:08 +0200
Subject: [Chan-sccp-users] To Sergio's Attention: About New Protocol
In-Reply-To: <002701c7cf55$4ceb3040$e6c190c0$@it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
	<001601c7c971$ce91d660$6bb58320$@it> <46A5BEDE.9000001@c-net.it>
	<002701c7cf55$4ceb3040$e6c190c0$@it>
Message-ID: <000001c7cf69$83cb6850$8b6238f0$@it>

About new protocol there seems to be present for each callstate packet non
just padding bytes but some more new fields. Two of them are: line instance
and call reference number.

Take a look on 

http://bugs.digium.com/view.php?id=10291
http://bugs.digium.com/view.php?id=9887

So we should first update all state message structures than investigate on
how to use both those values.

Let me know



From mobile at nhm.it  Thu Jul 26 11:45:21 2007
From: mobile at nhm.it (Federico Santulli)
Date: Thu, 26 Jul 2007 11:45:21 +0200
Subject: [Chan-sccp-users] To Sergio's Attention: About New Protocol
In-Reply-To: <002701c7cf55$4ceb3040$e6c190c0$@it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>
	<001601c7c971$ce91d660$6bb58320$@it> <46A5BEDE.9000001@c-net.it>
	<002701c7cf55$4ceb3040$e6c190c0$@it>
Message-ID: <000101c7cf69$af321840$0d9648c0$@it>

About new protocol there seems to be present for each callstate packet non
just padding bytes but some more new fields. Two of them are: line instance
and call reference number.

Take a look on 

http://bugs.digium.com/view.php?id=10291
http://bugs.digium.com/view.php?id=9887

So we should first update all state message structures than investigate on
how to use both those values.

Let me know



From mlists at c-net.it  Thu Jul 26 15:17:01 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Thu, 26 Jul 2007 15:17:01 +0200
Subject: [Chan-sccp-users] To Sergio's Attention: About New Protocol
In-Reply-To: <000101c7cf69$af321840$0d9648c0$@it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>	<001601c7c971$ce91d660$6bb58320$@it>
	<46A5BEDE.9000001@c-net.it>	<002701c7cf55$4ceb3040$e6c190c0$@it>
	<000101c7cf69$af321840$0d9648c0$@it>
Message-ID: <46A89ECD.6030506@c-net.it>

Federico Santulli ha scritto:
> http://bugs.digium.com/view.php?id=10291
> http://bugs.digium.com/view.php?id=9887
>   

la maggior parte delle patch qui incluse sono state prese dal chan_sccp 
dopo che avevo risistemato la struttura dei pacchetti facendo 
analizzando i cap di CCM

mi pare che non abbiano aggiunto nulla di nuovo na questa sera controllo 
meglio

I punti deboli di chan_sccp sono l'hangup e lo start_channel

lo start_channel l'ho strutturato cos? perch? il chan_skinny genera un 
nuovo processo per ogni telefono registrato... poco scalabile in una 
contesto di gran numero di telefoni

il chan_sccp invece genera nuovi processi solo per le nuove chiamate


L'hangup ? un problema di asterisk. Quel codice non ? mai stato 
abbastanza stabile e preciso. parlo della ast_hangup

Ci vuole qualche idea su queste funzioni

Sergio

P.S.: ti avviso che tutte le patch che generi per chan_sccp te le 
ritroverai anche nel chan_skinny, hanno la brutta abitudine di scopiazzare



From hakan at nets.at  Thu Jul 26 15:21:52 2007
From: hakan at nets.at (Hakan Evirgen)
Date: Thu, 26 Jul 2007 15:21:52 +0200
Subject: [Chan-sccp-users] To Sergio's Attention: About New Protocol
In-Reply-To: <46A89ECD.6030506@c-net.it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>	<001601c7c971$ce91d660$6bb58320$@it>	<46A5BEDE.9000001@c-net.it>	<002701c7cf55$4ceb3040$e6c190c0$@it>	<000101c7cf69$af321840$0d9648c0$@it>
	<46A89ECD.6030506@c-net.it>
Message-ID: <04b801c7cf87$ef9e1dc0$ceda5940$@at>

Hi!

It would be nice to write in english only as everybody on this list can
profit from others mails. And AFAIK this list is intended for English only.

Regards,
Hakan

>-----Original Message-----
>From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-
>bounces at lists.berlios.de] On Behalf Of Sergio Chersovani
>Sent: Thursday, July 26, 2007 3:17 PM
>To: chan-sccp-users at lists.berlios.de
>Subject: Re: [Chan-sccp-users] To Sergio's Attention: About New Protocol
>
>Federico Santulli ha scritto:
>> http://bugs.digium.com/view.php?id=10291
>> http://bugs.digium.com/view.php?id=9887
>>
>
>la maggior parte delle patch qui incluse sono state prese dal chan_sccp
>dopo che avevo risistemato la struttura dei pacchetti facendo
>analizzando i cap di CCM
>
>mi pare che non abbiano aggiunto nulla di nuovo na questa sera controllo
>meglio
>
>I punti deboli di chan_sccp sono l'hangup e lo start_channel
>
>lo start_channel l'ho strutturato cos? perch? il chan_skinny genera un
>nuovo processo per ogni telefono registrato... poco scalabile in una
>contesto di gran numero di telefoni
>
>il chan_sccp invece genera nuovi processi solo per le nuove chiamate
>
>
>L'hangup ? un problema di asterisk. Quel codice non ? mai stato
>abbastanza stabile e preciso. parlo della ast_hangup
>
>Ci vuole qualche idea su queste funzioni
>
>Sergio
>
>P.S.: ti avviso che tutte le patch che generi per chan_sccp te le
>ritroverai anche nel chan_skinny, hanno la brutta abitudine di
>scopiazzare
>
>_______________________________________________
>Chan-sccp-users mailing list
>Chan-sccp-users at lists.berlios.de
>https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From mlists at c-net.it  Thu Jul 26 15:22:07 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Thu, 26 Jul 2007 15:22:07 +0200
Subject: [Chan-sccp-users] To Sergio's Attention: About New Protocol
In-Reply-To: <46A89ECD.6030506@c-net.it>
References: <03FDC7A639326744925F8EB885247BAF861E76@THEBRAIN1.drs.ca>	<001601c7c971$ce91d660$6bb58320$@it>	<46A5BEDE.9000001@c-net.it>	<002701c7cf55$4ceb3040$e6c190c0$@it>	<000101c7cf69$af321840$0d9648c0$@it>
	<46A89ECD.6030506@c-net.it>
Message-ID: <46A89FFF.70505@c-net.it>

Sergio Chersovani ha scritto:
> Federico Santulli ha scritto:
>   
>> http://bugs.digium.com/view.php?id=10291
>> http://bugs.digium.com/view.php?id=9887
>>   
>>     
>
> la maggior parte delle patch qui incluse sono state prese dal chan_sccp
>   

Sorry guys, it wasn't for the list.

I was talking to Federico using my native language

Sergio


From SteveW at bucks.net  Thu Jul 26 17:06:14 2007
From: SteveW at bucks.net (Steve J. Walker)
Date: Thu, 26 Jul 2007 16:06:14 +0100
Subject: [Chan-sccp-users] chan_sccp patch - hangup on transfer and some
	other small tweaks
Message-ID: <792897337FC81944BA4097ABD7089771039C76D5@pdc.bnsnet.co.uk>

Hi all,

A couple of tweaks we did to our chan_sccp to emulate our old system.
The "hang up" to transfer was really useful.

Might be useful for someone.

Regards,

Steve 


--
------------------------------------------------------------------------
Steve Walker       | Bucks Net Services Limited  | http://www.bucks.net
Technical Support  | 27 & 30 Edison Road         | support at bucks.net
------------------------------------------------------------------------


-------------- next part --------------
A non-text attachment was scrubbed...
Name: patch07.diff
Type: application/octet-stream
Size: 4593 bytes
Desc: patch07.diff
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070726/0adb6759/attachment.obj>

From root at nizon.ca  Fri Jul 27 07:46:41 2007
From: root at nizon.ca (Paul R)
Date: Fri, 27 Jul 2007 00:46:41 -0500
Subject: [Chan-sccp-users] Shared lines
Message-ID: <20070727054527.BF0A725605@mail.berlios.de>

Is anyone by chance working on shared line support?

We have an asterisk+chan_sccp setup that we put together for an apartment
building office.

One thing they would like to be able to do is place a call on hold and pick
it up at any phone

 

Another neat feature would be the "conf" softkey. Has anyone been able to
get it working?

 

Thanks

-Paul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070727/fe570df1/attachment.html>

From Marcello.Ceschia at gmx.net  Fri Jul 27 08:24:05 2007
From: Marcello.Ceschia at gmx.net (Marcello Ceschia)
Date: Fri, 27 Jul 2007 08:24:05 +0200
Subject: [Chan-sccp-users] Shared lines
In-Reply-To: <20070727054527.BF0A725605@mail.berlios.de>
References: <20070727054527.BF0A725605@mail.berlios.de>
Message-ID: <20070727062405.21650@gmx.net>

> One thing they would like to be able to do is place a call on hold and
> pick
> it up at any phone

That should be no problem and just working right now -> use the GPickUp key

 Marcello

P.S.: I can post my shared line version for asterisk 1.4, but it is buggy at the moment.

-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail


From root at nizon.ca  Fri Jul 27 08:34:43 2007
From: root at nizon.ca (Paul R)
Date: Fri, 27 Jul 2007 01:34:43 -0500
Subject: [Chan-sccp-users] Shared lines
In-Reply-To: <20070727062405.21650@gmx.net>
Message-ID: <20070727063329.A64527D099@mail.berlios.de>

Post away, I'd like to try it out.
-Paul

-----Original Message-----
From: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of Marcello
Ceschia
Sent: Friday, July 27, 2007 1:24 AM
To: chan-sccp-users at lists.berlios.de
Subject: Re: [Chan-sccp-users] Shared lines

> One thing they would like to be able to do is place a call on hold and
> pick
> it up at any phone

That should be no problem and just working right now -> use the GPickUp key

 Marcello

P.S.: I can post my shared line version for asterisk 1.4, but it is buggy at
the moment.

-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail
_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From mlists at c-net.it  Fri Jul 27 11:04:55 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Fri, 27 Jul 2007 11:04:55 +0200
Subject: [Chan-sccp-users] Shared lines
In-Reply-To: <20070727054527.BF0A725605@mail.berlios.de>
References: <20070727054527.BF0A725605@mail.berlios.de>
Message-ID: <46A9B537.3040006@c-net.it>

Paul R ha scritto:
>
> One thing they would like to be able to do is place a call on hold and 
> pick it up at any phone
>

This is the park feature

Sergio


From root at nizon.ca  Fri Jul 27 12:55:10 2007
From: root at nizon.ca (Paul)
Date: Fri, 27 Jul 2007 05:55:10 -0500
Subject: [Chan-sccp-users] Shared lines
In-Reply-To: <46A9B537.3040006@c-net.it>
Message-ID: <20070727105356.BDF63F3EEC@mail.berlios.de>

The idea was to have it work like a key system instead of remembering park
extensions. You'd be surprised at how unbelievably stupid some old women
are.

-----Original Message-----
From: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of Sergio
Chersovani
Sent: Friday, July 27, 2007 4:05 AM
To: chan-sccp-users at lists.berlios.de
Subject: Re: [Chan-sccp-users] Shared lines

Paul R ha scritto:
>
> One thing they would like to be able to do is place a call on hold and 
> pick it up at any phone
>

This is the park feature

Sergio
_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From SteveW at bucks.net  Fri Jul 27 12:56:48 2007
From: SteveW at bucks.net (Steve J. Walker)
Date: Fri, 27 Jul 2007 11:56:48 +0100
Subject: [Chan-sccp-users] Shared lines
References: <20070727105356.BDF63F3EEC@mail.berlios.de>
Message-ID: <792897337FC81944BA4097ABD7089771039C76FD@pdc.bnsnet.co.uk>

Hi,

It is a shame when you park a call that the hint() cannot be monitored
for the park number so going to a phone that monitors the hint() for the
line can see the parked call number.

Might be something of use to extend park(), I assume that the hint() if
sccp's internal can be updated to suit?

But yes your right people can be stupid when it comes to something as
simple as remembering the number they just heard! You would not believe
the mess we had here going from 9 for a line to direct dialling once we
moved to * and SCCP! So many call logs with 9 this and 9 that in them!

Regards,

Steve 

> -----Original Message-----
> From: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-
> bounces at lists.berlios.de] On Behalf Of Paul
> Sent: 27 July 2007 11:55
> To: chan-sccp-users at lists.berlios.de
> Subject: Re: [Chan-sccp-users] Shared lines
> 
> The idea was to have it work like a key system instead of remembering
> park
> extensions. You'd be surprised at how unbelievably stupid some old
> women
> are.
> 
> -----Original Message-----
> From: chan-sccp-users-bounces at lists.berlios.de
> [mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of Sergio
> Chersovani
> Sent: Friday, July 27, 2007 4:05 AM
> To: chan-sccp-users at lists.berlios.de
> Subject: Re: [Chan-sccp-users] Shared lines
> 
> Paul R ha scritto:
> >
> > One thing they would like to be able to do is place a call on hold
> and
> > pick it up at any phone
> >
> 
> This is the park feature
> 
> Sergio
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> 
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From Marcello.Ceschia at gmx.net  Fri Jul 27 14:37:27 2007
From: Marcello.Ceschia at gmx.net (Marcello Ceschia)
Date: Fri, 27 Jul 2007 14:37:27 +0200
Subject: [Chan-sccp-users] Shared lines
In-Reply-To: <792897337FC81944BA4097ABD7089771039C76FD@pdc.bnsnet.co.uk>
References: <20070727105356.BDF63F3EEC@mail.berlios.de>
	<792897337FC81944BA4097ABD7089771039C76FD@pdc.bnsnet.co.uk>
Message-ID: <000901c7d04a$e461a3f0$ad24ebd0$@Ceschia@gmx.net>

I think it could be a hold-feature but no parking-feature.
Why should everyone hint a parking position? 
Also with the shared-line-feature it is not posible, because the device/line
lose the ownership of the parked channel.


 Marcello


-----Urspr?ngliche Nachricht-----
Von: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] Im Auftrag von Steve J.
Walker
Gesendet: Freitag, 27. Juli 2007 12:57
An: chan-sccp-users at lists.berlios.de
Betreff: Re: [Chan-sccp-users] Shared lines

Hi,

It is a shame when you park a call that the hint() cannot be monitored
for the park number so going to a phone that monitors the hint() for the
line can see the parked call number.

Might be something of use to extend park(), I assume that the hint() if
sccp's internal can be updated to suit?

But yes your right people can be stupid when it comes to something as
simple as remembering the number they just heard! You would not believe
the mess we had here going from 9 for a line to direct dialling once we
moved to * and SCCP! So many call logs with 9 this and 9 that in them!

Regards,

Steve 

> -----Original Message-----
> From: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-
> bounces at lists.berlios.de] On Behalf Of Paul
> Sent: 27 July 2007 11:55
> To: chan-sccp-users at lists.berlios.de
> Subject: Re: [Chan-sccp-users] Shared lines
> 
> The idea was to have it work like a key system instead of remembering
> park
> extensions. You'd be surprised at how unbelievably stupid some old
> women
> are.
> 
> -----Original Message-----
> From: chan-sccp-users-bounces at lists.berlios.de
> [mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of Sergio
> Chersovani
> Sent: Friday, July 27, 2007 4:05 AM
> To: chan-sccp-users at lists.berlios.de
> Subject: Re: [Chan-sccp-users] Shared lines
> 
> Paul R ha scritto:
> >
> > One thing they would like to be able to do is place a call on hold
> and
> > pick it up at any phone
> >
> 
> This is the park feature
> 
> Sergio
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> 
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From martin at linkdc.co.uk  Fri Jul 27 21:38:34 2007
From: martin at linkdc.co.uk (Martin Sutherland)
Date: Fri, 27 Jul 2007 20:38:34 +0100
Subject: [Chan-sccp-users] Confusion between Group pickup and parking
Message-ID: <17523796.1185565114041.JavaMail.root@mail.linkdc.co.uk>

Dear list members,

A while back I remember someone saying that Group pickup was related to parking and I just read another message on a similar motion. Unless I have completely missed the point, these are two very different things. Group pickup allows you to answer a call that is not actually ringing on your handset provided that your extension is an admin of a pickup group that contains an extension that is ringing - this facility is mostly provided within the channel driver - I am not sure if it works between channel drivers. 

Parking is an Asterisk feature that allow an active call to be moved to a virtual extension and then moved back to another real extension. This is used where a caller wants to hold for someone rather than use voicemail and allows the initial call handler to "detach" from the call. Paging is often used to alert the recipient that a call is parked for them. The call will however come back to the call handler after a specified amount of time.

As I understand, chan_sccp handles group pickup but does not get involved in parking calls or getting calls from a call park.

Please could more knowledgeable members agree or deny the above.

Regards,

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070727/94b1fab8/attachment.html>

From Marcello.Ceschia at gmx.net  Sat Jul 28 10:30:16 2007
From: Marcello.Ceschia at gmx.net (Marcello Ceschia)
Date: Sat, 28 Jul 2007 10:30:16 +0200
Subject: [Chan-sccp-users] Shared lines implementation
In-Reply-To: <17523796.1185565114041.JavaMail.root@mail.linkdc.co.uk>
References: <17523796.1185565114041.JavaMail.root@mail.linkdc.co.uk>
Message-ID: <20070728083016.257720@gmx.net>

Hi @all,

I started implementing shared line functionality to chan_sccp a few month ago.
For all who want help to solve the bugs: 

http://sccp.smilekom.de/chan_sccp-20070506-shared-line.rar


A the moment it is not useable for productive work!!!
The code is working with asterisk 1.4.9

nice weekend

 Marcello
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer


From mlists at c-net.it  Sat Jul 28 21:25:19 2007
From: mlists at c-net.it (Sergio Chersovani)
Date: Sat, 28 Jul 2007 21:25:19 +0200
Subject: [Chan-sccp-users] Shared lines implementation
In-Reply-To: <20070728083016.257720@gmx.net>
References: <17523796.1185565114041.JavaMail.root@mail.linkdc.co.uk>
	<20070728083016.257720@gmx.net>
Message-ID: <46AB981F.3050300@c-net.it>

Marcello Ceschia ha scritto:
> I started implementing shared line functionality to chan_sccp a few month ago.
>   

shared line feature can be emulated with the asterisk local channel driver

http://www.voip-info.org/wiki/view/Asterisk+local+channels

I'm running it in my office environment with no problems



From peder at networkoblivion.com  Sat Jul 28 22:11:03 2007
From: peder at networkoblivion.com (peder at networkoblivion.com)
Date: Sat, 28 Jul 2007 15:11:03 -0500 (CDT)
Subject: [Chan-sccp-users] Shared lines implementation
In-Reply-To: <46AB981F.3050300@c-net.it>
Message-ID: <25284288.181185653463079.JavaMail.root@ubuntubert>

How do you emulate it with the local channel driver?  I read that page and didn't see anything like that.

----- Original Message -----
From: "Sergio Chersovani" <mlists at c-net.it>
To: chan-sccp-users at lists.berlios.de
Cc: chan-sccp-b-discussion at lists.sourceforge.net
Sent: Saturday, July 28, 2007 2:25:19 PM (GMT-0600) America/Mexico_City
Subject: Re: [Chan-sccp-users] Shared lines implementation

Marcello Ceschia ha scritto:
> I started implementing shared line functionality to chan_sccp a few month ago.
>   

shared line feature can be emulated with the asterisk local channel driver

http://www.voip-info.org/wiki/view/Asterisk+local+channels

I'm running it in my office environment with no problems

_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From aspendora at gmail.com  Mon Jul 30 01:57:52 2007
From: aspendora at gmail.com (Lacy Moore - Aspendora)
Date: Sun, 29 Jul 2007 18:57:52 -0500
Subject: [Chan-sccp-users] No Received Calls Records
	7940/60/70chan_sccp/asterisk 1.2.16 / trixbox 2
In-Reply-To: <861E9A04-D900-478C-A785-FEBBA0B9604C@davidded.de>
References: <F7B2AB32C2D1574B98FB144C5E76A3F005DB701B@svrlae2k3.nationsholdinggroup.com>
	<861E9A04-D900-478C-A785-FEBBA0B9604C@davidded.de>
Message-ID: <56a990d20707291657t7c208fccr6f43a1f7127089d@mail.gmail.com>

Has anyone managed to get the received calls on a 7961 to work yet?
Everything else seems to be rock solid on a Asterisk 1.2 based system with
the various patches floating around.

Just haven't gotten the received calls to work...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070729/7448f5ca/attachment.html>

From shughes at nationsholdinggroup.com  Mon Jul 30 18:10:50 2007
From: shughes at nationsholdinggroup.com (Hughes, Sam)
Date: Mon, 30 Jul 2007 09:10:50 -0700
Subject: [Chan-sccp-users] Shared lines implementation
In-Reply-To: <25284288.181185653463079.JavaMail.root@ubuntubert>
Message-ID: <8410625353DBE14D966495050BD2C70A012836F6@svrlae2k3.nationsholdinggroup.com>

Asterisk 1.4 has a shared line appearance feature.  I've played around
with it a little.  It doesn't work if you dial a SCCP channel directly,
but you can dial a Local extension that calls the SCCP device.  

The problem I had with this is that the speeddials in Chan_SCCP won't
work if the line shows as busy.  Maybe someone has already fixed this.
I'm running  chan_sccp-20060408 but haven't kept up with all the
patches.

-----Original Message-----
From: chan-sccp-users-bounces at lists.berlios.de
[mailto:chan-sccp-users-bounces at lists.berlios.de] On Behalf Of
peder at networkoblivion.com
Sent: Saturday, July 28, 2007 1:11 PM
To: chan-sccp-users at lists.berlios.de
Subject: Re: [Chan-sccp-users] Shared lines implementation

How do you emulate it with the local channel driver?  I read that page
and didn't see anything like that.

----- Original Message -----
From: "Sergio Chersovani" <mlists at c-net.it>
To: chan-sccp-users at lists.berlios.de
Cc: chan-sccp-b-discussion at lists.sourceforge.net
Sent: Saturday, July 28, 2007 2:25:19 PM (GMT-0600) America/Mexico_City
Subject: Re: [Chan-sccp-users] Shared lines implementation

Marcello Ceschia ha scritto:
> I started implementing shared line functionality to chan_sccp a few
month ago.
>   

shared line feature can be emulated with the asterisk local channel
driver

http://www.voip-info.org/wiki/view/Asterisk+local+channels

I'm running it in my office environment with no problems

_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users

_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sla.pdf
Type: application/octet-stream
Size: 68499 bytes
Desc: sla.pdf
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070730/659023f8/attachment.obj>

From jzuber at drs.ca  Mon Jul 30 20:21:51 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Mon, 30 Jul 2007 14:21:51 -0400
Subject: [Chan-sccp-users] R:  chan_sccp and 7970
Message-ID: <03FDC7A639326744925F8EB885247BAF861E81@THEBRAIN1.drs.ca>

Ok I tried that firmware, I even installed the newest firmware available
form the cisco website (on July 28, 2007).  I tried also on a 7971, same
problem, when I go to place a new call, the actual number is never sent.  I
press the "Dial" softkey, and see it being highlighted, but it does not send
the digits, could this be a problem with my asterisk dialplan (and if so
then I'll have to go elsewhere for help)?  Or with my softkey templates?
Can anyone else with a 7970 confirm that when they enter digits to place a
call they see a blue screen pop up and show you the digits you are typing?
Thanks!

> -----Original Message-----
> From:	Steve J. Walker [SMTP:SteveW at bucks.net]
> Sent:	Friday, July 20, 2007 5:52 AM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] R:  chan_sccp and 7970
> 
> Hi,
> 
> We had problems with a  7970 and ended up using this load:
> 
> cnu70.2-7-6-26.sbn
> CVM70.2-0-2-26.sbn
> Jar70.2-9-2-26.sbn
> TERM70.7-0-3-0S.loads
> term70.default.loads
> term71.default.loads
> 
> Asterisk 1.2.18 and the last SCCP with a few tweaks to support hanging up
> a call to transfer - which echos our old PBK!
> 
> Never had a problem with it since.
> 
> Regards,
> 
> Steve 
> 
> > -----Original Message-----
> > From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-
> > bounces at lists.berlios.de] On Behalf Of Hakan Evirgen
> > Sent: 20 July 2007 8:30
> > To: chan-sccp-users at lists.berlios.de
> > Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
> > 
> > As the 7960 works fine, you can assume, that the configuration on the
> > Asterisk is ok.
> > 
> > You should really try to update the firmware on the 7970. I have also a
> > 7970
> > and since the update it works really fine.
> > 
> > >-----Original Message-----
> > >From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-
> > users-
> > >bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
> > >Sent: Thursday, July 19, 2007 8:53 PM
> > >To: 'chan-sccp-users at lists.berlios.de'
> > >Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
> > >
> > >Yes, I hooked up and configured a 7960 - works fine!
> > >
> > >The main difference I see is that when you dial on the 7970, a
> > "dialing"
> > >menu pops up and shows the digits you are pressing. As i stated in my
> > >original post, there are three softkeys for this menu, a cancel, a
> > >backspace
> > >(<<) and a Dial softkey, and the Dial softkey does not seem to do
> > >anything.
> > >The other two work as expected.
> > >
> > >> -----Original Message-----
> > >> From:	Hakan Evirgen [SMTP:hakan at nets.at]
> > >> Sent:	Thursday, July 19, 2007 2:37 PM
> > >> To:	chan-sccp-users at lists.berlios.de
> > >> Subject:	Re: [Chan-sccp-users] R:  chan_sccp and 7970
> > >>
> > >> Seems so that your phone is NOT sending any digit.
> > >>
> > >> Do you have the possibility to test another phone?
> > >>
> > >> Best regards,
> > >> Hakan Evirgen
> > >>
> > >>
> > >> >-----Original Message-----
> > >> >From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-
> > >users-
> > >> >bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
> > >> >Sent: Thursday, July 19, 2007 8:34 PM
> > >> >To: 'chan-sccp-users at lists.berlios.de'
> > >> >Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
> > >> >
> > >> >I get here, when I pick up the receiver, and I hear a  dial tone:
> > >> >
> > >> >    -- SEP0019563DD448: >> Got message OffHookMessage
> > >> >    -- SEP0019563DD448: Getting the active channel on device
> > >> >    -- SEP0019563DD448: Taken Offhook
> > >> >    -- SEP0019563DD448: The active line is 2002
> > >> >    -- SEP0019563DD448: Using line 2002
> > >> >    -- SEP0019563DD448: Getting the active channel on device
> > >> >    -- SEP0019563DD448: New channel number: 4 on line 2002
> > >> >    -- SEP0019563DD448: Set the active channel 4 on device
> > >> >    -- SEP0019563DD448: Indicate SCCP state (OffHook) on call 2002-
> > 4
> > >> >    -- SEP0019563DD448: Clear the display notify message
> > >> >    -- SEP0019563DD448: Clear the status prompt on line 0 and
> > callid 0
> > >> >    -- SEP0019563DD448: Send speaker mode 1
> > >> >    -- SEP0019563DD448: Send lamp mode LampOn(2) on line 1
> > >> >    -- SEP0019563DD448: Send and Set the call state OffHook(1) on
> > call
> > >4
> > >> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout
> > 0
> > >> >    -- SEP0019563DD448: Send softkeyset to OffHook(4) on line 1
> > and
> > >call
> > >> >4
> > >> >    -- SEP0019563DD448: Send activate call plane on line 1
> > >> >    -- SEP0019563DD448: Sending tone InsideDialTone (33)
> > >> >    -- SEP0019563DD448: Finish to indicate state SCCP (OffHook),
> > >SKINNY
> > >> >(OffHook) on call 2002-4
> > >> >    -- SEP0019563DD448: Global Capabilities: 4
> > >> >    -- SEP0019563DD448: format request: 268/4
> > >> >    -- SEP0019563DD448: Channel SCCP/2002-00000004, capabilities:
> > >DEVICE
> > >> >0x10c (ulaw|alaw|g729) NATIVE 0x10c (ulaw|alaw|g729) BEST 4 (ulaw)
> > >> >    -- SEP0019563DD448: Allocated asterisk channel 2002-4
> > >> >    -- SCCP: Looking for line 2002
> > >> >    -- SEP0019563DD448: found line 2002
> > >> >    -- SCCP: Asterisk asked for the state (2) of the line 2002
> > >> >    -- SEP0019563DD448: Set asterisk state OffHook (2) for call 4
> > >> >    -- GOT data SCCP/2002-00000004 (0x101aa5f0)
> > >> >    -- GOT line 2002
> > >> >    -- GOT device SEP0019563DD448
> > >> >    -- SEP0019563DD448: New call on line 2002
> > >> >    -- SEP0019563DD448: Set callingParty Name "7970 2002" on
> > channel 4
> > >> >    -- SEP0019563DD448: Set callingParty Number 2002 on channel 4
> > >> >    -- SEP0019563DD448: Waiting for the number to dial on channel
> > >2002-4
> > >> >
> > >> >And then the phone cuts out (times out), even though I have typed
> > my
> > >> >extension to dial, and have tried pressing the "dial" button, or
> > >setting
> > >> >my
> > >> >sccp.conf to force dial on # and pressing #, still no dice!  (note
> > >here,
> > >> >I
> > >> >went into chan_sccp.c and found this just before a do loop, I put
> > in
> > >an
> > >> >output of the ("testing : %s", c->dialnumber) or something along
> > those
> > >> >lines
> > >> >and it printed to the screen many times, but the dialnumber is
> > always
> > >> >blank).
> > >> >
> > >> >When the phone cuts out I get this:
> > >> >
> > >> >- SEP0019563DD448: Indicate SCCP state (Dialing) on call 2002-4
> > >> >    -- SEP0019563DD448: Stop tone on device
> > >> >    -- SEP0019563DD448: Send softkeyset to DigitsFoll(6) on line 1
> > >and
> > >> >call
> > >> >4
> > >> >    -- SEP0019563DD448: Clear the status prompt on line 1 and
> > callid 4
> > >> >    -- SCCP: Looking for line 2002
> > >> >    -- SEP0019563DD448: found line 2002
> > >> >    -- SCCP: Asterisk asked for the state (2) of the line 2002
> > >> >    -- SEP0019563DD448: Set asterisk state Dialing (3) for call 4
> > >> >    -- SEP0019563DD448: Finish to indicate state SCCP (Dialing),
> > >SKINNY
> > >> >(OffHook) on call 2002-4
> > >> >    -- SEP0019563DD448: Send and Set the call state Proceed(12) on
> > >call 4
> > >> >    -- SEP0019563DD448: Send callinfo for Outbound channel 4
> > >> >    -- SEP0019563DD448: Clear the status prompt on line 1 and
> > callid 4
> > >> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout
> > 0
> > >> >    -- SEP0019563DD448: Indicate SCCP state (InvalidNumber) on call
> > >2002-
> > >> >4
> > >> >    -- SEP0019563DD448: Sending tone ReorderTone (37)
> > >> >    -- SEP0019563DD448: Send and Set the call state
> > InvalidNumber(14)
> > >on
> > >> >call 4
> > >> >    -- SEP0019563DD448: Send callinfo for Outbound channel 4
> > >> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout
> > 0
> > >> >    -- SEP0019563DD448: Finish to indicate state SCCP
> > (InvalidNumber),
> > >> >SKINNY (InvalidNumber) on call 2002-4
> > >> >    -- SEP0019563DD448: return from the startchannel on exit
> > >> >
> > >> >Until I hang up.
> > >> >
> > >> >
> > >> >
> > >> >> -----Original Message-----
> > >> >> From:	Federico Santulli [SMTP:mobile at nhm.it]
> > >> >> Sent:	Wednesday, July 18, 2007 3:25 PM
> > >> >> To:	chan-sccp-users at lists.berlios.de
> > >> >> Subject:	[Chan-sccp-users] R:  chan_sccp and 7970
> > >> >>
> > >> >> Try to use the command "sccp debug" from asterisk console to see
> > >what
> > >> >is
> > >> >> happening on channel ;)
> > >> >>
> > >> >> Let us know.
> > >> >>
> > >> >>
> > >> >>
> > >> >>
> > >> >> -----Messaggio originale-----
> > >> >> Da: chan-sccp-users-bounces at lists.berlios.de
> > >> >> [mailto:chan-sccp-users-bounces at lists.berlios.de] Per conto di
> > >Zuber,
> > >> >> Jonathan
> > >> >> Inviato: mercoled? 18 luglio 2007 21.20
> > >> >> A: 'chan-sccp-users at lists.berlios.de'; 'Marcello.Ceschia at gmx.net'
> > >> >> Oggetto: Re: [Chan-sccp-users] chan_sccp and 7970
> > >> >>
> > >> >> I have it on full debug - asterisk is not seeing the digits I am
> > >> >pressing
> > >> >> at
> > >> >> all, however it sees the speedial digits (if i wait for the
> > dialtone
> > >> >> timeout
> > >> >> and then press speeddial it sends those digits, and asterisk
> > catches
> > >> >> them).
> > >> >> I set debug level in my sccp.conf to 10 and I run asterisk using
> > the
> > >> >> -vvvvvvvvvvgc command in console.
> > >> >>
> > >> >> > -----Original Message-----
> > >> >> > From:	Ceschia, Marcello [SMTP:Marcello.Ceschia at gmx.net]
> > >> >> > Sent:	Wednesday, July 18, 2007 2:34 PM
> > >> >> > To:	chan-sccp-users at lists.berlios.de
> > >> >> > Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
> > >> >> >
> > >> >> > Hello Jonathan,
> > >> >> >
> > >> >> > after reading your email, I tried to rebuild the problem.
> > >> >> > I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version
> > for
> > >> >> > asterisk
> > >> >> > 1.4.7. I have no problem using the dial-button.
> > >> >> > Do you have some logs on console (set verbose 4)?
> > >> >> >
> > >> >> >  Marcello
> > >> >> >
> > >> >> > Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
> > >> >> > > Hello all,
> > >> >> > >
> > >> >> > > 	Not sure if this is a chan_sccp issue or an Asterisk issue,
> > >> or
> > >> >maybe
> > >> >> > > just a cisco 7970 issue, but here it is:
> > >> >> > >
> > >> >> > > 	I have been working on this problem for a couple days now,
> > >> and
> > >> >was
> > >> >> > > looking for a little help.  I am running a Cisco 7970 IP
> > phone,
> > >> >using
> > >> >> > SCCP,
> > >> >> > > and a tftp server running Asterisk 1.4.6.  I have everything
> > >> >compiled,
> > >> >> a
> > >> >> > > new chan_sccp (the patched one that works with Asterisk
> > 1.4.4+),
> > >> >and
> > >> >> my
> > >> >> > > phones connect properly to Asterisk, speedials pop up and
> > >> >everything.
> > >> >> > The
> > >> >> > > speeddials even work! They will dial the extensions I
> > programmed
> > >> >into
> > >> >> > them
> > >> >> > > no problem.  However, when I try to just do a regular dial, a
> > >> >"dial"
> > >> >> > screen
> > >> >> > > pops up, shows me the digits I dialed, then does nothing.
> > This
> > >> >screen
> > >> >> > has 3
> > >> >> > > softbuttons, a cancel, a << (backspace) and a "Dial"
> > softbutton.
> > >> >The
> > >> >> > > cancel and << work just fine, but the Dial softbutton does
> > >nothing.
> > >> >I
> > >> >> > am
> > >> >> > > monitoring asterisk on full debug, and I see no indication
> > that
> > >it
> > >> >is
> > >> >> > > receiving the digits from the phone.
> > >> >> > >
> > >> >> > > 	Any help is much appreciated, and thanks in advance.
> > >> >> > >
> > >> >> > > Jonathan Zuber
> > >> >> > > _______________________________________________
> > >> >> > > Chan-sccp-users mailing list
> > >> >> > > Chan-sccp-users at lists.berlios.de
> > >> >> > > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >> >> > _______________________________________________
> > >> >> > Chan-sccp-users mailing list
> > >> >> > Chan-sccp-users at lists.berlios.de
> > >> >> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >> >> _______________________________________________
> > >> >> Chan-sccp-users mailing list
> > >> >> Chan-sccp-users at lists.berlios.de
> > >> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >> >>
> > >> >> _______________________________________________
> > >> >> Chan-sccp-users mailing list
> > >> >> Chan-sccp-users at lists.berlios.de
> > >> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >> >_______________________________________________
> > >> >Chan-sccp-users mailing list
> > >> >Chan-sccp-users at lists.berlios.de
> > >> >https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >>
> > >> _______________________________________________
> > >> Chan-sccp-users mailing list
> > >> Chan-sccp-users at lists.berlios.de
> > >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >_______________________________________________
> > >Chan-sccp-users mailing list
> > >Chan-sccp-users at lists.berlios.de
> > >https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > 
> > _______________________________________________
> > Chan-sccp-users mailing list
> > Chan-sccp-users at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users


From s.lam at keenserver.nl  Mon Jul 30 20:49:27 2007
From: s.lam at keenserver.nl (Steven Lam, KeenServer)
Date: Mon, 30 Jul 2007 20:49:27 +0200
Subject: [Chan-sccp-users] R:  chan_sccp and 7970
Message-ID: <E0EC7D6DD04A614BB52E24FB6735F22414FB0A@goofy.bison.keenserver.nl>

I use a 7970 with no problems, when i enter digits to place a call i see a blue popup screen that is showing the digits i type.
I use rather old firmware (70.7-0-2SR1S), i did have some problems with newer versions.
*1.2.14 / sccp 20060202

Steven.

-----Oorspronkelijk bericht-----
Van: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-bounces at lists.berlios.de] Namens Zuber, Jonathan
Verzonden: maandag 30 juli 2007 20:22
Aan: 'chan-sccp-users at lists.berlios.de'
Onderwerp: Re: [Chan-sccp-users] R: chan_sccp and 7970

Ok I tried that firmware, I even installed the newest firmware available form the cisco website (on July 28, 2007).  I tried also on a 7971, same problem, when I go to place a new call, the actual number is never sent.  I press the "Dial" softkey, and see it being highlighted, but it does not send the digits, could this be a problem with my asterisk dialplan (and if so then I'll have to go elsewhere for help)?  Or with my softkey templates?
Can anyone else with a 7970 confirm that when they enter digits to place a call they see a blue screen pop up and show you the digits you are typing?
Thanks!

> -----Original Message-----
> From:	Steve J. Walker [SMTP:SteveW at bucks.net]
> Sent:	Friday, July 20, 2007 5:52 AM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] R:  chan_sccp and 7970
> 
> Hi,
> 
> We had problems with a  7970 and ended up using this load:
> 
> cnu70.2-7-6-26.sbn
> CVM70.2-0-2-26.sbn
> Jar70.2-9-2-26.sbn
> TERM70.7-0-3-0S.loads
> term70.default.loads
> term71.default.loads
> 
> Asterisk 1.2.18 and the last SCCP with a few tweaks to support hanging 
> up a call to transfer - which echos our old PBK!
> 
> Never had a problem with it since.
> 
> Regards,
> 
> Steve
> 
> > -----Original Message-----
> > From: chan-sccp-users-bounces at lists.berlios.de 
> > [mailto:chan-sccp-users- bounces at lists.berlios.de] On Behalf Of 
> > Hakan Evirgen
> > Sent: 20 July 2007 8:30
> > To: chan-sccp-users at lists.berlios.de
> > Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
> > 
> > As the 7960 works fine, you can assume, that the configuration on 
> > the Asterisk is ok.
> > 
> > You should really try to update the firmware on the 7970. I have 
> > also a 7970 and since the update it works really fine.
> > 
> > >-----Original Message-----
> > >From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-
> > users-
> > >bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
> > >Sent: Thursday, July 19, 2007 8:53 PM
> > >To: 'chan-sccp-users at lists.berlios.de'
> > >Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
> > >
> > >Yes, I hooked up and configured a 7960 - works fine!
> > >
> > >The main difference I see is that when you dial on the 7970, a
> > "dialing"
> > >menu pops up and shows the digits you are pressing. As i stated in 
> > >my original post, there are three softkeys for this menu, a cancel, 
> > >a backspace
> > >(<<) and a Dial softkey, and the Dial softkey does not seem to do 
> > >anything.
> > >The other two work as expected.
> > >
> > >> -----Original Message-----
> > >> From:	Hakan Evirgen [SMTP:hakan at nets.at]
> > >> Sent:	Thursday, July 19, 2007 2:37 PM
> > >> To:	chan-sccp-users at lists.berlios.de
> > >> Subject:	Re: [Chan-sccp-users] R:  chan_sccp and 7970
> > >>
> > >> Seems so that your phone is NOT sending any digit.
> > >>
> > >> Do you have the possibility to test another phone?
> > >>
> > >> Best regards,
> > >> Hakan Evirgen
> > >>
> > >>
> > >> >-----Original Message-----
> > >> >From: chan-sccp-users-bounces at lists.berlios.de 
> > >> >[mailto:chan-sccp-
> > >users-
> > >> >bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
> > >> >Sent: Thursday, July 19, 2007 8:34 PM
> > >> >To: 'chan-sccp-users at lists.berlios.de'
> > >> >Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
> > >> >
> > >> >I get here, when I pick up the receiver, and I hear a  dial tone:
> > >> >
> > >> >    -- SEP0019563DD448: >> Got message OffHookMessage
> > >> >    -- SEP0019563DD448: Getting the active channel on device
> > >> >    -- SEP0019563DD448: Taken Offhook
> > >> >    -- SEP0019563DD448: The active line is 2002
> > >> >    -- SEP0019563DD448: Using line 2002
> > >> >    -- SEP0019563DD448: Getting the active channel on device
> > >> >    -- SEP0019563DD448: New channel number: 4 on line 2002
> > >> >    -- SEP0019563DD448: Set the active channel 4 on device
> > >> >    -- SEP0019563DD448: Indicate SCCP state (OffHook) on call 
> > >> > 2002-
> > 4
> > >> >    -- SEP0019563DD448: Clear the display notify message
> > >> >    -- SEP0019563DD448: Clear the status prompt on line 0 and
> > callid 0
> > >> >    -- SEP0019563DD448: Send speaker mode 1
> > >> >    -- SEP0019563DD448: Send lamp mode LampOn(2) on line 1
> > >> >    -- SEP0019563DD448: Send and Set the call state OffHook(1) 
> > >> > on
> > call
> > >4
> > >> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, 
> > >> > timeout
> > 0
> > >> >    -- SEP0019563DD448: Send softkeyset to OffHook(4) on line 1
> > and
> > >call
> > >> >4
> > >> >    -- SEP0019563DD448: Send activate call plane on line 1
> > >> >    -- SEP0019563DD448: Sending tone InsideDialTone (33)
> > >> >    -- SEP0019563DD448: Finish to indicate state SCCP (OffHook),
> > >SKINNY
> > >> >(OffHook) on call 2002-4
> > >> >    -- SEP0019563DD448: Global Capabilities: 4
> > >> >    -- SEP0019563DD448: format request: 268/4
> > >> >    -- SEP0019563DD448: Channel SCCP/2002-00000004, capabilities:
> > >DEVICE
> > >> >0x10c (ulaw|alaw|g729) NATIVE 0x10c (ulaw|alaw|g729) BEST 4 (ulaw)
> > >> >    -- SEP0019563DD448: Allocated asterisk channel 2002-4
> > >> >    -- SCCP: Looking for line 2002
> > >> >    -- SEP0019563DD448: found line 2002
> > >> >    -- SCCP: Asterisk asked for the state (2) of the line 2002
> > >> >    -- SEP0019563DD448: Set asterisk state OffHook (2) for call 4
> > >> >    -- GOT data SCCP/2002-00000004 (0x101aa5f0)
> > >> >    -- GOT line 2002
> > >> >    -- GOT device SEP0019563DD448
> > >> >    -- SEP0019563DD448: New call on line 2002
> > >> >    -- SEP0019563DD448: Set callingParty Name "7970 2002" on
> > channel 4
> > >> >    -- SEP0019563DD448: Set callingParty Number 2002 on channel 4
> > >> >    -- SEP0019563DD448: Waiting for the number to dial on 
> > >> > channel
> > >2002-4
> > >> >
> > >> >And then the phone cuts out (times out), even though I have 
> > >> >typed
> > my
> > >> >extension to dial, and have tried pressing the "dial" button, or
> > >setting
> > >> >my
> > >> >sccp.conf to force dial on # and pressing #, still no dice!  
> > >> >(note
> > >here,
> > >> >I
> > >> >went into chan_sccp.c and found this just before a do loop, I 
> > >> >put
> > in
> > >an
> > >> >output of the ("testing : %s", c->dialnumber) or something along
> > those
> > >> >lines
> > >> >and it printed to the screen many times, but the dialnumber is
> > always
> > >> >blank).
> > >> >
> > >> >When the phone cuts out I get this:
> > >> >
> > >> >- SEP0019563DD448: Indicate SCCP state (Dialing) on call 2002-4
> > >> >    -- SEP0019563DD448: Stop tone on device
> > >> >    -- SEP0019563DD448: Send softkeyset to DigitsFoll(6) on line 
> > >> >1
> > >and
> > >> >call
> > >> >4
> > >> >    -- SEP0019563DD448: Clear the status prompt on line 1 and
> > callid 4
> > >> >    -- SCCP: Looking for line 2002
> > >> >    -- SEP0019563DD448: found line 2002
> > >> >    -- SCCP: Asterisk asked for the state (2) of the line 2002
> > >> >    -- SEP0019563DD448: Set asterisk state Dialing (3) for call 4
> > >> >    -- SEP0019563DD448: Finish to indicate state SCCP (Dialing),
> > >SKINNY
> > >> >(OffHook) on call 2002-4
> > >> >    -- SEP0019563DD448: Send and Set the call state Proceed(12) 
> > >> >on
> > >call 4
> > >> >    -- SEP0019563DD448: Send callinfo for Outbound channel 4
> > >> >    -- SEP0019563DD448: Clear the status prompt on line 1 and
> > callid 4
> > >> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, 
> > >> > timeout
> > 0
> > >> >    -- SEP0019563DD448: Indicate SCCP state (InvalidNumber) on 
> > >> > call
> > >2002-
> > >> >4
> > >> >    -- SEP0019563DD448: Sending tone ReorderTone (37)
> > >> >    -- SEP0019563DD448: Send and Set the call state
> > InvalidNumber(14)
> > >on
> > >> >call 4
> > >> >    -- SEP0019563DD448: Send callinfo for Outbound channel 4
> > >> >    -- SEP0019563DD448: Display prompt on line 1, callid 4, 
> > >> >timeout
> > 0
> > >> >    -- SEP0019563DD448: Finish to indicate state SCCP
> > (InvalidNumber),
> > >> >SKINNY (InvalidNumber) on call 2002-4
> > >> >    -- SEP0019563DD448: return from the startchannel on exit
> > >> >
> > >> >Until I hang up.
> > >> >
> > >> >
> > >> >
> > >> >> -----Original Message-----
> > >> >> From:	Federico Santulli [SMTP:mobile at nhm.it]
> > >> >> Sent:	Wednesday, July 18, 2007 3:25 PM
> > >> >> To:	chan-sccp-users at lists.berlios.de
> > >> >> Subject:	[Chan-sccp-users] R:  chan_sccp and 7970
> > >> >>
> > >> >> Try to use the command "sccp debug" from asterisk console to 
> > >> >> see
> > >what
> > >> >is
> > >> >> happening on channel ;)
> > >> >>
> > >> >> Let us know.
> > >> >>
> > >> >>
> > >> >>
> > >> >>
> > >> >> -----Messaggio originale-----
> > >> >> Da: chan-sccp-users-bounces at lists.berlios.de
> > >> >> [mailto:chan-sccp-users-bounces at lists.berlios.de] Per conto di
> > >Zuber,
> > >> >> Jonathan
> > >> >> Inviato: mercoled? 18 luglio 2007 21.20
> > >> >> A: 'chan-sccp-users at lists.berlios.de'; 'Marcello.Ceschia at gmx.net'
> > >> >> Oggetto: Re: [Chan-sccp-users] chan_sccp and 7970
> > >> >>
> > >> >> I have it on full debug - asterisk is not seeing the digits I 
> > >> >> am
> > >> >pressing
> > >> >> at
> > >> >> all, however it sees the speedial digits (if i wait for the
> > dialtone
> > >> >> timeout
> > >> >> and then press speeddial it sends those digits, and asterisk
> > catches
> > >> >> them).
> > >> >> I set debug level in my sccp.conf to 10 and I run asterisk 
> > >> >> using
> > the
> > >> >> -vvvvvvvvvvgc command in console.
> > >> >>
> > >> >> > -----Original Message-----
> > >> >> > From:	Ceschia, Marcello [SMTP:Marcello.Ceschia at gmx.net]
> > >> >> > Sent:	Wednesday, July 18, 2007 2:34 PM
> > >> >> > To:	chan-sccp-users at lists.berlios.de
> > >> >> > Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
> > >> >> >
> > >> >> > Hello Jonathan,
> > >> >> >
> > >> >> > after reading your email, I tried to rebuild the problem.
> > >> >> > I use cisco 7971 on asterisk 1.4.7.1 and the 
> > >> >> > chan_sccp-Version
> > for
> > >> >> > asterisk
> > >> >> > 1.4.7. I have no problem using the dial-button.
> > >> >> > Do you have some logs on console (set verbose 4)?
> > >> >> >
> > >> >> >  Marcello
> > >> >> >
> > >> >> > Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
> > >> >> > > Hello all,
> > >> >> > >
> > >> >> > > 	Not sure if this is a chan_sccp issue or an Asterisk 
> > >> >> > > issue,
> > >> or
> > >> >maybe
> > >> >> > > just a cisco 7970 issue, but here it is:
> > >> >> > >
> > >> >> > > 	I have been working on this problem for a couple days 
> > >> >> > > now,
> > >> and
> > >> >was
> > >> >> > > looking for a little help.  I am running a Cisco 7970 IP
> > phone,
> > >> >using
> > >> >> > SCCP,
> > >> >> > > and a tftp server running Asterisk 1.4.6.  I have 
> > >> >> > > everything
> > >> >compiled,
> > >> >> a
> > >> >> > > new chan_sccp (the patched one that works with Asterisk
> > 1.4.4+),
> > >> >and
> > >> >> my
> > >> >> > > phones connect properly to Asterisk, speedials pop up and
> > >> >everything.
> > >> >> > The
> > >> >> > > speeddials even work! They will dial the extensions I
> > programmed
> > >> >into
> > >> >> > them
> > >> >> > > no problem.  However, when I try to just do a regular 
> > >> >> > > dial, a
> > >> >"dial"
> > >> >> > screen
> > >> >> > > pops up, shows me the digits I dialed, then does nothing.
> > This
> > >> >screen
> > >> >> > has 3
> > >> >> > > softbuttons, a cancel, a << (backspace) and a "Dial"
> > softbutton.
> > >> >The
> > >> >> > > cancel and << work just fine, but the Dial softbutton does
> > >nothing.
> > >> >I
> > >> >> > am
> > >> >> > > monitoring asterisk on full debug, and I see no indication
> > that
> > >it
> > >> >is
> > >> >> > > receiving the digits from the phone.
> > >> >> > >
> > >> >> > > 	Any help is much appreciated, and thanks in advance.
> > >> >> > >
> > >> >> > > Jonathan Zuber
> > >> >> > > _______________________________________________
> > >> >> > > Chan-sccp-users mailing list 
> > >> >> > > Chan-sccp-users at lists.berlios.de 
> > >> >> > > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >> >> > _______________________________________________
> > >> >> > Chan-sccp-users mailing list 
> > >> >> > Chan-sccp-users at lists.berlios.de 
> > >> >> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >> >> _______________________________________________
> > >> >> Chan-sccp-users mailing list
> > >> >> Chan-sccp-users at lists.berlios.de 
> > >> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >> >>
> > >> >> _______________________________________________
> > >> >> Chan-sccp-users mailing list
> > >> >> Chan-sccp-users at lists.berlios.de 
> > >> >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >> >_______________________________________________
> > >> >Chan-sccp-users mailing list
> > >> >Chan-sccp-users at lists.berlios.de 
> > >> >https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >>
> > >> _______________________________________________
> > >> Chan-sccp-users mailing list
> > >> Chan-sccp-users at lists.berlios.de
> > >> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > >_______________________________________________
> > >Chan-sccp-users mailing list
> > >Chan-sccp-users at lists.berlios.de
> > >https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> > 
> > _______________________________________________
> > Chan-sccp-users mailing list
> > Chan-sccp-users at lists.berlios.de
> > https://lists.berlios.de/mailman/listinfo/chan-sccp-users
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From aspendora at gmail.com  Mon Jul 30 21:37:19 2007
From: aspendora at gmail.com (Lacy Moore - Aspendora)
Date: Mon, 30 Jul 2007 14:37:19 -0500
Subject: [Chan-sccp-users] R: chan_sccp and 7970
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E81@THEBRAIN1.drs.ca>
References: <03FDC7A639326744925F8EB885247BAF861E81@THEBRAIN1.drs.ca>
Message-ID: <56a990d20707301237i639a9faahcd6fe20f01f29759@mail.gmail.com>

On 7/30/07, Zuber, Jonathan <jzuber at drs.ca> wrote:
>
> Can anyone else with a 7970 confirm that when they enter digits to place a
> call they see a blue screen pop up and show you the digits you are typing?
>
> Thanks!


I'm using a 7970 and everything works fine except the received calls.  Using
current version of Asterisk 1.2 with chan_sccp20060408 with current patches
and latest 7970 firmware.

Try posting your sccp.conf and the relevant section of your
extensions.confand maybe we can see what the problem is.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070730/ffc1aa87/attachment.html>

From jzuber at drs.ca  Mon Jul 30 21:46:43 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Mon, 30 Jul 2007 15:46:43 -0400
Subject: [Chan-sccp-users] R: chan_sccp and 7970
Message-ID: <03FDC7A639326744925F8EB885247BAF861E82@THEBRAIN1.drs.ca>

Ok here is sccp.conf (general and 1 phone and 1 line)
[general]
servername = Asterisk           ; show this name on the device registration
keepalive = 60                  ; phone keep alive message evey 60 secs.
Used to check the voicemail
debug = 10                      ; console debug level. 1 => 10
context = default
dateFormat = D/M/YA             ; M-D-Y in any order. Use M/D/Ya (for 12h
format)
bindaddr = 10.3.3.235           ; replace with the ip address of the
asterisk server (RTP important param)
port = 2000                     ; listen on port 2000 (Skinny, default)
disallow=all                    ; First disallow all codecs
allow=ulaw                      ;
firstdigittimeout = 16          ; dialing timeout for the 1st digit
digittimeout = 8                ; more digits
autoanswer_ring_time = 1        ; ringing time in seconds for the
autoanswer, the default is 0
autoanswer_tone = 0x32         
remotehangup_tone = 0x32        ; passive hangup notification. 0 for none
transfer_tone = 0               ; confirmation tone on transfer. Works only
between SCCP devices
callwaiting_tone = 0x2d         ; sets to 0 to disable the callwaiting tone
musicclass=default              ; Sets the default music on hold class
language=en                     ; Default language setting
permit=10.3.0.0/255.255.0.0     ; Accept class C 172.31.0.0
dnd = off                       
rtptos = 184                    ; sets the default rtp packets TOS
echocancel = on                 ; sets the phone echocancel for all devices
silencesuppression = off        ; sets the silence suppression for all
devices
trustphoneip = no               ; The phone has a ip address. It could be
private, so if the phone is behind NAT
tos = 0x68                      ; call control packets tos (0x68 Assured
forwarding)
earlyrtp = none         ; valid options: none, offhook, dial, ringout.
default is none.
private = on                    ; permit the private function softkey

[devices]
type        = 7971              ; device type (see below)
autologin   = 2006              ; lines list. You can add an empty line for
an empty button (7960, 7970, 7940, 7920)
description = 2006              ; internal description. Not important
tzoffset = 0
transfer = on                   ; enable or disable the transfer capability.
It does remove the transfer softkey
cfwdall = off                   ; activate the callforward stuff and
softkeys
cfwdbusy = off
dtmfmode = outofband            ; inband or outofband. outofband is the
native cisco dtmf tone play.
deny=0.0.0.0/0.0.0.0            ; Same as general
permit=10.3.3.247/255.255.0.0     ; This device can register only using this
ip address
dnd = off                     
trustphoneip = yes               ; The phone has a ip address. It could be
private, so if the phone is behind NAT
private = on                    ; permit the private function softkey for
this device

speeddial = 2003,speeddial-2003
speeddial = 2004,speeddial-2004
device => SEP001BD52D0885

[lines]
id          = 2006              ;
pin         = 1234              ;
label       = 7971              ; button line label (7960, 7970, 7940, 7920)
description = Line 7971         ; top display description
context     = default
incominglimit = 4               ; more than 1 incoming call = call waiting.
transfer = on                   ; per line transfer capability. on, off, 1,
0
mailbox = 2006                  ; voicemail.conf (syntax:
vmbox[@context][:folder])
vmnum = 600                     ; speeddial for voicemail administration,
just a number to dial
cid_name = 7971 2006            ; caller id name
cid_num = 2006
secondary_dialtone_digits = 9   ; digits for the secondary dialtone (max 9
digits)
secondary_dialtone_tone = 0x22  ; outside dialtone
musicclass = default              ; Sets the default music on hold class
language = en                     ; Default language setting
rtptos = 184                    ; sets the the rtp packets TOS for this line
echocancel = on                 ; sets the phone echocancel for this line
silencesuppression = off        ; sets the silence suppression for this line
line => 2006

And i have a [default] section in extentions.conf

And from extensions_additional.conf

exten => 2001,1,Dial(SCCP/2001,10,r)
exten => 2001,n,Hangup()
exten => 2002,1,Dial(SCCP/2002,10,r)
exten => 2002,n,Hangup()
exten => 2003,hint,SCCP/2003
exten => 2003,1,Dial(SCCP/2003,10,r)
exten => 2003,n,Hangup()
exten => 2004,1,Dial(SCCP/2004,10,r)
exten => 2004,n,Hangup()
exten => 2005,1,Dial(SCCP/2005,10,r)
exten => 2005,n,Hangup()
exten => 2006,1,Dial(SCCP/2006,10,r)
exten => 2006,n,Hangup()

Thanks for the help!



> -----Original Message-----
> From:	Lacy Moore - Aspendora [SMTP:aspendora at gmail.com]
> Sent:	Monday, July 30, 2007 3:37 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] R: chan_sccp and 7970
> 
> On 7/30/07, Zuber, Jonathan < jzuber at drs.ca <mailto:jzuber at drs.ca>> wrote:
> 
> 
> 	Can anyone else with a 7970 confirm that when they enter digits to
> place a
> 	call they see a blue screen pop up and show you the digits you are
> typing? 
> 	Thanks!
> 
>  
> I'm using a 7970 and everything works fine except the received calls.
> Using current version of Asterisk 1.2 with chan_sccp20060408 with current
> patches and latest 7970 firmware.
>  
> Try posting your sccp.conf and the relevant section of your
> extensions.conf and maybe we can see what the problem is.  
> 
>   << File: ATT394954.txt >> 


From aspendora at gmail.com  Mon Jul 30 22:13:13 2007
From: aspendora at gmail.com (Lacy Moore - Aspendora)
Date: Mon, 30 Jul 2007 15:13:13 -0500
Subject: [Chan-sccp-users] R: chan_sccp and 7970
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E82@THEBRAIN1.drs.ca>
References: <03FDC7A639326744925F8EB885247BAF861E82@THEBRAIN1.drs.ca>
Message-ID: <56a990d20707301313r6b37e5act1172c6c88f114a70@mail.gmail.com>

On 7/30/07, Zuber, Jonathan <jzuber at drs.ca> wrote:
>
> Ok here is sccp.conf (general and 1 phone and 1 line)



 Ok, first question...  Are you using static IPs for the phones?  You've
told it in sccp.conf that the phone can only be the IP address you have
listed.

Second, I'm assuming this is a Trixbox and/or FreePBX system.  I believe the
default context for the extensions is from-internal.  The context named
default in extensions.conf may not be referencing (including) the
corresponding context in extensions_additional.conf.

Make sure you have something similar to this:

extensions.conf:
#include extensions_additional.conf

[default]
include => additional_default

...


extensions_additional.conf
[additional_default]
exten => 2001 ... and so on as you posted before
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070730/04fbaf8a/attachment.html>

From jzuber at drs.ca  Mon Jul 30 22:23:31 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Mon, 30 Jul 2007 16:23:31 -0400
Subject: [Chan-sccp-users] R: chan_sccp and 7970
Message-ID: <03FDC7A639326744925F8EB885247BAF861E83@THEBRAIN1.drs.ca>

I have this...

[default]

include => ext-local

then under extensions_additional.conf I have my 
exten => 2001,1,Dial(SCCP/2001,10,r)
exten => 2001,n,Hangup()
exten => 2002,1,Dial(SCCP/2002,10,r)   ....

under the [ext-local]  

Which I believe is set up correctly



> -----Original Message-----
> From:	Lacy Moore - Aspendora [SMTP:aspendora at gmail.com]
> Sent:	Monday, July 30, 2007 4:13 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] R: chan_sccp and 7970
> 
>  
> On 7/30/07, Zuber, Jonathan < jzuber at drs.ca <mailto:jzuber at drs.ca>> wrote:
> 
> 
> 	Ok here is sccp.conf (general and 1 phone and 1 line)
> 
>  
>  
> Ok, first question...  Are you using static IPs for the phones?  You've
> told it in sccp.conf that the phone can only be the IP address you have
> listed.
>  
> Second, I'm assuming this is a Trixbox and/or FreePBX system.  I believe
> the default context for the extensions is from-internal.  The context
> named default in extensions.conf may not be referencing (including) the
> corresponding context in extensions_additional.conf.  
>  
> Make sure you have something similar to this:
>  
> extensions.conf:
> #include extensions_additional.conf
>  
> [default]
> include => additional_default
>  
> ...
>  
>  
> extensions_additional.conf
> [additional_default]
> exten => 2001 ... and so on as you posted before
>  
> 
> 
>  
> 
>   << File: ATT395276.txt >> 


From aspendora at gmail.com  Mon Jul 30 23:05:26 2007
From: aspendora at gmail.com (Lacy Moore - Aspendora)
Date: Mon, 30 Jul 2007 16:05:26 -0500
Subject: [Chan-sccp-users] R: chan_sccp and 7970
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E83@THEBRAIN1.drs.ca>
References: <03FDC7A639326744925F8EB885247BAF861E83@THEBRAIN1.drs.ca>
Message-ID: <56a990d20707301405if5c38bo8c4a2ff72c9f47b0@mail.gmail.com>

As long as you have the include statement for the extensions_additional.conf
file, all that should be correct.

Hmm...  in the modules.conf file, do you have a line that reads

noload => chan_skinny.so

or if you are not autoloading, make sure that you do not have a load =>
chan_skinny.so.

I'm just guessing at different possibilities at this point.

I just reread your original message.  Still not sure why speeddials work and
manual dialing doesn't.  I know it's different parts of either the phone
firmware or sccp that handles that.  You can put text in the speeddials and
it sends the text to asterisk, but you can't dial a number from missed calls
with the text included.

This makes me think something is messed up in your chan_sccp.  I can't see a
difference between your sccp.conf and mine that would cause these issues.

On 7/30/07, Zuber, Jonathan <jzuber at drs.ca> wrote:
>
> I have this...
>
> [default]
>
> include => ext-local
>
> then under extensions_additional.conf I have my
> exten => 2001,1,Dial(SCCP/2001,10,r)
> exten => 2001,n,Hangup()
> exten => 2002,1,Dial(SCCP/2002,10,r)   ....
>
> under the [ext-local]
>
> Which I believe is set up correctly
>
>
>
> > -----Original Message-----
> > From: Lacy Moore - Aspendora [SMTP:aspendora at gmail.com]
> > Sent: Monday, July 30, 2007 4:13 PM
> > To:   chan-sccp-users at lists.berlios.de
> > Subject:      Re: [Chan-sccp-users] R: chan_sccp and 7970
> >
> >
> > On 7/30/07, Zuber, Jonathan < jzuber at drs.ca <mailto:jzuber at drs.ca>>
> wrote:
> >
> >
> >       Ok here is sccp.conf (general and 1 phone and 1 line)
> >
> >
> >
> > Ok, first question...  Are you using static IPs for the phones?  You've
> > told it in sccp.conf that the phone can only be the IP address you have
> > listed.
> >
> > Second, I'm assuming this is a Trixbox and/or FreePBX system.  I believe
> > the default context for the extensions is from-internal.  The context
> > named default in extensions.conf may not be referencing (including) the
> > corresponding context in extensions_additional.conf.
> >
> > Make sure you have something similar to this:
> >
> > extensions.conf:
> > #include extensions_additional.conf
> >
> > [default]
> > include => additional_default
> >
> > ...
> >
> >
> > extensions_additional.conf
> > [additional_default]
> > exten => 2001 ... and so on as you posted before
> >
> >
> >
> >
> >
> >   << File: ATT395276.txt >>
> _______________________________________________
> Chan-sccp-users mailing list
> Chan-sccp-users at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/chan-sccp-users
>



-- 
Lacy Moore
Somewhere I wish I wasn't
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070730/1c71dc95/attachment.html>

From mobile at nhm.it  Tue Jul 31 16:47:11 2007
From: mobile at nhm.it (Federico Santulli)
Date: Tue, 31 Jul 2007 16:47:11 +0200
Subject: [Chan-sccp-users] At Sergio's attention !
In-Reply-To: <46AB981F.3050300@c-net.it>
References: <17523796.1185565114041.JavaMail.root@mail.linkdc.co.uk>
	<20070728083016.257720@gmx.net> <46AB981F.3050300@c-net.it>
Message-ID: <004f01c7d381$ae0b0c30$0a212490$@it>

I have made some works on two functions. Would you like to test ?

void * sccp_pbx_startchannel(void *data) {
	struct ast_channel * chan = data;
	sccp_channel_t * c;
	sccp_line_t * l;
	sccp_device_t * d;
	uint8_t res_exten = 0, res_wait = 0, res_timeout = 0;

	c = CS_AST_CHANNEL_PVT(chan);
	
    if (!c) {
		/* let's go out as soon as possibile */
		if (!ast_test_flag(chan, AST_FLAG_ZOMBIE)) {
			ast_log(LOG_ERROR, "SCCP: return from the dial
thread. No sccp channel available for %s\n", (chan) ? chan->name :
"(null)");
            if (chan)
				ast_hangup(chan);
		} 
        else
        {
			ast_log(LOG_DEBUG, "SCCP: return from the dial
thread. No sccp channel available for zombie\n");
		}
		return NULL;
	}
	
    if(ast_test_flag(chan, AST_FLAG_ZOMBIE))
	{
        ast_log(LOG_DEBUG, "SCCP: Channel has PVT but flagged as zombie. No
sccp channel available\n);
        return NULL;
    }    

	/* this is an outgoung call */
	ast_mutex_lock(&c->lock);
	c->calltype = SKINNY_CALLTYPE_OUTBOUND;
	c->hangupok = 0;
	
	l = c->line;
	d = c->device;

	if (!l || !d) {
		/* let's go out as soon as possibile */
		ast_log(LOG_ERROR, "%s: return from the dial thread. No line
or device defined for channel %d\n", DEV_ID_LOG(d), c->callid);
		c->hangupok = 1;
		ast_mutex_unlock(&c->lock);
		if (chan)
			ast_hangup(chan);
		return NULL;
	}
	
	sccp_log(1)( VERBOSE_PREFIX_3 "%s: New call on line %s\n",
DEV_ID_LOG(d), l->name);

	sccp_channel_set_callingparty(c, l->cid_name, l->cid_num);

	if (ast_strlen_zero(c->dialedNumber)) 
    {
    	/* we have to collect the number */
    	/* the phone is on TsOffHook state */
    	sccp_log(10)( VERBOSE_PREFIX_3 "%s: Waiting for the number to dial
on channel %s-%d\n", DEV_ID_LOG(l->device), l->name, c->callid);
    	/* let's use the keypad to collect digits */
    	c->digittimeout = time(0)+GLOB(firstdigittimeout);
    	ast_mutex_unlock(&c->lock);
    
    	res_exten = 1;
    
    	do {
    		usleep(100);
    		pthread_testcancel();
    		ast_mutex_lock(&c->lock);
    		if (!ast_strlen_zero(c->dialedNumber)) {
    			res_exten = (c->dialedNumber[0] == '*' ||
ast_matchmore_extension(chan, chan->context, c->dialedNumber, 1,
l->cid_num));
    		}
    		if (! (res_wait = ( c->state == SCCP_CHANNELSTATE_DOWN ||
chan->_state == AST_STATE_DOWN
    							|| chan->_softhangup
|| c->calltype == SKINNY_CALLTYPE_INBOUND)) ) {
    			if (CS_AST_CHANNEL_PVT(chan)) {
    				res_timeout = (time(0) < c->digittimeout);
    			} else
    				res_timeout = 0;
    		}
    		ast_mutex_unlock(&c->lock);
    	} while ( (res_wait == 0) && res_exten &&  res_timeout);
    
    	if (res_wait != 0) {
    		/* AST_STATE_DOWN or softhangup */
    		sccp_log(10)(VERBOSE_PREFIX_3 "%s: return from the dial
thread for DOWN, HANGUP or PICKUP cause\n", DEV_ID_LOG(l->device));
    		ast_mutex_lock(&c->lock);
    		c->hangupok = 1;
    		ast_mutex_unlock(&c->lock);
    		return NULL;
    	}
    }
    else 
    {
        /* we have a number to dial. Let's do it */
		sccp_log(10)( VERBOSE_PREFIX_3 "%s: Dialing %s on channel
%s-%d\n", DEV_ID_LOG(l->device), c->dialedNumber, l->name, c->callid);
		sccp_channel_set_calledparty(c, c->dialedNumber,
c->dialedNumber);
		sccp_indicate_nolock(c, SCCP_CHANNELSTATE_DIALING);
		ast_mutex_unlock(&c->lock);
	}

	ast_mutex_lock(&c->lock);
	sccp_copy_string(chan->exten, c->dialedNumber, sizeof(chan->exten));
	sccp_copy_string(d->lastNumber, c->dialedNumber,
sizeof(d->lastNumber));
	sccp_channel_set_calledparty(c, c->dialedNumber, c->dialedNumber);
	/* proceed call state is needed to display the called number.
	The phone will not display callinfo in offhook state */
	sccp_channel_set_callstate(c, SKINNY_CALLSTATE_PROCEED);
	sccp_channel_send_callinfo(c);
	sccp_dev_clearprompt(d,c->line->instance, c->callid);
	sccp_dev_displayprompt(d, c->line->instance, c->callid,
SKINNY_DISP_CALL_PROCEED, 0);
	c->hangupok = 1;
	ast_mutex_unlock(&c->lock);

	if ( !ast_strlen_zero(c->dialedNumber)
			&& ast_exists_extension(chan, chan->context,
c->dialedNumber, 1, l->cid_num) ) {
		/* found an extension, let's dial it */
		sccp_log(10)(VERBOSE_PREFIX_3 "%s: channel %s-%d is dialing
number %s\n", DEV_ID_LOG(l->device), l->name, c->callid, c->dialedNumber);
		/* Answer dialplan command works only when in RINGING OR
RING ast_state */
		sccp_ast_setstate(c, AST_STATE_RING);
		if (ast_pbx_run(chan)) {
			sccp_indicate_lock(c,
SCCP_CHANNELSTATE_INVALIDNUMBER);
		}
	} else {
		/* timeout and no extension match */
		sccp_indicate_lock(c, SCCP_CHANNELSTATE_INVALIDNUMBER);
	}
	sccp_log(10)(VERBOSE_PREFIX_3 "%s: return from the startchannel on
exit\n", DEV_ID_LOG(l->device));
	return NULL;
}


static int sccp_pbx_hangup(struct ast_channel * ast) {
    sccp_channel_t * c;
    sccp_line_t    * l = NULL;
    sccp_device_t  * d = NULL;

    c = CS_AST_CHANNEL_PVT(ast);

    if (!c) {
        sccp_log(10)(VERBOSE_PREFIX_3 "SCCP: Asked to hangup channel %s.
SCCP channel already deleted\n",ast->name);
        return 0;
    }

    /* tests on channel */
    if (ast_test_flag(ast, AST_FLAG_ZOMBIE))
    {
        sccp_log(1)(VERBOSE_PREFIX_3 "SCCP: Hanging up zombie call. Be
scared.\n");
    }
    else
    {
        sccp_log(1)(VERBOSE_PREFIX_3 "SCCP: Hangup call %s\n", ast->name);
    }

    /* here the ast channel is locked */
    ast_mutex_lock(&c->lock);

    l = c->line;
    d = l->device;
    
    sccp_log(10)(VERBOSE_PREFIX_3 "%s: Current channel %s-%d state
%s(%d)\n", DEV_ID_LOG(d), l ? l->name : "(null)", c->callid,
sccp_indicate2str(c->state), c->state);

    /* Determine how to disconnect */
    if (c->owner != ast) {
            sccp_log(10)(VERBOSE_PREFIX_3 "SCCP: We aren't the owner. Can't
hangup call.\n");
            ast_mutex_unlock(&c->lock);
            return 0;
    }
    
    if (c->rtp) {
            sccp_channel_closereceivechannel(c);
            sccp_channel_stop_rtp(c);
    }

    if (c->state != SCCP_CHANNELSTATE_DOWN) {
            /* we are in a passive hangup */
            if (GLOB(remotehangup_tone) && d->state ==
SCCP_DEVICESTATE_OFFHOOK && c == sccp_channel_get_active(d))
                    sccp_dev_starttone(d, GLOB(remotehangup_tone), 0, 0,
10);
            sccp_indicate_nolock(c, SCCP_CHANNELSTATE_ONHOOK);
    }

    if (c->calltype == SKINNY_CALLTYPE_OUTBOUND && !c->hangupok) {
            sccp_log(10)(VERBOSE_PREFIX_3 "%s: Waiting for the dialing
thread to go down on channel %s\n", DEV_ID_LOG(d), ast->name);
            /* Here there was a loop but thread should end his way */
    }
    
    /* Here usecount is updated */
    ast_mutex_lock(&GLOB(usecnt_lock));
    GLOB(usecnt)--;
    ast_mutex_unlock(&GLOB(usecnt_lock));
    ast_update_use_count();

    /* Updating session */
    if (d && d->session) {
            ast_mutex_lock(&d->session->lock);
            d->session->needcheckringback = 1;
            ast_mutex_unlock(&d->session->lock);
    }

    CS_AST_CHANNEL_PVT(ast) = NULL;
    c->owner = NULL;
    
    sccp_channel_delete(c);

    ast_mutex_unlock(&c->lock);
    return 0;
}




From jzuber at drs.ca  Tue Jul 31 18:17:19 2007
From: jzuber at drs.ca (Zuber, Jonathan)
Date: Tue, 31 Jul 2007 12:17:19 -0400
Subject: [Chan-sccp-users] R: chan_sccp and 7970
Message-ID: <03FDC7A639326744925F8EB885247BAF861E85@THEBRAIN1.drs.ca>

Is this similar to your output for a 7970 or 7971 phone upon startup?? I see
there is an error near the end, could that be the reason for me being unable
to dial?

 -- GLOBAL: Preferred capability (ulaw)
    -- Added speeddial 1: sccp-2603 (2603)
    -- Added speeddial 2: sccp-2603 (2603)
    -- Added device 'SEP0019563DD448' (7970)
    -- Added speeddial 1: sccp-2602 (2602)
    -- Added speeddial 2: sccp-2604 (2604)
    -- Added device 'SEP0019305D3EF3' (7970)
    -- Added speeddial 1: speeddial-2602 (2602)
    -- Added speeddial 2: speeddial-2603 (2603)
    -- Added device 'SEP001BD52D0885' (7971)
    -- SCCP: Looking for line 2602
    -- Added line '2602'
    -- SCCP: Looking for line 2603
    -- Added line '2603'
    -- SCCP: Looking for line 2604
    -- Added line '2604'
    -- SCCP channel driver up and running on 10.3.3.235:2000
    -- SCCP listening on 10.3.3.235:2000
  == Registered channel type 'SCCP' (Skinny Client Control Protocol (SCCP))
  == Registered application 'SetCalledParty'
chan_sccp.so => (Skinny Client Control Protocol (SCCP). Release: 20070428)
  == Registered channel type 'Feature' (Feature Proxy Channel Driver)
chan_features.so => (Feature Proxy Channel)
Asterisk Ready.
*CLI>     -- SCCP: Accepted connection from 10.3.3.247
    -- SCCP: Using ip 10.3.3.235
    -- SCCP: >> Got message AlarmMessage
    -- SCCP: Alarm Message: Severity: Informational (2), 14:
Name=SEP001BD52D0885 Load= term71.default Last=CM-closed-TCP [0/0]
    -- SCCP: >> Got message RegisterMessage
    -- SEP001BD52D0885: is registering, Instance: 0, Type: Cisco7971 (119),
Version: 12
    -- SEP001BD52D0885: Allocating device to session (17) 10.3.3.247
    -- SEP001BD52D0885: Building button template Cisco7971(119), user config
7971
    -- SEP001BD52D0885: Phone available lines 8
    -- SEP001BD52D0885: Auto logging into 2604
    -- SCCP: Looking for line 2604
    -- SEP001BD52D0885: Attaching line 2604 to this device
    -- SEP001BD52D0885: Ask the phone to send keepalive message every 60
seconds
    -- SEP001BD52D0885: Display notify with timeout 5
    -- SEP001BD52D0885: Send speaker mode 2
    -- SEP001BD52D0885: Clear the status prompt on line 0 and callid 0
    -- SEP001BD52D0885: Restoring device status (dnd, cfwd*) from the
asterisk db
    -- SCCP: Looking for line 2604
    -- SEP001BD52D0885: found line 2604
    -- SCCP: Asterisk asked for the state (1) of the line 2604
    -- SEP001BD52D0885: >> Got message IpPortMessage
    -- SEP001BD52D0885: >> Got message ButtonTemplateReqMessage
    -- SEP001BD52D0885: Building button template Cisco7971(119), user config
7971
    -- SEP001BD52D0885: Looking for a line button place 2604 (1)
    -- SEP001BD52D0885: Configured Phone Button [01] = LINE (2604),
temporary instance (1)
    -- SEP001BD52D0885: Looking for a speeddial button place speeddial-2602
(1)
    -- SEP001BD52D0885: Configured Phone Button [02] = SPEEDIAL
(speeddial-2602) temporary instance (2)
    -- SEP001BD52D0885: Looking for a speeddial button place speeddial-2603
(2)
    -- SEP001BD52D0885: Configured Phone Button [03] = SPEEDIAL
(speeddial-2603) temporary instance (3)
    -- SEP001BD52D0885: Button Template [01] = Line (9), instance 1
    -- SEP001BD52D0885: Button Template [02] = SpeedDial (2), instance 1
    -- SEP001BD52D0885: Button Template [03] = SpeedDial (2), instance 2
    -- SEP001BD52D0885: >> Got message SoftKeyTemplateReqMessage
    -- SEP001BD52D0885: Button(0)[ 1] = Redial
    -- SEP001BD52D0885: Button(1)[ 2] = NewCall
    -- SEP001BD52D0885: Button(2)[ 3] = Hold
    -- SEP001BD52D0885: Button(3)[ 4] = Transfer
    -- SEP001BD52D0885: Button(4)[ 5] = CFwdALL
    -- SEP001BD52D0885: Button(5)[ 6] = CFwdBusy
    -- SEP001BD52D0885: Button(6)[ 7] = CFwdNoAnswer
    -- SEP001BD52D0885: Button(7)[ 8] = &lt;&lt;
    -- SEP001BD52D0885: Button(8)[ 9] = EndCall
    -- SEP001BD52D0885: Button(9)[10] = Resume
    -- SEP001BD52D0885: Button(10)[11] = Answer
    -- SEP001BD52D0885: Button(11)[12] = Private
    -- SEP001BD52D0885: Button(12)[13] = TrnsfVM
    -- SEP001BD52D0885: Button(13)[14] = DND
    -- SEP001BD52D0885: >> Got message SoftKeySetReqMessage
    -- SEP001BD52D0885: TRANSFER    is enabled
    -- SEP001BD52D0885: DND         is disabled
    -- SEP001BD52D0885: PRIVATE     is disabled
    -- SEP001BD52D0885: CFWDALL     is  enabled
    -- SEP001BD52D0885: CFWDBUSY    is  disabled
    -- SEP001BD52D0885: TRNSFVM     is  disabled
    -- SEP001BD52D0885: Set[0 ]= 0 :Redial     1 :NewCall
    -- SEP001BD52D0885: Set[1 ]= 0 :Hold       1 :EndCall    2 :Transfer   3
:CFwdALL
    -- SEP001BD52D0885: Set[2 ]= 0 :Resume     1 :NewCall    2 :EndCall    3
:Transfer
    -- SEP001BD52D0885: Set[3 ]= 0 :Answer     1 :EndCall
    -- SEP001BD52D0885: Set[4 ]= 0 :Redial     1 :EndCall    3 :CFwdALL
    -- SEP001BD52D0885: Set[5 ]= 0 :Hold       1 :EndCall    2 :Transfer   3
:CFwdALL
    -- SEP001BD52D0885: Set[6 ]= 0 :&lt;&lt;   1 :EndCall
    -- SEP001BD52D0885: Set[7 ]=
    -- SEP001BD52D0885: Set[8 ]= 1 :EndCall    2 :Transfer   3 :CFwdALL
    -- SEP001BD52D0885: Set[9 ]= 0 :Redial     1 :EndCall
    -- SEP001BD52D0885: Set[10]=
    -- There are 11 SoftKeySets.
    -- SEP001BD52D0885: Send softkeyset to OnHook(0) on line 0  and call 0
    -- SEP001BD52D0885: >> Got message ConfigStatReqMessage
    -- SEP001BD52D0885: Sending ConfigStatMessage, lines 1, speeddials 2
    -- SEP001BD52D0885: >> Got message HeadsetStatusMessage
    -- SEP001BD52D0885: >> Got message CapabilitiesResMessage
    -- SEP001BD52D0885: Device has 8 Capabilities
    -- SEP001BD52D0885: CISCO:    25 Wideband 256k             AST:     0
unknown
    -- SEP001BD52D0885: CISCO:     4 G.711 u-law 64k           AST:     4
G.711 u-law
    -- SEP001BD52D0885: CISCO:     2 G.711 A-law 64k           AST:     8
G.711 A-law
    -- SEP001BD52D0885: CISCO:    15 G.729 Annex B             AST:     0
unknown
    -- SEP001BD52D0885: CISCO:    16 G.729 Annex A + B         AST:     0
unknown
    -- SEP001BD52D0885: CISCO:    11 G.729                     AST:     0
unknown
    -- SEP001BD52D0885: CISCO:    12 G.729 Annex A             AST:   256
G.729A
    -- SEP001BD52D0885: CISCO:     1 Non-standard codec        AST:     0
unknown
    -- SEP001BD52D0885: >> Got message LineStatReqMessage
    -- SEP001BD52D0885: Configuring line number 0
    -- SEP001BD52D0885: Looking for line by instance 0
    -- SEP001BD52D0885: searching for index 0 and type 9
[Jul 31 16:02:23] ERROR[13443]: sccp_actions.c:540 sccp_handle_line_number:
SEP001BD52D0885: requested a line configuration for unknown line 0
    -- SEP001BD52D0885: >> Got message ForwardStatReqMessage
    -- SEP001BD52D0885: Got Forward Status Request.  Line: 1
    -- SEP001BD52D0885: Looking for line by instance 0
    -- SEP001BD52D0885: Send Forward Status.  Instance: 1
    -- SEP001BD52D0885: >> Got message SpeedDialStatReqMessage
    -- SEP001BD52D0885: Speed Dial Request for Button 1
    -- SEP001BD52D0885: searching for index 1 and type 2
    -- SEP001BD52D0885: found name: speeddial-2602, ext: 2602, index: 1,
type: 2
    -- SEP001BD52D0885: >> Got message SpeedDialStatReqMessage
    -- SEP001BD52D0885: Speed Dial Request for Button 2
    -- SEP001BD52D0885: searching for index 2 and type 2
    -- SEP001BD52D0885: found name: speeddial-2603, ext: 2603, index: 2,
type: 2
    -- SEP001BD52D0885: >> Got message TimeDateReqMessage
    -- SEP001BD52D0885: Send date/time
    -- SEP001BD52D0885: >> Got message RegisterAvailableLinesMessage
    -- SEP001BD52D0885: Post registration process
    -- SEP001BD52D0885: Clear the status prompt on line 0 and callid 0
    -- SEP001BD52D0885: Display prompt on line 0, callid 0, timeout 0
    -- SEP001BD52D0885: Send softkeyset to OnHook(0) on line 0  and call 0
    -- SEP001BD52D0885: Post registration process... done!

> -----Original Message-----
> From:	Lacy Moore - Aspendora [SMTP:aspendora at gmail.com]
> Sent:	Monday, July 30, 2007 5:05 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] R: chan_sccp and 7970
> 
> As long as you have the include statement for the
> extensions_additional.conf file, all that should be correct.
>  
> Hmm...  in the modules.conf file, do you have a line that reads
>  
> noload => chan_skinny.so
>  
> or if you are not autoloading, make sure that you do not have a load =>
> chan_skinny.so.
>  
> I'm just guessing at different possibilities at this point.  
>  
> I just reread your original message.  Still not sure why speeddials work
> and manual dialing doesn't.  I know it's different parts of either the
> phone firmware or sccp that handles that.  You can put text in the
> speeddials and it sends the text to asterisk, but you can't dial a number
> from missed calls with the text included. 
>  
> This makes me think something is messed up in your chan_sccp.  I can't see
> a difference between your sccp.conf and mine that would cause these
> issues.
>  
> On 7/30/07, Zuber, Jonathan < jzuber at drs.ca <mailto:jzuber at drs.ca>> wrote:
> 
> 
> 	I have this...
> 	
> 	[default]
> 	
> 	include => ext-local
> 	
> 	then under extensions_additional.conf I have my 
> 	exten => 2001,1,Dial(SCCP/2001,10,r)
> 	exten => 2001,n,Hangup()
> 	exten => 2002,1,Dial(SCCP/2002,10,r)   ....
> 	
> 	under the [ext-local]
> 	
> 	Which I believe is set up correctly
> 	
> 	
> 	
> 	> -----Original Message----- 
> 	> From: Lacy Moore - Aspendora [ SMTP:aspendora at gmail.com
> <mailto:SMTP:aspendora at gmail.com>]
> 	> Sent: Monday, July 30, 2007 4:13 PM
> 	> To:   chan-sccp-users at lists.berlios.de
> <mailto:chan-sccp-users at lists.berlios.de>
> 	> Subject:      Re: [Chan-sccp-users] R: chan_sccp and 7970
> 	>
> 	>
> 	> On 7/30/07, Zuber, Jonathan < jzuber at drs.ca <mailto:jzuber at drs.ca>
> <mailto: jzuber at drs.ca  <mailto:jzuber at drs.ca>>> wrote:
> 	>
> 	>
> 	>       Ok here is sccp.conf (general and 1 phone and 1 line)
> 	>
> 	>
> 	>
> 	> Ok, first question...  Are you using static IPs for the phones?
> You've
> 	> told it in sccp.conf that the phone can only be the IP address you
> have
> 	> listed.
> 	>
> 	> Second, I'm assuming this is a Trixbox and/or FreePBX system.  I
> believe
> 	> the default context for the extensions is from-internal.  The
> context 
> 	> named default in extensions.conf may not be referencing
> (including) the
> 	> corresponding context in extensions_additional.conf.
> 	>
> 	> Make sure you have something similar to this:
> 	>
> 	> extensions.conf :
> 	> #include extensions_additional.conf
> 	>
> 	> [default]
> 	> include => additional_default
> 	>
> 	> ...
> 	>
> 	>
> 	> extensions_additional.conf
> 	> [additional_default]
> 	> exten => 2001 ... and so on as you posted before 
> 	>
> 	>
> 	>
> 	>
> 	>
> 	>   << File: ATT395276.txt >>
> 	_______________________________________________
> 	Chan-sccp-users mailing list
> 	Chan-sccp-users at lists.berlios.de
> <mailto:Chan-sccp-users at lists.berlios.de>
> 	<https://lists.berlios.de/mailman/listinfo/chan-sccp-users>
> 	
> 
> 
> 
> 
> -- 
> Lacy Moore
> Somewhere I wish I wasn't  << File: ATT395652.txt >> 


From hakan at nets.at  Tue Jul 31 19:01:45 2007
From: hakan at nets.at (Hakan Evirgen)
Date: Tue, 31 Jul 2007 19:01:45 +0200
Subject: [Chan-sccp-users] R: chan_sccp and 7970
In-Reply-To: <03FDC7A639326744925F8EB885247BAF861E85@THEBRAIN1.drs.ca>
References: <03FDC7A639326744925F8EB885247BAF861E85@THEBRAIN1.drs.ca>
Message-ID: <017f01c7d394$7aecd370$70c67a50$@at>

Hi!

I have a 7970 with latest firmware. It works perfectly.

I compared my log with your log and I see that I do not have any error
message. Seems so, that there is a problem in the configuration.

Cu
Hakan

>-----Original Message-----
>From: chan-sccp-users-bounces at lists.berlios.de [mailto:chan-sccp-users-
>bounces at lists.berlios.de] On Behalf Of Zuber, Jonathan
>Sent: Tuesday, July 31, 2007 6:17 PM
>To: 'chan-sccp-users at lists.berlios.de'
>Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
>
>Is this similar to your output for a 7970 or 7971 phone upon startup?? I
>see
>there is an error near the end, could that be the reason for me being
>unable
>to dial?
>
> -- GLOBAL: Preferred capability (ulaw)
>    -- Added speeddial 1: sccp-2603 (2603)
>    -- Added speeddial 2: sccp-2603 (2603)
>    -- Added device 'SEP0019563DD448' (7970)
>    -- Added speeddial 1: sccp-2602 (2602)
>    -- Added speeddial 2: sccp-2604 (2604)
>    -- Added device 'SEP0019305D3EF3' (7970)
>    -- Added speeddial 1: speeddial-2602 (2602)
>    -- Added speeddial 2: speeddial-2603 (2603)
>    -- Added device 'SEP001BD52D0885' (7971)
>    -- SCCP: Looking for line 2602
>    -- Added line '2602'
>    -- SCCP: Looking for line 2603
>    -- Added line '2603'
>    -- SCCP: Looking for line 2604
>    -- Added line '2604'
>    -- SCCP channel driver up and running on 10.3.3.235:2000
>    -- SCCP listening on 10.3.3.235:2000
>  == Registered channel type 'SCCP' (Skinny Client Control Protocol
>(SCCP))
>  == Registered application 'SetCalledParty'
>chan_sccp.so => (Skinny Client Control Protocol (SCCP). Release:
>20070428)
>  == Registered channel type 'Feature' (Feature Proxy Channel Driver)
>chan_features.so => (Feature Proxy Channel)
>Asterisk Ready.
>*CLI>     -- SCCP: Accepted connection from 10.3.3.247
>    -- SCCP: Using ip 10.3.3.235
>    -- SCCP: >> Got message AlarmMessage
>    -- SCCP: Alarm Message: Severity: Informational (2), 14:
>Name=SEP001BD52D0885 Load= term71.default Last=CM-closed-TCP [0/0]
>    -- SCCP: >> Got message RegisterMessage
>    -- SEP001BD52D0885: is registering, Instance: 0, Type: Cisco7971
>(119),
>Version: 12
>    -- SEP001BD52D0885: Allocating device to session (17) 10.3.3.247
>    -- SEP001BD52D0885: Building button template Cisco7971(119), user
>config
>7971
>    -- SEP001BD52D0885: Phone available lines 8
>    -- SEP001BD52D0885: Auto logging into 2604
>    -- SCCP: Looking for line 2604
>    -- SEP001BD52D0885: Attaching line 2604 to this device
>    -- SEP001BD52D0885: Ask the phone to send keepalive message every 60
>seconds
>    -- SEP001BD52D0885: Display notify with timeout 5
>    -- SEP001BD52D0885: Send speaker mode 2
>    -- SEP001BD52D0885: Clear the status prompt on line 0 and callid 0
>    -- SEP001BD52D0885: Restoring device status (dnd, cfwd*) from the
>asterisk db
>    -- SCCP: Looking for line 2604
>    -- SEP001BD52D0885: found line 2604
>    -- SCCP: Asterisk asked for the state (1) of the line 2604
>    -- SEP001BD52D0885: >> Got message IpPortMessage
>    -- SEP001BD52D0885: >> Got message ButtonTemplateReqMessage
>    -- SEP001BD52D0885: Building button template Cisco7971(119), user
>config
>7971
>    -- SEP001BD52D0885: Looking for a line button place 2604 (1)
>    -- SEP001BD52D0885: Configured Phone Button [01] = LINE (2604),
>temporary instance (1)
>    -- SEP001BD52D0885: Looking for a speeddial button place speeddial-
>2602
>(1)
>    -- SEP001BD52D0885: Configured Phone Button [02] = SPEEDIAL
>(speeddial-2602) temporary instance (2)
>    -- SEP001BD52D0885: Looking for a speeddial button place speeddial-
>2603
>(2)
>    -- SEP001BD52D0885: Configured Phone Button [03] = SPEEDIAL
>(speeddial-2603) temporary instance (3)
>    -- SEP001BD52D0885: Button Template [01] = Line (9), instance 1
>    -- SEP001BD52D0885: Button Template [02] = SpeedDial (2), instance 1
>    -- SEP001BD52D0885: Button Template [03] = SpeedDial (2), instance 2
>    -- SEP001BD52D0885: >> Got message SoftKeyTemplateReqMessage
>    -- SEP001BD52D0885: Button(0)[ 1] = Redial
>    -- SEP001BD52D0885: Button(1)[ 2] = NewCall
>    -- SEP001BD52D0885: Button(2)[ 3] = Hold
>    -- SEP001BD52D0885: Button(3)[ 4] = Transfer
>    -- SEP001BD52D0885: Button(4)[ 5] = CFwdALL
>    -- SEP001BD52D0885: Button(5)[ 6] = CFwdBusy
>    -- SEP001BD52D0885: Button(6)[ 7] = CFwdNoAnswer
>    -- SEP001BD52D0885: Button(7)[ 8] = &lt;&lt;
>    -- SEP001BD52D0885: Button(8)[ 9] = EndCall
>    -- SEP001BD52D0885: Button(9)[10] = Resume
>    -- SEP001BD52D0885: Button(10)[11] = Answer
>    -- SEP001BD52D0885: Button(11)[12] = Private
>    -- SEP001BD52D0885: Button(12)[13] = TrnsfVM
>    -- SEP001BD52D0885: Button(13)[14] = DND
>    -- SEP001BD52D0885: >> Got message SoftKeySetReqMessage
>    -- SEP001BD52D0885: TRANSFER    is enabled
>    -- SEP001BD52D0885: DND         is disabled
>    -- SEP001BD52D0885: PRIVATE     is disabled
>    -- SEP001BD52D0885: CFWDALL     is  enabled
>    -- SEP001BD52D0885: CFWDBUSY    is  disabled
>    -- SEP001BD52D0885: TRNSFVM     is  disabled
>    -- SEP001BD52D0885: Set[0 ]= 0 :Redial     1 :NewCall
>    -- SEP001BD52D0885: Set[1 ]= 0 :Hold       1 :EndCall    2 :Transfer
>3
>:CFwdALL
>    -- SEP001BD52D0885: Set[2 ]= 0 :Resume     1 :NewCall    2 :EndCall
>3
>:Transfer
>    -- SEP001BD52D0885: Set[3 ]= 0 :Answer     1 :EndCall
>    -- SEP001BD52D0885: Set[4 ]= 0 :Redial     1 :EndCall    3 :CFwdALL
>    -- SEP001BD52D0885: Set[5 ]= 0 :Hold       1 :EndCall    2 :Transfer
>3
>:CFwdALL
>    -- SEP001BD52D0885: Set[6 ]= 0 :&lt;&lt;   1 :EndCall
>    -- SEP001BD52D0885: Set[7 ]=
>    -- SEP001BD52D0885: Set[8 ]= 1 :EndCall    2 :Transfer   3 :CFwdALL
>    -- SEP001BD52D0885: Set[9 ]= 0 :Redial     1 :EndCall
>    -- SEP001BD52D0885: Set[10]=
>    -- There are 11 SoftKeySets.
>    -- SEP001BD52D0885: Send softkeyset to OnHook(0) on line 0  and call
>0
>    -- SEP001BD52D0885: >> Got message ConfigStatReqMessage
>    -- SEP001BD52D0885: Sending ConfigStatMessage, lines 1, speeddials 2
>    -- SEP001BD52D0885: >> Got message HeadsetStatusMessage
>    -- SEP001BD52D0885: >> Got message CapabilitiesResMessage
>    -- SEP001BD52D0885: Device has 8 Capabilities
>    -- SEP001BD52D0885: CISCO:    25 Wideband 256k             AST:     0
>unknown
>    -- SEP001BD52D0885: CISCO:     4 G.711 u-law 64k           AST:     4
>G.711 u-law
>    -- SEP001BD52D0885: CISCO:     2 G.711 A-law 64k           AST:     8
>G.711 A-law
>    -- SEP001BD52D0885: CISCO:    15 G.729 Annex B             AST:     0
>unknown
>    -- SEP001BD52D0885: CISCO:    16 G.729 Annex A + B         AST:     0
>unknown
>    -- SEP001BD52D0885: CISCO:    11 G.729                     AST:     0
>unknown
>    -- SEP001BD52D0885: CISCO:    12 G.729 Annex A             AST:   256
>G.729A
>    -- SEP001BD52D0885: CISCO:     1 Non-standard codec        AST:     0
>unknown
>    -- SEP001BD52D0885: >> Got message LineStatReqMessage
>    -- SEP001BD52D0885: Configuring line number 0
>    -- SEP001BD52D0885: Looking for line by instance 0
>    -- SEP001BD52D0885: searching for index 0 and type 9
>[Jul 31 16:02:23] ERROR[13443]: sccp_actions.c:540
>sccp_handle_line_number:
>SEP001BD52D0885: requested a line configuration for unknown line 0
>    -- SEP001BD52D0885: >> Got message ForwardStatReqMessage
>    -- SEP001BD52D0885: Got Forward Status Request.  Line: 1
>    -- SEP001BD52D0885: Looking for line by instance 0
>    -- SEP001BD52D0885: Send Forward Status.  Instance: 1
>    -- SEP001BD52D0885: >> Got message SpeedDialStatReqMessage
>    -- SEP001BD52D0885: Speed Dial Request for Button 1
>    -- SEP001BD52D0885: searching for index 1 and type 2
>    -- SEP001BD52D0885: found name: speeddial-2602, ext: 2602, index: 1,
>type: 2
>    -- SEP001BD52D0885: >> Got message SpeedDialStatReqMessage
>    -- SEP001BD52D0885: Speed Dial Request for Button 2
>    -- SEP001BD52D0885: searching for index 2 and type 2
>    -- SEP001BD52D0885: found name: speeddial-2603, ext: 2603, index: 2,
>type: 2
>    -- SEP001BD52D0885: >> Got message TimeDateReqMessage
>    -- SEP001BD52D0885: Send date/time
>    -- SEP001BD52D0885: >> Got message RegisterAvailableLinesMessage
>    -- SEP001BD52D0885: Post registration process
>    -- SEP001BD52D0885: Clear the status prompt on line 0 and callid 0
>    -- SEP001BD52D0885: Display prompt on line 0, callid 0, timeout 0
>    -- SEP001BD52D0885: Send softkeyset to OnHook(0) on line 0  and call
>0
>    -- SEP001BD52D0885: Post registration process... done!
>
>> -----Original Message-----
>> From:	Lacy Moore - Aspendora [SMTP:aspendora at gmail.com]
>> Sent:	Monday, July 30, 2007 5:05 PM
>> To:	chan-sccp-users at lists.berlios.de
>> Subject:	Re: [Chan-sccp-users] R: chan_sccp and 7970
>>
>> As long as you have the include statement for the
>> extensions_additional.conf file, all that should be correct.
>>
>> Hmm...  in the modules.conf file, do you have a line that reads
>>
>> noload => chan_skinny.so
>>
>> or if you are not autoloading, make sure that you do not have a load =>
>> chan_skinny.so.
>>
>> I'm just guessing at different possibilities at this point.
>>
>> I just reread your original message.  Still not sure why speeddials
>work
>> and manual dialing doesn't.  I know it's different parts of either the
>> phone firmware or sccp that handles that.  You can put text in the
>> speeddials and it sends the text to asterisk, but you can't dial a
>number
>> from missed calls with the text included.
>>
>> This makes me think something is messed up in your chan_sccp.  I can't
>see
>> a difference between your sccp.conf and mine that would cause these
>> issues.
>>
>> On 7/30/07, Zuber, Jonathan < jzuber at drs.ca <mailto:jzuber at drs.ca>>
>wrote:
>>
>>
>> 	I have this...
>>
>> 	[default]
>>
>> 	include => ext-local
>>
>> 	then under extensions_additional.conf I have my
>> 	exten => 2001,1,Dial(SCCP/2001,10,r)
>> 	exten => 2001,n,Hangup()
>> 	exten => 2002,1,Dial(SCCP/2002,10,r)   ....
>>
>> 	under the [ext-local]
>>
>> 	Which I believe is set up correctly
>>
>>
>>
>> 	> -----Original Message-----
>> 	> From: Lacy Moore - Aspendora [ SMTP:aspendora at gmail.com
>> <mailto:SMTP:aspendora at gmail.com>]
>> 	> Sent: Monday, July 30, 2007 4:13 PM
>> 	> To:   chan-sccp-users at lists.berlios.de
>> <mailto:chan-sccp-users at lists.berlios.de>
>> 	> Subject:      Re: [Chan-sccp-users] R: chan_sccp and 7970
>> 	>
>> 	>
>> 	> On 7/30/07, Zuber, Jonathan < jzuber at drs.ca <mailto:jzuber at drs.ca>
>> <mailto: jzuber at drs.ca  <mailto:jzuber at drs.ca>>> wrote:
>> 	>
>> 	>
>> 	>       Ok here is sccp.conf (general and 1 phone and 1 line)
>> 	>
>> 	>
>> 	>
>> 	> Ok, first question...  Are you using static IPs for the phones?
>> You've
>> 	> told it in sccp.conf that the phone can only be the IP address you
>> have
>> 	> listed.
>> 	>
>> 	> Second, I'm assuming this is a Trixbox and/or FreePBX system.  I
>> believe
>> 	> the default context for the extensions is from-internal.  The
>> context
>> 	> named default in extensions.conf may not be referencing
>> (including) the
>> 	> corresponding context in extensions_additional.conf.
>> 	>
>> 	> Make sure you have something similar to this:
>> 	>
>> 	> extensions.conf :
>> 	> #include extensions_additional.conf
>> 	>
>> 	> [default]
>> 	> include => additional_default
>> 	>
>> 	> ...
>> 	>
>> 	>
>> 	> extensions_additional.conf
>> 	> [additional_default]
>> 	> exten => 2001 ... and so on as you posted before
>> 	>
>> 	>
>> 	>
>> 	>
>> 	>
>> 	>   << File: ATT395276.txt >>
>> 	_______________________________________________
>> 	Chan-sccp-users mailing list
>> 	Chan-sccp-users at lists.berlios.de
>> <mailto:Chan-sccp-users at lists.berlios.de>
>> 	<https://lists.berlios.de/mailman/listinfo/chan-sccp-users>
>>
>>
>>
>>
>>
>> --
>> Lacy Moore
>> Somewhere I wish I wasn't  << File: ATT395652.txt >>
>_______________________________________________
>Chan-sccp-users mailing list
>Chan-sccp-users at lists.berlios.de
>https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From peder at networkoblivion.com  Tue Jul 31 19:58:58 2007
From: peder at networkoblivion.com (peder at networkoblivion.com)
Date: Tue, 31 Jul 2007 12:58:58 -0500 (CDT)
Subject: [Chan-sccp-users] At Sergio's attention !
In-Reply-To: <004f01c7d381$ae0b0c30$0a212490$@it>
Message-ID: <30925737.211185904738704.JavaMail.root@ubuntubert>

What does it do?

----- Original Message -----
From: "Federico Santulli" <mobile at nhm.it>
To: chan-sccp-users at lists.berlios.de
Cc: mlists at c-net.it
Sent: Tuesday, July 31, 2007 9:47:11 AM (GMT-0600) America/Chicago
Subject: [Chan-sccp-users] At Sergio's attention !

I have made some works on two functions. Would you like to test ?

void * sccp_pbx_startchannel(void *data) {
	struct ast_channel * chan = data;
	sccp_channel_t * c;
	sccp_line_t * l;
	sccp_device_t * d;
	uint8_t res_exten = 0, res_wait = 0, res_timeout = 0;

	c = CS_AST_CHANNEL_PVT(chan);
	
    if (!c) {
		/* let's go out as soon as possibile */
		if (!ast_test_flag(chan, AST_FLAG_ZOMBIE)) {
			ast_log(LOG_ERROR, "SCCP: return from the dial
thread. No sccp channel available for %s\n", (chan) ? chan->name :
"(null)");
            if (chan)
				ast_hangup(chan);
		} 
        else
        {
			ast_log(LOG_DEBUG, "SCCP: return from the dial
thread. No sccp channel available for zombie\n");
		}
		return NULL;
	}
	
    if(ast_test_flag(chan, AST_FLAG_ZOMBIE))
	{
        ast_log(LOG_DEBUG, "SCCP: Channel has PVT but flagged as zombie. No
sccp channel available\n);
        return NULL;
    }    

	/* this is an outgoung call */
	ast_mutex_lock(&c->lock);
	c->calltype = SKINNY_CALLTYPE_OUTBOUND;
	c->hangupok = 0;
	
	l = c->line;
	d = c->device;

	if (!l || !d) {
		/* let's go out as soon as possibile */
		ast_log(LOG_ERROR, "%s: return from the dial thread. No line
or device defined for channel %d\n", DEV_ID_LOG(d), c->callid);
		c->hangupok = 1;
		ast_mutex_unlock(&c->lock);
		if (chan)
			ast_hangup(chan);
		return NULL;
	}
	
	sccp_log(1)( VERBOSE_PREFIX_3 "%s: New call on line %s\n",
DEV_ID_LOG(d), l->name);

	sccp_channel_set_callingparty(c, l->cid_name, l->cid_num);

	if (ast_strlen_zero(c->dialedNumber)) 
    {
    	/* we have to collect the number */
    	/* the phone is on TsOffHook state */
    	sccp_log(10)( VERBOSE_PREFIX_3 "%s: Waiting for the number to dial
on channel %s-%d\n", DEV_ID_LOG(l->device), l->name, c->callid);
    	/* let's use the keypad to collect digits */
    	c->digittimeout = time(0)+GLOB(firstdigittimeout);
    	ast_mutex_unlock(&c->lock);
    
    	res_exten = 1;
    
    	do {
    		usleep(100);
    		pthread_testcancel();
    		ast_mutex_lock(&c->lock);
    		if (!ast_strlen_zero(c->dialedNumber)) {
    			res_exten = (c->dialedNumber[0] == '*' ||
ast_matchmore_extension(chan, chan->context, c->dialedNumber, 1,
l->cid_num));
    		}
    		if (! (res_wait = ( c->state == SCCP_CHANNELSTATE_DOWN ||
chan->_state == AST_STATE_DOWN
    							|| chan->_softhangup
|| c->calltype == SKINNY_CALLTYPE_INBOUND)) ) {
    			if (CS_AST_CHANNEL_PVT(chan)) {
    				res_timeout = (time(0) < c->digittimeout);
    			} else
    				res_timeout = 0;
    		}
    		ast_mutex_unlock(&c->lock);
    	} while ( (res_wait == 0) && res_exten &&  res_timeout);
    
    	if (res_wait != 0) {
    		/* AST_STATE_DOWN or softhangup */
    		sccp_log(10)(VERBOSE_PREFIX_3 "%s: return from the dial
thread for DOWN, HANGUP or PICKUP cause\n", DEV_ID_LOG(l->device));
    		ast_mutex_lock(&c->lock);
    		c->hangupok = 1;
    		ast_mutex_unlock(&c->lock);
    		return NULL;
    	}
    }
    else 
    {
        /* we have a number to dial. Let's do it */
		sccp_log(10)( VERBOSE_PREFIX_3 "%s: Dialing %s on channel
%s-%d\n", DEV_ID_LOG(l->device), c->dialedNumber, l->name, c->callid);
		sccp_channel_set_calledparty(c, c->dialedNumber,
c->dialedNumber);
		sccp_indicate_nolock(c, SCCP_CHANNELSTATE_DIALING);
		ast_mutex_unlock(&c->lock);
	}

	ast_mutex_lock(&c->lock);
	sccp_copy_string(chan->exten, c->dialedNumber, sizeof(chan->exten));
	sccp_copy_string(d->lastNumber, c->dialedNumber,
sizeof(d->lastNumber));
	sccp_channel_set_calledparty(c, c->dialedNumber, c->dialedNumber);
	/* proceed call state is needed to display the called number.
	The phone will not display callinfo in offhook state */
	sccp_channel_set_callstate(c, SKINNY_CALLSTATE_PROCEED);
	sccp_channel_send_callinfo(c);
	sccp_dev_clearprompt(d,c->line->instance, c->callid);
	sccp_dev_displayprompt(d, c->line->instance, c->callid,
SKINNY_DISP_CALL_PROCEED, 0);
	c->hangupok = 1;
	ast_mutex_unlock(&c->lock);

	if ( !ast_strlen_zero(c->dialedNumber)
			&& ast_exists_extension(chan, chan->context,
c->dialedNumber, 1, l->cid_num) ) {
		/* found an extension, let's dial it */
		sccp_log(10)(VERBOSE_PREFIX_3 "%s: channel %s-%d is dialing
number %s\n", DEV_ID_LOG(l->device), l->name, c->callid, c->dialedNumber);
		/* Answer dialplan command works only when in RINGING OR
RING ast_state */
		sccp_ast_setstate(c, AST_STATE_RING);
		if (ast_pbx_run(chan)) {
			sccp_indicate_lock(c,
SCCP_CHANNELSTATE_INVALIDNUMBER);
		}
	} else {
		/* timeout and no extension match */
		sccp_indicate_lock(c, SCCP_CHANNELSTATE_INVALIDNUMBER);
	}
	sccp_log(10)(VERBOSE_PREFIX_3 "%s: return from the startchannel on
exit\n", DEV_ID_LOG(l->device));
	return NULL;
}


static int sccp_pbx_hangup(struct ast_channel * ast) {
    sccp_channel_t * c;
    sccp_line_t    * l = NULL;
    sccp_device_t  * d = NULL;

    c = CS_AST_CHANNEL_PVT(ast);

    if (!c) {
        sccp_log(10)(VERBOSE_PREFIX_3 "SCCP: Asked to hangup channel %s.
SCCP channel already deleted\n",ast->name);
        return 0;
    }

    /* tests on channel */
    if (ast_test_flag(ast, AST_FLAG_ZOMBIE))
    {
        sccp_log(1)(VERBOSE_PREFIX_3 "SCCP: Hanging up zombie call. Be
scared.\n");
    }
    else
    {
        sccp_log(1)(VERBOSE_PREFIX_3 "SCCP: Hangup call %s\n", ast->name);
    }

    /* here the ast channel is locked */
    ast_mutex_lock(&c->lock);

    l = c->line;
    d = l->device;
    
    sccp_log(10)(VERBOSE_PREFIX_3 "%s: Current channel %s-%d state
%s(%d)\n", DEV_ID_LOG(d), l ? l->name : "(null)", c->callid,
sccp_indicate2str(c->state), c->state);

    /* Determine how to disconnect */
    if (c->owner != ast) {
            sccp_log(10)(VERBOSE_PREFIX_3 "SCCP: We aren't the owner. Can't
hangup call.\n");
            ast_mutex_unlock(&c->lock);
            return 0;
    }
    
    if (c->rtp) {
            sccp_channel_closereceivechannel(c);
            sccp_channel_stop_rtp(c);
    }

    if (c->state != SCCP_CHANNELSTATE_DOWN) {
            /* we are in a passive hangup */
            if (GLOB(remotehangup_tone) && d->state ==
SCCP_DEVICESTATE_OFFHOOK && c == sccp_channel_get_active(d))
                    sccp_dev_starttone(d, GLOB(remotehangup_tone), 0, 0,
10);
            sccp_indicate_nolock(c, SCCP_CHANNELSTATE_ONHOOK);
    }

    if (c->calltype == SKINNY_CALLTYPE_OUTBOUND && !c->hangupok) {
            sccp_log(10)(VERBOSE_PREFIX_3 "%s: Waiting for the dialing
thread to go down on channel %s\n", DEV_ID_LOG(d), ast->name);
            /* Here there was a loop but thread should end his way */
    }
    
    /* Here usecount is updated */
    ast_mutex_lock(&GLOB(usecnt_lock));
    GLOB(usecnt)--;
    ast_mutex_unlock(&GLOB(usecnt_lock));
    ast_update_use_count();

    /* Updating session */
    if (d && d->session) {
            ast_mutex_lock(&d->session->lock);
            d->session->needcheckringback = 1;
            ast_mutex_unlock(&d->session->lock);
    }

    CS_AST_CHANNEL_PVT(ast) = NULL;
    c->owner = NULL;
    
    sccp_channel_delete(c);

    ast_mutex_unlock(&c->lock);
    return 0;
}


_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users



From dayton at voxter.ca  Tue Jul 31 21:47:38 2007
From: dayton at voxter.ca (Dayton Turner)
Date: Tue, 31 Jul 2007 12:47:38 -0700
Subject: [Chan-sccp-users] R: chan_sccp and 7970
Message-ID: <A5DF52EBE15A1B44A81CD8F4810A095827238B@SNOOPY.voxter.ca>

 
Thanks,
Dayton


Dayton Turner, CTO
Voxter Communications Inc
#120-8208 Swenson Way
Delta BC Canada V4G 1J6
T: 604.629.8647
F: 604.629.5947
www.voxter.ca

----- Original Message -----
From: chan-sccp-users-bounces at lists.berlios.de <chan-sccp-users-bounces at lists.berlios.de>
To: 'chan-sccp-users at lists.berlios.de' <chan-sccp-users at lists.berlios.de>
Sent: Tue Jul 31 09:17:19 2007
Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970

Is this similar to your output for a 7970 or 7971 phone upon startup?? I see
there is an error near the end, could that be the reason for me being unable
to dial?

 -- GLOBAL: Preferred capability (ulaw)
    -- Added speeddial 1: sccp-2603 (2603)
    -- Added speeddial 2: sccp-2603 (2603)
    -- Added device 'SEP0019563DD448' (7970)
    -- Added speeddial 1: sccp-2602 (2602)
    -- Added speeddial 2: sccp-2604 (2604)
    -- Added device 'SEP0019305D3EF3' (7970)
    -- Added speeddial 1: speeddial-2602 (2602)
    -- Added speeddial 2: speeddial-2603 (2603)
    -- Added device 'SEP001BD52D0885' (7971)
    -- SCCP: Looking for line 2602
    -- Added line '2602'
    -- SCCP: Looking for line 2603
    -- Added line '2603'
    -- SCCP: Looking for line 2604
    -- Added line '2604'
    -- SCCP channel driver up and running on 10.3.3.235:2000
    -- SCCP listening on 10.3.3.235:2000
  == Registered channel type 'SCCP' (Skinny Client Control Protocol (SCCP))
  == Registered application 'SetCalledParty'
chan_sccp.so => (Skinny Client Control Protocol (SCCP). Release: 20070428)
  == Registered channel type 'Feature' (Feature Proxy Channel Driver)
chan_features.so => (Feature Proxy Channel)
Asterisk Ready.
*CLI>     -- SCCP: Accepted connection from 10.3.3.247
    -- SCCP: Using ip 10.3.3.235
    -- SCCP: >> Got message AlarmMessage
    -- SCCP: Alarm Message: Severity: Informational (2), 14:
Name=SEP001BD52D0885 Load= term71.default Last=CM-closed-TCP [0/0]
    -- SCCP: >> Got message RegisterMessage
    -- SEP001BD52D0885: is registering, Instance: 0, Type: Cisco7971 (119),
Version: 12
    -- SEP001BD52D0885: Allocating device to session (17) 10.3.3.247
    -- SEP001BD52D0885: Building button template Cisco7971(119), user config
7971
    -- SEP001BD52D0885: Phone available lines 8
    -- SEP001BD52D0885: Auto logging into 2604
    -- SCCP: Looking for line 2604
    -- SEP001BD52D0885: Attaching line 2604 to this device
    -- SEP001BD52D0885: Ask the phone to send keepalive message every 60
seconds
    -- SEP001BD52D0885: Display notify with timeout 5
    -- SEP001BD52D0885: Send speaker mode 2
    -- SEP001BD52D0885: Clear the status prompt on line 0 and callid 0
    -- SEP001BD52D0885: Restoring device status (dnd, cfwd*) from the
asterisk db
    -- SCCP: Looking for line 2604
    -- SEP001BD52D0885: found line 2604
    -- SCCP: Asterisk asked for the state (1) of the line 2604
    -- SEP001BD52D0885: >> Got message IpPortMessage
    -- SEP001BD52D0885: >> Got message ButtonTemplateReqMessage
    -- SEP001BD52D0885: Building button template Cisco7971(119), user config
7971
    -- SEP001BD52D0885: Looking for a line button place 2604 (1)
    -- SEP001BD52D0885: Configured Phone Button [01] = LINE (2604),
temporary instance (1)
    -- SEP001BD52D0885: Looking for a speeddial button place speeddial-2602
(1)
    -- SEP001BD52D0885: Configured Phone Button [02] = SPEEDIAL
(speeddial-2602) temporary instance (2)
    -- SEP001BD52D0885: Looking for a speeddial button place speeddial-2603
(2)
    -- SEP001BD52D0885: Configured Phone Button [03] = SPEEDIAL
(speeddial-2603) temporary instance (3)
    -- SEP001BD52D0885: Button Template [01] = Line (9), instance 1
    -- SEP001BD52D0885: Button Template [02] = SpeedDial (2), instance 1
    -- SEP001BD52D0885: Button Template [03] = SpeedDial (2), instance 2
    -- SEP001BD52D0885: >> Got message SoftKeyTemplateReqMessage
    -- SEP001BD52D0885: Button(0)[ 1] = Redial
    -- SEP001BD52D0885: Button(1)[ 2] = NewCall
    -- SEP001BD52D0885: Button(2)[ 3] = Hold
    -- SEP001BD52D0885: Button(3)[ 4] = Transfer
    -- SEP001BD52D0885: Button(4)[ 5] = CFwdALL
    -- SEP001BD52D0885: Button(5)[ 6] = CFwdBusy
    -- SEP001BD52D0885: Button(6)[ 7] = CFwdNoAnswer
    -- SEP001BD52D0885: Button(7)[ 8] = &lt;&lt;
    -- SEP001BD52D0885: Button(8)[ 9] = EndCall
    -- SEP001BD52D0885: Button(9)[10] = Resume
    -- SEP001BD52D0885: Button(10)[11] = Answer
    -- SEP001BD52D0885: Button(11)[12] = Private
    -- SEP001BD52D0885: Button(12)[13] = TrnsfVM
    -- SEP001BD52D0885: Button(13)[14] = DND
    -- SEP001BD52D0885: >> Got message SoftKeySetReqMessage
    -- SEP001BD52D0885: TRANSFER    is enabled
    -- SEP001BD52D0885: DND         is disabled
    -- SEP001BD52D0885: PRIVATE     is disabled
    -- SEP001BD52D0885: CFWDALL     is  enabled
    -- SEP001BD52D0885: CFWDBUSY    is  disabled
    -- SEP001BD52D0885: TRNSFVM     is  disabled
    -- SEP001BD52D0885: Set[0 ]= 0 :Redial     1 :NewCall
    -- SEP001BD52D0885: Set[1 ]= 0 :Hold       1 :EndCall    2 :Transfer   3
:CFwdALL
    -- SEP001BD52D0885: Set[2 ]= 0 :Resume     1 :NewCall    2 :EndCall    3
:Transfer
    -- SEP001BD52D0885: Set[3 ]= 0 :Answer     1 :EndCall
    -- SEP001BD52D0885: Set[4 ]= 0 :Redial     1 :EndCall    3 :CFwdALL
    -- SEP001BD52D0885: Set[5 ]= 0 :Hold       1 :EndCall    2 :Transfer   3
:CFwdALL
    -- SEP001BD52D0885: Set[6 ]= 0 :&lt;&lt;   1 :EndCall
    -- SEP001BD52D0885: Set[7 ]=
    -- SEP001BD52D0885: Set[8 ]= 1 :EndCall    2 :Transfer   3 :CFwdALL
    -- SEP001BD52D0885: Set[9 ]= 0 :Redial     1 :EndCall
    -- SEP001BD52D0885: Set[10]=
    -- There are 11 SoftKeySets.
    -- SEP001BD52D0885: Send softkeyset to OnHook(0) on line 0  and call 0
    -- SEP001BD52D0885: >> Got message ConfigStatReqMessage
    -- SEP001BD52D0885: Sending ConfigStatMessage, lines 1, speeddials 2
    -- SEP001BD52D0885: >> Got message HeadsetStatusMessage
    -- SEP001BD52D0885: >> Got message CapabilitiesResMessage
    -- SEP001BD52D0885: Device has 8 Capabilities
    -- SEP001BD52D0885: CISCO:    25 Wideband 256k             AST:     0
unknown
    -- SEP001BD52D0885: CISCO:     4 G.711 u-law 64k           AST:     4
G.711 u-law
    -- SEP001BD52D0885: CISCO:     2 G.711 A-law 64k           AST:     8
G.711 A-law
    -- SEP001BD52D0885: CISCO:    15 G.729 Annex B             AST:     0
unknown
    -- SEP001BD52D0885: CISCO:    16 G.729 Annex A + B         AST:     0
unknown
    -- SEP001BD52D0885: CISCO:    11 G.729                     AST:     0
unknown
    -- SEP001BD52D0885: CISCO:    12 G.729 Annex A             AST:   256
G.729A
    -- SEP001BD52D0885: CISCO:     1 Non-standard codec        AST:     0
unknown
    -- SEP001BD52D0885: >> Got message LineStatReqMessage
    -- SEP001BD52D0885: Configuring line number 0
    -- SEP001BD52D0885: Looking for line by instance 0
    -- SEP001BD52D0885: searching for index 0 and type 9
[Jul 31 16:02:23] ERROR[13443]: sccp_actions.c:540 sccp_handle_line_number:
SEP001BD52D0885: requested a line configuration for unknown line 0
    -- SEP001BD52D0885: >> Got message ForwardStatReqMessage
    -- SEP001BD52D0885: Got Forward Status Request.  Line: 1
    -- SEP001BD52D0885: Looking for line by instance 0
    -- SEP001BD52D0885: Send Forward Status.  Instance: 1
    -- SEP001BD52D0885: >> Got message SpeedDialStatReqMessage
    -- SEP001BD52D0885: Speed Dial Request for Button 1
    -- SEP001BD52D0885: searching for index 1 and type 2
    -- SEP001BD52D0885: found name: speeddial-2602, ext: 2602, index: 1,
type: 2
    -- SEP001BD52D0885: >> Got message SpeedDialStatReqMessage
    -- SEP001BD52D0885: Speed Dial Request for Button 2
    -- SEP001BD52D0885: searching for index 2 and type 2
    -- SEP001BD52D0885: found name: speeddial-2603, ext: 2603, index: 2,
type: 2
    -- SEP001BD52D0885: >> Got message TimeDateReqMessage
    -- SEP001BD52D0885: Send date/time
    -- SEP001BD52D0885: >> Got message RegisterAvailableLinesMessage
    -- SEP001BD52D0885: Post registration process
    -- SEP001BD52D0885: Clear the status prompt on line 0 and callid 0
    -- SEP001BD52D0885: Display prompt on line 0, callid 0, timeout 0
    -- SEP001BD52D0885: Send softkeyset to OnHook(0) on line 0  and call 0
    -- SEP001BD52D0885: Post registration process... done!

> -----Original Message-----
> From:	Lacy Moore - Aspendora [SMTP:aspendora at gmail.com]
> Sent:	Monday, July 30, 2007 5:05 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] R: chan_sccp and 7970
> 
> As long as you have the include statement for the
> extensions_additional.conf file, all that should be correct.
>  
> Hmm...  in the modules.conf file, do you have a line that reads
>  
> noload => chan_skinny.so
>  
> or if you are not autoloading, make sure that you do not have a load =>
> chan_skinny.so.
>  
> I'm just guessing at different possibilities at this point.  
>  
> I just reread your original message.  Still not sure why speeddials work
> and manual dialing doesn't.  I know it's different parts of either the
> phone firmware or sccp that handles that.  You can put text in the
> speeddials and it sends the text to asterisk, but you can't dial a number
> from missed calls with the text included. 
>  
> This makes me think something is messed up in your chan_sccp.  I can't see
> a difference between your sccp.conf and mine that would cause these
> issues.
>  
> On 7/30/07, Zuber, Jonathan < jzuber at drs.ca <mailto:jzuber at drs.ca>> wrote:
> 
> 
> 	I have this...
> 	
> 	[default]
> 	
> 	include => ext-local
> 	
> 	then under extensions_additional.conf I have my 
> 	exten => 2001,1,Dial(SCCP/2001,10,r)
> 	exten => 2001,n,Hangup()
> 	exten => 2002,1,Dial(SCCP/2002,10,r)   ....
> 	
> 	under the [ext-local]
> 	
> 	Which I believe is set up correctly
> 	
> 	
> 	
> 	> -----Original Message----- 
> 	> From: Lacy Moore - Aspendora [ SMTP:aspendora at gmail.com
> <mailto:SMTP:aspendora at gmail.com>]
> 	> Sent: Monday, July 30, 2007 4:13 PM
> 	> To:   chan-sccp-users at lists.berlios.de
> <mailto:chan-sccp-users at lists.berlios.de>
> 	> Subject:      Re: [Chan-sccp-users] R: chan_sccp and 7970
> 	>
> 	>
> 	> On 7/30/07, Zuber, Jonathan < jzuber at drs.ca <mailto:jzuber at drs.ca>
> <mailto: jzuber at drs.ca  <mailto:jzuber at drs.ca>>> wrote:
> 	>
> 	>
> 	>       Ok here is sccp.conf (general and 1 phone and 1 line)
> 	>
> 	>
> 	>
> 	> Ok, first question...  Are you using static IPs for the phones?
> You've
> 	> told it in sccp.conf that the phone can only be the IP address you
> have
> 	> listed.
> 	>
> 	> Second, I'm assuming this is a Trixbox and/or FreePBX system.  I
> believe
> 	> the default context for the extensions is from-internal.  The
> context 
> 	> named default in extensions.conf may not be referencing
> (including) the
> 	> corresponding context in extensions_additional.conf.
> 	>
> 	> Make sure you have something similar to this:
> 	>
> 	> extensions.conf :
> 	> #include extensions_additional.conf
> 	>
> 	> [default]
> 	> include => additional_default
> 	>
> 	> ...
> 	>
> 	>
> 	> extensions_additional.conf
> 	> [additional_default]
> 	> exten => 2001 ... and so on as you posted before 
> 	>
> 	>
> 	>
> 	>
> 	>
> 	>   << File: ATT395276.txt >>
> 	_______________________________________________
> 	Chan-sccp-users mailing list
> 	Chan-sccp-users at lists.berlios.de
> <mailto:Chan-sccp-users at lists.berlios.de>
> 	<https://lists.berlios.de/mailman/listinfo/chan-sccp-users>
> 	
> 
> 
> 
> 
> -- 
> Lacy Moore
> Somewhere I wish I wasn't  << File: ATT395652.txt >> 
_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070731/809d2996/attachment.html>

From dayton at voxter.ca  Tue Jul 31 22:07:42 2007
From: dayton at voxter.ca (Dayton Turner)
Date: Tue, 31 Jul 2007 13:07:42 -0700
Subject: [Chan-sccp-users] R: chan_sccp and 7970
Message-ID: <A5DF52EBE15A1B44A81CD8F4810A095827238C@SNOOPY.voxter.ca>

 P.                                   Sw*q
Thanks,
Dayton


Dayton Turner, CTO
Voxter Communications Inc
#120-8208 Swenson Way
Delta BC Canada V4G 1J6
T: 604.629.8647
F: 604.629.5947
www.voxter.ca

----- Original Message -----
From: chan-sccp-users-bounces at lists.berlios.de <chan-sccp-users-bounces at lists.berlios.de>
To: 'chan-sccp-users at lists.berlios.de' <chan-sccp-users at lists.berlios.de>
Sent: Tue Jul 31 09:17:19 2007
Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970

Is this similar to your output for a 7970 or 7971 phone upon startup?? I see
there is an error near the end, could that be the reason for me being unable
to dial?

 -- GLOBAL: Preferred capability (ulaw)
    -- Added speeddial 1: sccp-2603 (2603)
    -- Added speeddial 2: sccp-2603 (2603)
    -- Added device 'SEP0019563DD448' (7970)
    -- Added speeddial 1: sccp-2602 (2602)
    -- Added speeddial 2: sccp-2604 (2604)
    -- Added device 'SEP0019305D3EF3' (7970)
    -- Added speeddial 1: speeddial-2602 (2602)
    -- Added speeddial 2: speeddial-2603 (2603)
    -- Added device 'SEP001BD52D0885' (7971)
    -- SCCP: Looking for line 2602
    -- Added line '2602'
    -- SCCP: Looking for line 2603
    -- Added line '2603'
    -- SCCP: Looking for line 2604
    -- Added line '2604'
    -- SCCP channel driver up and running on 10.3.3.235:2000
    -- SCCP listening on 10.3.3.235:2000
  == Registered channel type 'SCCP' (Skinny Client Control Protocol (SCCP))
  == Registered application 'SetCalledParty'
chan_sccp.so => (Skinny Client Control Protocol (SCCP). Release: 20070428)
  == Registered channel type 'Feature' (Feature Proxy Channel Driver)
chan_features.so => (Feature Proxy Channel)
Asterisk Ready.
*CLI>     -- SCCP: Accepted connection from 10.3.3.247
    -- SCCP: Using ip 10.3.3.235
    -- SCCP: >> Got message AlarmMessage
    -- SCCP: Alarm Message: Severity: Informational (2), 14:
Name=SEP001BD52D0885 Load= term71.default Last=CM-closed-TCP [0/0]
    -- SCCP: >> Got message RegisterMessage
    -- SEP001BD52D0885: is registering, Instance: 0, Type: Cisco7971 (119),
Version: 12
    -- SEP001BD52D0885: Allocating device to session (17) 10.3.3.247
    -- SEP001BD52D0885: Building button template Cisco7971(119), user config
7971
    -- SEP001BD52D0885: Phone available lines 8
    -- SEP001BD52D0885: Auto logging into 2604
    -- SCCP: Looking for line 2604
    -- SEP001BD52D0885: Attaching line 2604 to this device
    -- SEP001BD52D0885: Ask the phone to send keepalive message every 60
seconds
    -- SEP001BD52D0885: Display notify with timeout 5
    -- SEP001BD52D0885: Send speaker mode 2
    -- SEP001BD52D0885: Clear the status prompt on line 0 and callid 0
    -- SEP001BD52D0885: Restoring device status (dnd, cfwd*) from the
asterisk db
    -- SCCP: Looking for line 2604
    -- SEP001BD52D0885: found line 2604
    -- SCCP: Asterisk asked for the state (1) of the line 2604
    -- SEP001BD52D0885: >> Got message IpPortMessage
    -- SEP001BD52D0885: >> Got message ButtonTemplateReqMessage
    -- SEP001BD52D0885: Building button template Cisco7971(119), user config
7971
    -- SEP001BD52D0885: Looking for a line button place 2604 (1)
    -- SEP001BD52D0885: Configured Phone Button [01] = LINE (2604),
temporary instance (1)
    -- SEP001BD52D0885: Looking for a speeddial button place speeddial-2602
(1)
    -- SEP001BD52D0885: Configured Phone Button [02] = SPEEDIAL
(speeddial-2602) temporary instance (2)
    -- SEP001BD52D0885: Looking for a speeddial button place speeddial-2603
(2)
    -- SEP001BD52D0885: Configured Phone Button [03] = SPEEDIAL
(speeddial-2603) temporary instance (3)
    -- SEP001BD52D0885: Button Template [01] = Line (9), instance 1
    -- SEP001BD52D0885: Button Template [02] = SpeedDial (2), instance 1
    -- SEP001BD52D0885: Button Template [03] = SpeedDial (2), instance 2
    -- SEP001BD52D0885: >> Got message SoftKeyTemplateReqMessage
    -- SEP001BD52D0885: Button(0)[ 1] = Redial
    -- SEP001BD52D0885: Button(1)[ 2] = NewCall
    -- SEP001BD52D0885: Button(2)[ 3] = Hold
    -- SEP001BD52D0885: Button(3)[ 4] = Transfer
    -- SEP001BD52D0885: Button(4)[ 5] = CFwdALL
    -- SEP001BD52D0885: Button(5)[ 6] = CFwdBusy
    -- SEP001BD52D0885: Button(6)[ 7] = CFwdNoAnswer
    -- SEP001BD52D0885: Button(7)[ 8] = &lt;&lt;
    -- SEP001BD52D0885: Button(8)[ 9] = EndCall
    -- SEP001BD52D0885: Button(9)[10] = Resume
    -- SEP001BD52D0885: Button(10)[11] = Answer
    -- SEP001BD52D0885: Button(11)[12] = Private
    -- SEP001BD52D0885: Button(12)[13] = TrnsfVM
    -- SEP001BD52D0885: Button(13)[14] = DND
    -- SEP001BD52D0885: >> Got message SoftKeySetReqMessage
    -- SEP001BD52D0885: TRANSFER    is enabled
    -- SEP001BD52D0885: DND         is disabled
    -- SEP001BD52D0885: PRIVATE     is disabled
    -- SEP001BD52D0885: CFWDALL     is  enabled
    -- SEP001BD52D0885: CFWDBUSY    is  disabled
    -- SEP001BD52D0885: TRNSFVM     is  disabled
    -- SEP001BD52D0885: Set[0 ]= 0 :Redial     1 :NewCall
    -- SEP001BD52D0885: Set[1 ]= 0 :Hold       1 :EndCall    2 :Transfer   3
:CFwdALL
    -- SEP001BD52D0885: Set[2 ]= 0 :Resume     1 :NewCall    2 :EndCall    3
:Transfer
    -- SEP001BD52D0885: Set[3 ]= 0 :Answer     1 :EndCall
    -- SEP001BD52D0885: Set[4 ]= 0 :Redial     1 :EndCall    3 :CFwdALL
    -- SEP001BD52D0885: Set[5 ]= 0 :Hold       1 :EndCall    2 :Transfer   3
:CFwdALL
    -- SEP001BD52D0885: Set[6 ]= 0 :&lt;&lt;   1 :EndCall
    -- SEP001BD52D0885: Set[7 ]=
    -- SEP001BD52D0885: Set[8 ]= 1 :EndCall    2 :Transfer   3 :CFwdALL
    -- SEP001BD52D0885: Set[9 ]= 0 :Redial     1 :EndCall
    -- SEP001BD52D0885: Set[10]=
    -- There are 11 SoftKeySets.
    -- SEP001BD52D0885: Send softkeyset to OnHook(0) on line 0  and call 0
    -- SEP001BD52D0885: >> Got message ConfigStatReqMessage
    -- SEP001BD52D0885: Sending ConfigStatMessage, lines 1, speeddials 2
    -- SEP001BD52D0885: >> Got message HeadsetStatusMessage
    -- SEP001BD52D0885: >> Got message CapabilitiesResMessage
    -- SEP001BD52D0885: Device has 8 Capabilities
    -- SEP001BD52D0885: CISCO:    25 Wideband 256k             AST:     0
unknown
    -- SEP001BD52D0885: CISCO:     4 G.711 u-law 64k           AST:     4
G.711 u-law
    -- SEP001BD52D0885: CISCO:     2 G.711 A-law 64k           AST:     8
G.711 A-law
    -- SEP001BD52D0885: CISCO:    15 G.729 Annex B             AST:     0
unknown
    -- SEP001BD52D0885: CISCO:    16 G.729 Annex A + B         AST:     0
unknown
    -- SEP001BD52D0885: CISCO:    11 G.729                     AST:     0
unknown
    -- SEP001BD52D0885: CISCO:    12 G.729 Annex A             AST:   256
G.729A
    -- SEP001BD52D0885: CISCO:     1 Non-standard codec        AST:     0
unknown
    -- SEP001BD52D0885: >> Got message LineStatReqMessage
    -- SEP001BD52D0885: Configuring line number 0
    -- SEP001BD52D0885: Looking for line by instance 0
    -- SEP001BD52D0885: searching for index 0 and type 9
[Jul 31 16:02:23] ERROR[13443]: sccp_actions.c:540 sccp_handle_line_number:
SEP001BD52D0885: requested a line configuration for unknown line 0
    -- SEP001BD52D0885: >> Got message ForwardStatReqMessage
    -- SEP001BD52D0885: Got Forward Status Request.  Line: 1
    -- SEP001BD52D0885: Looking for line by instance 0
    -- SEP001BD52D0885: Send Forward Status.  Instance: 1
    -- SEP001BD52D0885: >> Got message SpeedDialStatReqMessage
    -- SEP001BD52D0885: Speed Dial Request for Button 1
    -- SEP001BD52D0885: searching for index 1 and type 2
    -- SEP001BD52D0885: found name: speeddial-2602, ext: 2602, index: 1,
type: 2
    -- SEP001BD52D0885: >> Got message SpeedDialStatReqMessage
    -- SEP001BD52D0885: Speed Dial Request for Button 2
    -- SEP001BD52D0885: searching for index 2 and type 2
    -- SEP001BD52D0885: found name: speeddial-2603, ext: 2603, index: 2,
type: 2
    -- SEP001BD52D0885: >> Got message TimeDateReqMessage
    -- SEP001BD52D0885: Send date/time
    -- SEP001BD52D0885: >> Got message RegisterAvailableLinesMessage
    -- SEP001BD52D0885: Post registration process
    -- SEP001BD52D0885: Clear the status prompt on line 0 and callid 0
    -- SEP001BD52D0885: Display prompt on line 0, callid 0, timeout 0
    -- SEP001BD52D0885: Send softkeyset to OnHook(0) on line 0  and call 0
    -- SEP001BD52D0885: Post registration process... done!

> -----Original Message-----
> From:	Lacy Moore - Aspendora [SMTP:aspendora at gmail.com]
> Sent:	Monday, July 30, 2007 5:05 PM
> To:	chan-sccp-users at lists.berlios.de
> Subject:	Re: [Chan-sccp-users] R: chan_sccp and 7970
> 
> As long as you have the include statement for the
> extensions_additional.conf file, all that should be correct.
>  
> Hmm...  in the modules.conf file, do you have a line that reads
>  
> noload => chan_skinny.so
>  
> or if you are not autoloading, make sure that you do not have a load =>
> chan_skinny.so.
>  
> I'm just guessing at different possibilities at this point.  
>  
> I just reread your original message.  Still not sure why speeddials work
> and manual dialing doesn't.  I know it's different parts of either the
> phone firmware or sccp that handles that.  You can put text in the
> speeddials and it sends the text to asterisk, but you can't dial a number
> from missed calls with the text included. 
>  
> This makes me think something is messed up in your chan_sccp.  I can't see
> a difference between your sccp.conf and mine that would cause these
> issues.
>  
> On 7/30/07, Zuber, Jonathan < jzuber at drs.ca <mailto:jzuber at drs.ca>> wrote:
> 
> 
> 	I have this...
> 	
> 	[default]
> 	
> 	include => ext-local
> 	
> 	then under extensions_additional.conf I have my 
> 	exten => 2001,1,Dial(SCCP/2001,10,r)
> 	exten => 2001,n,Hangup()
> 	exten => 2002,1,Dial(SCCP/2002,10,r)   ....
> 	
> 	under the [ext-local]
> 	
> 	Which I believe is set up correctly
> 	
> 	
> 	
> 	> -----Original Message----- 
> 	> From: Lacy Moore - Aspendora [ SMTP:aspendora at gmail.com
> <mailto:SMTP:aspendora at gmail.com>]
> 	> Sent: Monday, July 30, 2007 4:13 PM
> 	> To:   chan-sccp-users at lists.berlios.de
> <mailto:chan-sccp-users at lists.berlios.de>
> 	> Subject:      Re: [Chan-sccp-users] R: chan_sccp and 7970
> 	>
> 	>
> 	> On 7/30/07, Zuber, Jonathan < jzuber at drs.ca <mailto:jzuber at drs.ca>
> <mailto: jzuber at drs.ca  <mailto:jzuber at drs.ca>>> wrote:
> 	>
> 	>
> 	>       Ok here is sccp.conf (general and 1 phone and 1 line)
> 	>
> 	>
> 	>
> 	> Ok, first question...  Are you using static IPs for the phones?
> You've
> 	> told it in sccp.conf that the phone can only be the IP address you
> have
> 	> listed.
> 	>
> 	> Second, I'm assuming this is a Trixbox and/or FreePBX system.  I
> believe
> 	> the default context for the extensions is from-internal.  The
> context 
> 	> named default in extensions.conf may not be referencing
> (including) the
> 	> corresponding context in extensions_additional.conf.
> 	>
> 	> Make sure you have something similar to this:
> 	>
> 	> extensions.conf :
> 	> #include extensions_additional.conf
> 	>
> 	> [default]
> 	> include => additional_default
> 	>
> 	> ...
> 	>
> 	>
> 	> extensions_additional.conf
> 	> [additional_default]
> 	> exten => 2001 ... and so on as you posted before 
> 	>
> 	>
> 	>
> 	>
> 	>
> 	>   << File: ATT395276.txt >>
> 	_______________________________________________
> 	Chan-sccp-users mailing list
> 	Chan-sccp-users at lists.berlios.de
> <mailto:Chan-sccp-users at lists.berlios.de>
> 	<https://lists.berlios.de/mailman/listinfo/chan-sccp-users>
> 	
> 
> 
> 
> 
> -- 
> Lacy Moore
> Somewhere I wish I wasn't  << File: ATT395652.txt >> 
_______________________________________________
Chan-sccp-users mailing list
Chan-sccp-users at lists.berlios.de
https://lists.berlios.de/mailman/listinfo/chan-sccp-users
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/chan-sccp-users/attachments/20070731/76ef9d0c/attachment.html>

