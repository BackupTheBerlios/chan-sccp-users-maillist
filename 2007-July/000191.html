<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chan-sccp-users] R:  chan_sccp and 7970
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/chan-sccp-users/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:chan-sccp-users%40lists.berlios.de?Subject=Re%3A%20%5BChan-sccp-users%5D%20R%3A%20%20chan_sccp%20and%207970&In-Reply-To=%3C03FDC7A639326744925F8EB885247BAF861E7B%40THEBRAIN1.drs.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000217.html">
   <LINK REL="Next"  HREF="000193.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chan-sccp-users] R:  chan_sccp and 7970</H1>
    <B>Zuber, Jonathan</B> 
    <A HREF="mailto:chan-sccp-users%40lists.berlios.de?Subject=Re%3A%20%5BChan-sccp-users%5D%20R%3A%20%20chan_sccp%20and%207970&In-Reply-To=%3C03FDC7A639326744925F8EB885247BAF861E7B%40THEBRAIN1.drs.ca%3E"
       TITLE="[Chan-sccp-users] R:  chan_sccp and 7970">jzuber at drs.ca
       </A><BR>
    <I>Thu Jul 19 20:34:15 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000217.html">[Chan-sccp-users] Improving the BLF function on 7914/7961
</A></li>
        <LI>Next message: <A HREF="000193.html">[Chan-sccp-users] R:  chan_sccp and 7970
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#191">[ date ]</a>
              <a href="thread.html#191">[ thread ]</a>
              <a href="subject.html#191">[ subject ]</a>
              <a href="author.html#191">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I get here, when I pick up the receiver, and I hear a  dial tone:

    -- SEP0019563DD448: &gt;&gt; Got message OffHookMessage
    -- SEP0019563DD448: Getting the active channel on device
    -- SEP0019563DD448: Taken Offhook
    -- SEP0019563DD448: The active line is 2002
    -- SEP0019563DD448: Using line 2002
    -- SEP0019563DD448: Getting the active channel on device
    -- SEP0019563DD448: New channel number: 4 on line 2002
    -- SEP0019563DD448: Set the active channel 4 on device
    -- SEP0019563DD448: Indicate SCCP state (OffHook) on call 2002-4
    -- SEP0019563DD448: Clear the display notify message
    -- SEP0019563DD448: Clear the status prompt on line 0 and callid 0
    -- SEP0019563DD448: Send speaker mode 1
    -- SEP0019563DD448: Send lamp mode LampOn(2) on line 1
    -- SEP0019563DD448: Send and Set the call state OffHook(1) on call 4
    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
    -- SEP0019563DD448: Send softkeyset to OffHook(4) on line 1  and call 4
    -- SEP0019563DD448: Send activate call plane on line 1
    -- SEP0019563DD448: Sending tone InsideDialTone (33)
    -- SEP0019563DD448: Finish to indicate state SCCP (OffHook), SKINNY
(OffHook) on call 2002-4
    -- SEP0019563DD448: Global Capabilities: 4
    -- SEP0019563DD448: format request: 268/4
    -- SEP0019563DD448: Channel SCCP/2002-00000004, capabilities: DEVICE
0x10c (ulaw|alaw|g729) NATIVE 0x10c (ulaw|alaw|g729) BEST 4 (ulaw)
    -- SEP0019563DD448: Allocated asterisk channel 2002-4
    -- SCCP: Looking for line 2002
    -- SEP0019563DD448: found line 2002
    -- SCCP: Asterisk asked for the state (2) of the line 2002
    -- SEP0019563DD448: Set asterisk state OffHook (2) for call 4
    -- GOT data SCCP/2002-00000004 (0x101aa5f0)
    -- GOT line 2002
    -- GOT device SEP0019563DD448
    -- SEP0019563DD448: New call on line 2002
    -- SEP0019563DD448: Set callingParty Name &quot;7970 2002&quot; on channel 4
    -- SEP0019563DD448: Set callingParty Number 2002 on channel 4
    -- SEP0019563DD448: Waiting for the number to dial on channel 2002-4

And then the phone cuts out (times out), even though I have typed my
extension to dial, and have tried pressing the &quot;dial&quot; button, or setting my
sccp.conf to force dial on # and pressing #, still no dice!  (note here, I
went into chan_sccp.c and found this just before a do loop, I put in an
output of the (&quot;testing : %s&quot;, c-&gt;dialnumber) or something along those lines
and it printed to the screen many times, but the dialnumber is always
blank).

When the phone cuts out I get this:

- SEP0019563DD448: Indicate SCCP state (Dialing) on call 2002-4
    -- SEP0019563DD448: Stop tone on device
    -- SEP0019563DD448: Send softkeyset to DigitsFoll(6) on line 1  and call
4
    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
    -- SCCP: Looking for line 2002
    -- SEP0019563DD448: found line 2002
    -- SCCP: Asterisk asked for the state (2) of the line 2002
    -- SEP0019563DD448: Set asterisk state Dialing (3) for call 4
    -- SEP0019563DD448: Finish to indicate state SCCP (Dialing), SKINNY
(OffHook) on call 2002-4
    -- SEP0019563DD448: Send and Set the call state Proceed(12) on call 4
    -- SEP0019563DD448: Send callinfo for Outbound channel 4
    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
    -- SEP0019563DD448: Indicate SCCP state (InvalidNumber) on call 2002-4
    -- SEP0019563DD448: Sending tone ReorderTone (37)
    -- SEP0019563DD448: Send and Set the call state InvalidNumber(14) on
call 4
    -- SEP0019563DD448: Send callinfo for Outbound channel 4
    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
    -- SEP0019563DD448: Finish to indicate state SCCP (InvalidNumber),
SKINNY (InvalidNumber) on call 2002-4
    -- SEP0019563DD448: return from the startchannel on exit

Until I hang up.



&gt;<i> -----Original Message-----
</I>&gt;<i> From:	Federico Santulli [SMTP:<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">mobile at nhm.it</A>]
</I>&gt;<i> Sent:	Wednesday, July 18, 2007 3:25 PM
</I>&gt;<i> To:	<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> Subject:	[Chan-sccp-users] R:  chan_sccp and 7970
</I>&gt;<i> 
</I>&gt;<i> Try to use the command &quot;sccp debug&quot; from asterisk console to see what is
</I>&gt;<i> happening on channel ;)
</I>&gt;<i> 
</I>&gt;<i> Let us know.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----Messaggio originale-----
</I>&gt;<i> Da: <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users-bounces at lists.berlios.de</A>
</I>&gt;<i> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users-bounces at lists.berlios.de</A>] Per conto di Zuber,
</I>&gt;<i> Jonathan
</I>&gt;<i> Inviato: mercoled&#236; 18 luglio 2007 21.20
</I>&gt;<i> A: '<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>'; '<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Marcello.Ceschia at gmx.net</A>'
</I>&gt;<i> Oggetto: Re: [Chan-sccp-users] chan_sccp and 7970
</I>&gt;<i> 
</I>&gt;<i> I have it on full debug - asterisk is not seeing the digits I am pressing
</I>&gt;<i> at
</I>&gt;<i> all, however it sees the speedial digits (if i wait for the dialtone
</I>&gt;<i> timeout
</I>&gt;<i> and then press speeddial it sends those digits, and asterisk catches
</I>&gt;<i> them).
</I>&gt;<i> I set debug level in my sccp.conf to 10 and I run asterisk using the
</I>&gt;<i> -vvvvvvvvvvgc command in console.
</I>&gt;<i> 
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From:	Ceschia, Marcello [SMTP:<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Marcello.Ceschia at gmx.net</A>]
</I>&gt;<i> &gt; Sent:	Wednesday, July 18, 2007 2:34 PM
</I>&gt;<i> &gt; To:	<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> &gt; Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hello Jonathan,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; after reading your email, I tried to rebuild the problem.
</I>&gt;<i> &gt; I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
</I>&gt;<i> &gt; asterisk 
</I>&gt;<i> &gt; 1.4.7. I have no problem using the dial-button.
</I>&gt;<i> &gt; Do you have some logs on console (set verbose 4)?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  Marcello
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
</I>&gt;<i> &gt; &gt; Hello all,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; 	Not sure if this is a chan_sccp issue or an Asterisk issue, or maybe
</I>&gt;<i> &gt; &gt; just a cisco 7970 issue, but here it is:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; 	I have been working on this problem for a couple days now, and was
</I>&gt;<i> &gt; &gt; looking for a little help.  I am running a Cisco 7970 IP phone, using
</I>&gt;<i> &gt; SCCP,
</I>&gt;<i> &gt; &gt; and a tftp server running Asterisk 1.4.6.  I have everything compiled,
</I>&gt;<i> a
</I>&gt;<i> &gt; &gt; new chan_sccp (the patched one that works with Asterisk 1.4.4+), and
</I>&gt;<i> my
</I>&gt;<i> &gt; &gt; phones connect properly to Asterisk, speedials pop up and everything.
</I>&gt;<i> &gt; The
</I>&gt;<i> &gt; &gt; speeddials even work! They will dial the extensions I programmed into
</I>&gt;<i> &gt; them
</I>&gt;<i> &gt; &gt; no problem.  However, when I try to just do a regular dial, a &quot;dial&quot;
</I>&gt;<i> &gt; screen
</I>&gt;<i> &gt; &gt; pops up, shows me the digits I dialed, then does nothing. This screen
</I>&gt;<i> &gt; has 3
</I>&gt;<i> &gt; &gt; softbuttons, a cancel, a &lt;&lt; (backspace) and a &quot;Dial&quot; softbutton.  The
</I>&gt;<i> &gt; &gt; cancel and &lt;&lt; work just fine, but the Dial softbutton does nothing.  I
</I>&gt;<i> &gt; am
</I>&gt;<i> &gt; &gt; monitoring asterisk on full debug, and I see no indication that it is
</I>&gt;<i> &gt; &gt; receiving the digits from the phone.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; 	Any help is much appreciated, and thanks in advance.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Jonathan Zuber
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Chan-sccp-users mailing list
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Chan-sccp-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Chan-sccp-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Chan-sccp-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000217.html">[Chan-sccp-users] Improving the BLF function on 7914/7961
</A></li>
	<LI>Next message: <A HREF="000193.html">[Chan-sccp-users] R:  chan_sccp and 7970
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#191">[ date ]</a>
              <a href="thread.html#191">[ thread ]</a>
              <a href="subject.html#191">[ subject ]</a>
              <a href="author.html#191">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">More information about the Chan-sccp-users
mailing list</a><br>
</body></html>
