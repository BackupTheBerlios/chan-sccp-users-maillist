<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chan-sccp-users] R:  chan_sccp and 7970
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/chan-sccp-users/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:chan-sccp-users%40lists.berlios.de?Subject=Re%3A%20%5BChan-sccp-users%5D%20R%3A%20%20chan_sccp%20and%207970&In-Reply-To=%3C014801c7ca33%24de065bd0%249a131370%24%40at%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000191.html">
   <LINK REL="Next"  HREF="000194.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chan-sccp-users] R:  chan_sccp and 7970</H1>
    <B>Hakan Evirgen</B> 
    <A HREF="mailto:chan-sccp-users%40lists.berlios.de?Subject=Re%3A%20%5BChan-sccp-users%5D%20R%3A%20%20chan_sccp%20and%207970&In-Reply-To=%3C014801c7ca33%24de065bd0%249a131370%24%40at%3E"
       TITLE="[Chan-sccp-users] R:  chan_sccp and 7970">hakan at nets.at
       </A><BR>
    <I>Thu Jul 19 20:37:29 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000191.html">[Chan-sccp-users] R:  chan_sccp and 7970
</A></li>
        <LI>Next message: <A HREF="000194.html">[Chan-sccp-users] R:  chan_sccp and 7970
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#193">[ date ]</a>
              <a href="thread.html#193">[ thread ]</a>
              <a href="subject.html#193">[ subject ]</a>
              <a href="author.html#193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Seems so that your phone is NOT sending any digit.

Do you have the possibility to test another phone?

Best regards,
Hakan Evirgen


&gt;<i>-----Original Message-----
</I>&gt;<i>From: <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users-bounces at lists.berlios.de</A> [mailto:chan-sccp-users-
</I>&gt;<i><A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">bounces at lists.berlios.de</A>] On Behalf Of Zuber, Jonathan
</I>&gt;<i>Sent: Thursday, July 19, 2007 8:34 PM
</I>&gt;<i>To: '<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>'
</I>&gt;<i>Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
</I>&gt;<i>
</I>&gt;<i>I get here, when I pick up the receiver, and I hear a  dial tone:
</I>&gt;<i>
</I>&gt;<i>    -- SEP0019563DD448: &gt;&gt; Got message OffHookMessage
</I>&gt;<i>    -- SEP0019563DD448: Getting the active channel on device
</I>&gt;<i>    -- SEP0019563DD448: Taken Offhook
</I>&gt;<i>    -- SEP0019563DD448: The active line is 2002
</I>&gt;<i>    -- SEP0019563DD448: Using line 2002
</I>&gt;<i>    -- SEP0019563DD448: Getting the active channel on device
</I>&gt;<i>    -- SEP0019563DD448: New channel number: 4 on line 2002
</I>&gt;<i>    -- SEP0019563DD448: Set the active channel 4 on device
</I>&gt;<i>    -- SEP0019563DD448: Indicate SCCP state (OffHook) on call 2002-4
</I>&gt;<i>    -- SEP0019563DD448: Clear the display notify message
</I>&gt;<i>    -- SEP0019563DD448: Clear the status prompt on line 0 and callid 0
</I>&gt;<i>    -- SEP0019563DD448: Send speaker mode 1
</I>&gt;<i>    -- SEP0019563DD448: Send lamp mode LampOn(2) on line 1
</I>&gt;<i>    -- SEP0019563DD448: Send and Set the call state OffHook(1) on call 4
</I>&gt;<i>    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
</I>&gt;<i>    -- SEP0019563DD448: Send softkeyset to OffHook(4) on line 1  and call
</I>&gt;<i>4
</I>&gt;<i>    -- SEP0019563DD448: Send activate call plane on line 1
</I>&gt;<i>    -- SEP0019563DD448: Sending tone InsideDialTone (33)
</I>&gt;<i>    -- SEP0019563DD448: Finish to indicate state SCCP (OffHook), SKINNY
</I>&gt;<i>(OffHook) on call 2002-4
</I>&gt;<i>    -- SEP0019563DD448: Global Capabilities: 4
</I>&gt;<i>    -- SEP0019563DD448: format request: 268/4
</I>&gt;<i>    -- SEP0019563DD448: Channel SCCP/2002-00000004, capabilities: DEVICE
</I>&gt;<i>0x10c (ulaw|alaw|g729) NATIVE 0x10c (ulaw|alaw|g729) BEST 4 (ulaw)
</I>&gt;<i>    -- SEP0019563DD448: Allocated asterisk channel 2002-4
</I>&gt;<i>    -- SCCP: Looking for line 2002
</I>&gt;<i>    -- SEP0019563DD448: found line 2002
</I>&gt;<i>    -- SCCP: Asterisk asked for the state (2) of the line 2002
</I>&gt;<i>    -- SEP0019563DD448: Set asterisk state OffHook (2) for call 4
</I>&gt;<i>    -- GOT data SCCP/2002-00000004 (0x101aa5f0)
</I>&gt;<i>    -- GOT line 2002
</I>&gt;<i>    -- GOT device SEP0019563DD448
</I>&gt;<i>    -- SEP0019563DD448: New call on line 2002
</I>&gt;<i>    -- SEP0019563DD448: Set callingParty Name &quot;7970 2002&quot; on channel 4
</I>&gt;<i>    -- SEP0019563DD448: Set callingParty Number 2002 on channel 4
</I>&gt;<i>    -- SEP0019563DD448: Waiting for the number to dial on channel 2002-4
</I>&gt;<i>
</I>&gt;<i>And then the phone cuts out (times out), even though I have typed my
</I>&gt;<i>extension to dial, and have tried pressing the &quot;dial&quot; button, or setting
</I>&gt;<i>my
</I>&gt;<i>sccp.conf to force dial on # and pressing #, still no dice!  (note here,
</I>&gt;<i>I
</I>&gt;<i>went into chan_sccp.c and found this just before a do loop, I put in an
</I>&gt;<i>output of the (&quot;testing : %s&quot;, c-&gt;dialnumber) or something along those
</I>&gt;<i>lines
</I>&gt;<i>and it printed to the screen many times, but the dialnumber is always
</I>&gt;<i>blank).
</I>&gt;<i>
</I>&gt;<i>When the phone cuts out I get this:
</I>&gt;<i>
</I>&gt;<i>- SEP0019563DD448: Indicate SCCP state (Dialing) on call 2002-4
</I>&gt;<i>    -- SEP0019563DD448: Stop tone on device
</I>&gt;<i>    -- SEP0019563DD448: Send softkeyset to DigitsFoll(6) on line 1  and
</I>&gt;<i>call
</I>&gt;<i>4
</I>&gt;<i>    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
</I>&gt;<i>    -- SCCP: Looking for line 2002
</I>&gt;<i>    -- SEP0019563DD448: found line 2002
</I>&gt;<i>    -- SCCP: Asterisk asked for the state (2) of the line 2002
</I>&gt;<i>    -- SEP0019563DD448: Set asterisk state Dialing (3) for call 4
</I>&gt;<i>    -- SEP0019563DD448: Finish to indicate state SCCP (Dialing), SKINNY
</I>&gt;<i>(OffHook) on call 2002-4
</I>&gt;<i>    -- SEP0019563DD448: Send and Set the call state Proceed(12) on call 4
</I>&gt;<i>    -- SEP0019563DD448: Send callinfo for Outbound channel 4
</I>&gt;<i>    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
</I>&gt;<i>    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
</I>&gt;<i>    -- SEP0019563DD448: Indicate SCCP state (InvalidNumber) on call 2002-
</I>&gt;<i>4
</I>&gt;<i>    -- SEP0019563DD448: Sending tone ReorderTone (37)
</I>&gt;<i>    -- SEP0019563DD448: Send and Set the call state InvalidNumber(14) on
</I>&gt;<i>call 4
</I>&gt;<i>    -- SEP0019563DD448: Send callinfo for Outbound channel 4
</I>&gt;<i>    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
</I>&gt;<i>    -- SEP0019563DD448: Finish to indicate state SCCP (InvalidNumber),
</I>&gt;<i>SKINNY (InvalidNumber) on call 2002-4
</I>&gt;<i>    -- SEP0019563DD448: return from the startchannel on exit
</I>&gt;<i>
</I>&gt;<i>Until I hang up.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From:	Federico Santulli [SMTP:<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">mobile at nhm.it</A>]
</I>&gt;&gt;<i> Sent:	Wednesday, July 18, 2007 3:25 PM
</I>&gt;&gt;<i> To:	<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>
</I>&gt;&gt;<i> Subject:	[Chan-sccp-users] R:  chan_sccp and 7970
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Try to use the command &quot;sccp debug&quot; from asterisk console to see what
</I>&gt;<i>is
</I>&gt;&gt;<i> happening on channel ;)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Let us know.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -----Messaggio originale-----
</I>&gt;&gt;<i> Da: <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users-bounces at lists.berlios.de</A>
</I>&gt;&gt;<i> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users-bounces at lists.berlios.de</A>] Per conto di Zuber,
</I>&gt;&gt;<i> Jonathan
</I>&gt;&gt;<i> Inviato: mercoled&#236; 18 luglio 2007 21.20
</I>&gt;&gt;<i> A: '<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>'; '<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Marcello.Ceschia at gmx.net</A>'
</I>&gt;&gt;<i> Oggetto: Re: [Chan-sccp-users] chan_sccp and 7970
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have it on full debug - asterisk is not seeing the digits I am
</I>&gt;<i>pressing
</I>&gt;&gt;<i> at
</I>&gt;&gt;<i> all, however it sees the speedial digits (if i wait for the dialtone
</I>&gt;&gt;<i> timeout
</I>&gt;&gt;<i> and then press speeddial it sends those digits, and asterisk catches
</I>&gt;&gt;<i> them).
</I>&gt;&gt;<i> I set debug level in my sccp.conf to 10 and I run asterisk using the
</I>&gt;&gt;<i> -vvvvvvvvvvgc command in console.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; -----Original Message-----
</I>&gt;&gt;<i> &gt; From:	Ceschia, Marcello [SMTP:<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Marcello.Ceschia at gmx.net</A>]
</I>&gt;&gt;<i> &gt; Sent:	Wednesday, July 18, 2007 2:34 PM
</I>&gt;&gt;<i> &gt; To:	<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>
</I>&gt;&gt;<i> &gt; Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Hello Jonathan,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; after reading your email, I tried to rebuild the problem.
</I>&gt;&gt;<i> &gt; I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
</I>&gt;&gt;<i> &gt; asterisk
</I>&gt;&gt;<i> &gt; 1.4.7. I have no problem using the dial-button.
</I>&gt;&gt;<i> &gt; Do you have some logs on console (set verbose 4)?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;  Marcello
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
</I>&gt;&gt;<i> &gt; &gt; Hello all,
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; 	Not sure if this is a chan_sccp issue or an Asterisk issue, or
</I>&gt;<i>maybe
</I>&gt;&gt;<i> &gt; &gt; just a cisco 7970 issue, but here it is:
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; 	I have been working on this problem for a couple days now, and
</I>&gt;<i>was
</I>&gt;&gt;<i> &gt; &gt; looking for a little help.  I am running a Cisco 7970 IP phone,
</I>&gt;<i>using
</I>&gt;&gt;<i> &gt; SCCP,
</I>&gt;&gt;<i> &gt; &gt; and a tftp server running Asterisk 1.4.6.  I have everything
</I>&gt;<i>compiled,
</I>&gt;&gt;<i> a
</I>&gt;&gt;<i> &gt; &gt; new chan_sccp (the patched one that works with Asterisk 1.4.4+),
</I>&gt;<i>and
</I>&gt;&gt;<i> my
</I>&gt;&gt;<i> &gt; &gt; phones connect properly to Asterisk, speedials pop up and
</I>&gt;<i>everything.
</I>&gt;&gt;<i> &gt; The
</I>&gt;&gt;<i> &gt; &gt; speeddials even work! They will dial the extensions I programmed
</I>&gt;<i>into
</I>&gt;&gt;<i> &gt; them
</I>&gt;&gt;<i> &gt; &gt; no problem.  However, when I try to just do a regular dial, a
</I>&gt;<i>&quot;dial&quot;
</I>&gt;&gt;<i> &gt; screen
</I>&gt;&gt;<i> &gt; &gt; pops up, shows me the digits I dialed, then does nothing. This
</I>&gt;<i>screen
</I>&gt;&gt;<i> &gt; has 3
</I>&gt;&gt;<i> &gt; &gt; softbuttons, a cancel, a &lt;&lt; (backspace) and a &quot;Dial&quot; softbutton.
</I>&gt;<i>The
</I>&gt;&gt;<i> &gt; &gt; cancel and &lt;&lt; work just fine, but the Dial softbutton does nothing.
</I>&gt;<i>I
</I>&gt;&gt;<i> &gt; am
</I>&gt;&gt;<i> &gt; &gt; monitoring asterisk on full debug, and I see no indication that it
</I>&gt;<i>is
</I>&gt;&gt;<i> &gt; &gt; receiving the digits from the phone.
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; 	Any help is much appreciated, and thanks in advance.
</I>&gt;&gt;<i> &gt; &gt;
</I>&gt;&gt;<i> &gt; &gt; Jonathan Zuber
</I>&gt;&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; &gt; Chan-sccp-users mailing list
</I>&gt;&gt;<i> &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;&gt;<i> &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; Chan-sccp-users mailing list
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Chan-sccp-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Chan-sccp-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Chan-sccp-users mailing list
</I>&gt;<i><A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i><A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000191.html">[Chan-sccp-users] R:  chan_sccp and 7970
</A></li>
	<LI>Next message: <A HREF="000194.html">[Chan-sccp-users] R:  chan_sccp and 7970
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#193">[ date ]</a>
              <a href="thread.html#193">[ thread ]</a>
              <a href="subject.html#193">[ subject ]</a>
              <a href="author.html#193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">More information about the Chan-sccp-users
mailing list</a><br>
</body></html>
