<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Chan-sccp-users] R:  chan_sccp and 7970
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/chan-sccp-users/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:chan-sccp-users%40lists.berlios.de?Subject=Re%3A%20%5BChan-sccp-users%5D%20R%3A%20%20chan_sccp%20and%207970&In-Reply-To=%3C03FDC7A639326744925F8EB885247BAF861E7C%40THEBRAIN1.drs.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000193.html">
   <LINK REL="Next"  HREF="000196.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Chan-sccp-users] R:  chan_sccp and 7970</H1>
    <B>Zuber, Jonathan</B> 
    <A HREF="mailto:chan-sccp-users%40lists.berlios.de?Subject=Re%3A%20%5BChan-sccp-users%5D%20R%3A%20%20chan_sccp%20and%207970&In-Reply-To=%3C03FDC7A639326744925F8EB885247BAF861E7C%40THEBRAIN1.drs.ca%3E"
       TITLE="[Chan-sccp-users] R:  chan_sccp and 7970">jzuber at drs.ca
       </A><BR>
    <I>Thu Jul 19 20:52:44 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000193.html">[Chan-sccp-users] R:  chan_sccp and 7970
</A></li>
        <LI>Next message: <A HREF="000196.html">[Chan-sccp-users] R:  chan_sccp and 7970
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#194">[ date ]</a>
              <a href="thread.html#194">[ thread ]</a>
              <a href="subject.html#194">[ subject ]</a>
              <a href="author.html#194">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes, I hooked up and configured a 7960 - works fine!  

The main difference I see is that when you dial on the 7970, a &quot;dialing&quot;
menu pops up and shows the digits you are pressing. As i stated in my
original post, there are three softkeys for this menu, a cancel, a backspace
(&lt;&lt;) and a Dial softkey, and the Dial softkey does not seem to do anything.
The other two work as expected.

&gt;<i> -----Original Message-----
</I>&gt;<i> From:	Hakan Evirgen [SMTP:<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">hakan at nets.at</A>]
</I>&gt;<i> Sent:	Thursday, July 19, 2007 2:37 PM
</I>&gt;<i> To:	<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> Subject:	Re: [Chan-sccp-users] R:  chan_sccp and 7970
</I>&gt;<i> 
</I>&gt;<i> Seems so that your phone is NOT sending any digit.
</I>&gt;<i> 
</I>&gt;<i> Do you have the possibility to test another phone?
</I>&gt;<i> 
</I>&gt;<i> Best regards,
</I>&gt;<i> Hakan Evirgen
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt;-----Original Message-----
</I>&gt;<i> &gt;From: <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users-bounces at lists.berlios.de</A> [mailto:chan-sccp-users-
</I>&gt;<i> &gt;<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">bounces at lists.berlios.de</A>] On Behalf Of Zuber, Jonathan
</I>&gt;<i> &gt;Sent: Thursday, July 19, 2007 8:34 PM
</I>&gt;<i> &gt;To: '<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>'
</I>&gt;<i> &gt;Subject: Re: [Chan-sccp-users] R: chan_sccp and 7970
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I get here, when I pick up the receiver, and I hear a  dial tone:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    -- SEP0019563DD448: &gt;&gt; Got message OffHookMessage
</I>&gt;<i> &gt;    -- SEP0019563DD448: Getting the active channel on device
</I>&gt;<i> &gt;    -- SEP0019563DD448: Taken Offhook
</I>&gt;<i> &gt;    -- SEP0019563DD448: The active line is 2002
</I>&gt;<i> &gt;    -- SEP0019563DD448: Using line 2002
</I>&gt;<i> &gt;    -- SEP0019563DD448: Getting the active channel on device
</I>&gt;<i> &gt;    -- SEP0019563DD448: New channel number: 4 on line 2002
</I>&gt;<i> &gt;    -- SEP0019563DD448: Set the active channel 4 on device
</I>&gt;<i> &gt;    -- SEP0019563DD448: Indicate SCCP state (OffHook) on call 2002-4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Clear the display notify message
</I>&gt;<i> &gt;    -- SEP0019563DD448: Clear the status prompt on line 0 and callid 0
</I>&gt;<i> &gt;    -- SEP0019563DD448: Send speaker mode 1
</I>&gt;<i> &gt;    -- SEP0019563DD448: Send lamp mode LampOn(2) on line 1
</I>&gt;<i> &gt;    -- SEP0019563DD448: Send and Set the call state OffHook(1) on call 4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
</I>&gt;<i> &gt;    -- SEP0019563DD448: Send softkeyset to OffHook(4) on line 1  and call
</I>&gt;<i> &gt;4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Send activate call plane on line 1
</I>&gt;<i> &gt;    -- SEP0019563DD448: Sending tone InsideDialTone (33)
</I>&gt;<i> &gt;    -- SEP0019563DD448: Finish to indicate state SCCP (OffHook), SKINNY
</I>&gt;<i> &gt;(OffHook) on call 2002-4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Global Capabilities: 4
</I>&gt;<i> &gt;    -- SEP0019563DD448: format request: 268/4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Channel SCCP/2002-00000004, capabilities: DEVICE
</I>&gt;<i> &gt;0x10c (ulaw|alaw|g729) NATIVE 0x10c (ulaw|alaw|g729) BEST 4 (ulaw)
</I>&gt;<i> &gt;    -- SEP0019563DD448: Allocated asterisk channel 2002-4
</I>&gt;<i> &gt;    -- SCCP: Looking for line 2002
</I>&gt;<i> &gt;    -- SEP0019563DD448: found line 2002
</I>&gt;<i> &gt;    -- SCCP: Asterisk asked for the state (2) of the line 2002
</I>&gt;<i> &gt;    -- SEP0019563DD448: Set asterisk state OffHook (2) for call 4
</I>&gt;<i> &gt;    -- GOT data SCCP/2002-00000004 (0x101aa5f0)
</I>&gt;<i> &gt;    -- GOT line 2002
</I>&gt;<i> &gt;    -- GOT device SEP0019563DD448
</I>&gt;<i> &gt;    -- SEP0019563DD448: New call on line 2002
</I>&gt;<i> &gt;    -- SEP0019563DD448: Set callingParty Name &quot;7970 2002&quot; on channel 4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Set callingParty Number 2002 on channel 4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Waiting for the number to dial on channel 2002-4
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;And then the phone cuts out (times out), even though I have typed my
</I>&gt;<i> &gt;extension to dial, and have tried pressing the &quot;dial&quot; button, or setting
</I>&gt;<i> &gt;my
</I>&gt;<i> &gt;sccp.conf to force dial on # and pressing #, still no dice!  (note here,
</I>&gt;<i> &gt;I
</I>&gt;<i> &gt;went into chan_sccp.c and found this just before a do loop, I put in an
</I>&gt;<i> &gt;output of the (&quot;testing : %s&quot;, c-&gt;dialnumber) or something along those
</I>&gt;<i> &gt;lines
</I>&gt;<i> &gt;and it printed to the screen many times, but the dialnumber is always
</I>&gt;<i> &gt;blank).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;When the phone cuts out I get this:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;- SEP0019563DD448: Indicate SCCP state (Dialing) on call 2002-4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Stop tone on device
</I>&gt;<i> &gt;    -- SEP0019563DD448: Send softkeyset to DigitsFoll(6) on line 1  and
</I>&gt;<i> &gt;call
</I>&gt;<i> &gt;4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
</I>&gt;<i> &gt;    -- SCCP: Looking for line 2002
</I>&gt;<i> &gt;    -- SEP0019563DD448: found line 2002
</I>&gt;<i> &gt;    -- SCCP: Asterisk asked for the state (2) of the line 2002
</I>&gt;<i> &gt;    -- SEP0019563DD448: Set asterisk state Dialing (3) for call 4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Finish to indicate state SCCP (Dialing), SKINNY
</I>&gt;<i> &gt;(OffHook) on call 2002-4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Send and Set the call state Proceed(12) on call 4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Send callinfo for Outbound channel 4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Clear the status prompt on line 1 and callid 4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
</I>&gt;<i> &gt;    -- SEP0019563DD448: Indicate SCCP state (InvalidNumber) on call 2002-
</I>&gt;<i> &gt;4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Sending tone ReorderTone (37)
</I>&gt;<i> &gt;    -- SEP0019563DD448: Send and Set the call state InvalidNumber(14) on
</I>&gt;<i> &gt;call 4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Send callinfo for Outbound channel 4
</I>&gt;<i> &gt;    -- SEP0019563DD448: Display prompt on line 1, callid 4, timeout 0
</I>&gt;<i> &gt;    -- SEP0019563DD448: Finish to indicate state SCCP (InvalidNumber),
</I>&gt;<i> &gt;SKINNY (InvalidNumber) on call 2002-4
</I>&gt;<i> &gt;    -- SEP0019563DD448: return from the startchannel on exit
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Until I hang up.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; -----Original Message-----
</I>&gt;<i> &gt;&gt; From:	Federico Santulli [SMTP:<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">mobile at nhm.it</A>]
</I>&gt;<i> &gt;&gt; Sent:	Wednesday, July 18, 2007 3:25 PM
</I>&gt;<i> &gt;&gt; To:	<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; Subject:	[Chan-sccp-users] R:  chan_sccp and 7970
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Try to use the command &quot;sccp debug&quot; from asterisk console to see what
</I>&gt;<i> &gt;is
</I>&gt;<i> &gt;&gt; happening on channel ;)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Let us know.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; -----Messaggio originale-----
</I>&gt;<i> &gt;&gt; Da: <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users-bounces at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users-bounces at lists.berlios.de</A>] Per conto di Zuber,
</I>&gt;<i> &gt;&gt; Jonathan
</I>&gt;<i> &gt;&gt; Inviato: mercoled&#236; 18 luglio 2007 21.20
</I>&gt;<i> &gt;&gt; A: '<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>'; '<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Marcello.Ceschia at gmx.net</A>'
</I>&gt;<i> &gt;&gt; Oggetto: Re: [Chan-sccp-users] chan_sccp and 7970
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I have it on full debug - asterisk is not seeing the digits I am
</I>&gt;<i> &gt;pressing
</I>&gt;<i> &gt;&gt; at
</I>&gt;<i> &gt;&gt; all, however it sees the speedial digits (if i wait for the dialtone
</I>&gt;<i> &gt;&gt; timeout
</I>&gt;<i> &gt;&gt; and then press speeddial it sends those digits, and asterisk catches
</I>&gt;<i> &gt;&gt; them).
</I>&gt;<i> &gt;&gt; I set debug level in my sccp.conf to 10 and I run asterisk using the
</I>&gt;<i> &gt;&gt; -vvvvvvvvvvgc command in console.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; -----Original Message-----
</I>&gt;<i> &gt;&gt; &gt; From:	Ceschia, Marcello [SMTP:<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Marcello.Ceschia at gmx.net</A>]
</I>&gt;<i> &gt;&gt; &gt; Sent:	Wednesday, July 18, 2007 2:34 PM
</I>&gt;<i> &gt;&gt; &gt; To:	<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; &gt; Subject:	Re: [Chan-sccp-users] chan_sccp and 7970
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Hello Jonathan,
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; after reading your email, I tried to rebuild the problem.
</I>&gt;<i> &gt;&gt; &gt; I use cisco 7971 on asterisk 1.4.7.1 and the chan_sccp-Version for
</I>&gt;<i> &gt;&gt; &gt; asterisk
</I>&gt;<i> &gt;&gt; &gt; 1.4.7. I have no problem using the dial-button.
</I>&gt;<i> &gt;&gt; &gt; Do you have some logs on console (set verbose 4)?
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;  Marcello
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Am Mittwoch, 18. Juli 2007 19:10 schrieb Zuber, Jonathan:
</I>&gt;<i> &gt;&gt; &gt; &gt; Hello all,
</I>&gt;<i> &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; &gt; 	Not sure if this is a chan_sccp issue or an Asterisk issue,
</I>&gt;<i> or
</I>&gt;<i> &gt;maybe
</I>&gt;<i> &gt;&gt; &gt; &gt; just a cisco 7970 issue, but here it is:
</I>&gt;<i> &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; &gt; 	I have been working on this problem for a couple days now,
</I>&gt;<i> and
</I>&gt;<i> &gt;was
</I>&gt;<i> &gt;&gt; &gt; &gt; looking for a little help.  I am running a Cisco 7970 IP phone,
</I>&gt;<i> &gt;using
</I>&gt;<i> &gt;&gt; &gt; SCCP,
</I>&gt;<i> &gt;&gt; &gt; &gt; and a tftp server running Asterisk 1.4.6.  I have everything
</I>&gt;<i> &gt;compiled,
</I>&gt;<i> &gt;&gt; a
</I>&gt;<i> &gt;&gt; &gt; &gt; new chan_sccp (the patched one that works with Asterisk 1.4.4+),
</I>&gt;<i> &gt;and
</I>&gt;<i> &gt;&gt; my
</I>&gt;<i> &gt;&gt; &gt; &gt; phones connect properly to Asterisk, speedials pop up and
</I>&gt;<i> &gt;everything.
</I>&gt;<i> &gt;&gt; &gt; The
</I>&gt;<i> &gt;&gt; &gt; &gt; speeddials even work! They will dial the extensions I programmed
</I>&gt;<i> &gt;into
</I>&gt;<i> &gt;&gt; &gt; them
</I>&gt;<i> &gt;&gt; &gt; &gt; no problem.  However, when I try to just do a regular dial, a
</I>&gt;<i> &gt;&quot;dial&quot;
</I>&gt;<i> &gt;&gt; &gt; screen
</I>&gt;<i> &gt;&gt; &gt; &gt; pops up, shows me the digits I dialed, then does nothing. This
</I>&gt;<i> &gt;screen
</I>&gt;<i> &gt;&gt; &gt; has 3
</I>&gt;<i> &gt;&gt; &gt; &gt; softbuttons, a cancel, a &lt;&lt; (backspace) and a &quot;Dial&quot; softbutton.
</I>&gt;<i> &gt;The
</I>&gt;<i> &gt;&gt; &gt; &gt; cancel and &lt;&lt; work just fine, but the Dial softbutton does nothing.
</I>&gt;<i> &gt;I
</I>&gt;<i> &gt;&gt; &gt; am
</I>&gt;<i> &gt;&gt; &gt; &gt; monitoring asterisk on full debug, and I see no indication that it
</I>&gt;<i> &gt;is
</I>&gt;<i> &gt;&gt; &gt; &gt; receiving the digits from the phone.
</I>&gt;<i> &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; &gt; 	Any help is much appreciated, and thanks in advance.
</I>&gt;<i> &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; &gt; Jonathan Zuber
</I>&gt;<i> &gt;&gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt;&gt; &gt; &gt; Chan-sccp-users mailing list
</I>&gt;<i> &gt;&gt; &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;<i> &gt;&gt; &gt; _______________________________________________
</I>&gt;<i> &gt;&gt; &gt; Chan-sccp-users mailing list
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Chan-sccp-users mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Chan-sccp-users mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;<i> &gt;_______________________________________________
</I>&gt;<i> &gt;Chan-sccp-users mailing list
</I>&gt;<i> &gt;<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> &gt;<A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Chan-sccp-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">Chan-sccp-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">https://lists.berlios.de/mailman/listinfo/chan-sccp-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000193.html">[Chan-sccp-users] R:  chan_sccp and 7970
</A></li>
	<LI>Next message: <A HREF="000196.html">[Chan-sccp-users] R:  chan_sccp and 7970
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#194">[ date ]</a>
              <a href="thread.html#194">[ thread ]</a>
              <a href="subject.html#194">[ subject ]</a>
              <a href="author.html#194">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/chan-sccp-users">More information about the Chan-sccp-users
mailing list</a><br>
</body></html>
